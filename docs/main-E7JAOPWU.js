import{$ as xe,$a as it,$b as Tg,A as Iu,Aa as rg,Ab as zs,B as Wm,Ba as Du,Bb as _g,C as Tu,Ca as sg,Cb as Ba,D as Hm,Da as og,Db as Wa,E as jn,Ea as Ls,Eb as vg,F as hr,Fa as C,Fb as Fu,G as ks,Ga as G,Gb as Vu,H as Au,Ha as Ru,Hb as yg,I as fr,Ia as ag,Ib as _r,J as $m,Ja as ja,Jb as bg,K as Gm,Ka as Wn,Kb as xg,L as Ua,La as cg,Lb as $n,M as Bn,Ma as Be,Mb as js,N as Mu,Na as lg,Nb as Gn,O as qm,Oa as Fs,Ob as vr,P as Ym,Pa as nt,Pb as Cg,Q as Km,Qa as ug,Qb as wg,R as an,Ra as dg,Rb as kt,S as Xm,Sa as hg,Sb as Uu,T as ye,Ta as ne,Tb as Ha,U as be,Ua as Ci,Ub as Sg,V as zt,Va as me,Vb as yt,W as q,Wa as fg,Wb as Eg,X as Ds,Xa as pr,Xb as zu,Y as Qm,Ya as Nu,Yb as Ig,Z as de,Za as H,_ as Pu,_a as mr,a as R,aa as I,ab as rt,ac as ju,b as ce,ba as mt,bb as g,ca as Rs,cb as m,cc as Bs,d as bi,da as Ce,db as N,dc as Bu,e as b,ea as Ns,eb as $,f as Fm,fa as fe,fb as M,g as Vm,ga as Jm,gb as E,h as yu,ha as Kt,hb as Hn,i as bu,ia as Zm,ib as pg,j as xu,ja as za,jb as Lu,k as on,ka as yn,kb as Vs,l as ze,la as bn,lb as Us,m as Um,ma as O,mb as Re,n as zm,na as k,nb as y,o as zn,oa as Ot,ob as ee,p as Cu,pa as eg,pb as st,q as wu,qa as xn,qb as ot,r as Su,ra as Ou,rb as at,s as je,sa as gt,sb as ct,t as z,ta as cn,tb as vt,u as Os,ua as tg,ub as we,v as jm,va as _t,vb as mg,w as Bm,wa as ng,wb as gg,x as j,xa as ku,xb as Ne,y as Eu,ya as ig,yb as We,z as Ut,za as xi,zb as gr}from"./chunk-5SXULDTD.js";var $u=class extends wg{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Gu=class n extends $u{static makeCurrent(){Cg(new n)}onAndCancel(e,t,i){return e.addEventListener(t,i),()=>{e.removeEventListener(t,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=sS();return t==null?null:oS(t)}resetBaseElement(){Ws=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Sg(document.cookie,e)}},Ws=null;function sS(){return Ws=Ws||document.querySelector("base"),Ws?Ws.getAttribute("href"):null}function oS(n){return new URL(n,document.baseURI).pathname}var aS=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac});let n=e;return n})(),$a=new de(""),Pg=(()=>{let e=class e{constructor(i,r){this._zone=r,this._eventNameToPlugin=new Map,i.forEach(s=>{s.manager=this}),this._plugins=i.slice().reverse()}addEventListener(i,r,s){return this._findPluginFor(r).addEventListener(i,r,s)}getZone(){return this._zone}_findPluginFor(i){let r=this._eventNameToPlugin.get(i);if(r)return r;if(r=this._plugins.find(o=>o.supports(i)),!r)throw new be(5101,!1);return this._eventNameToPlugin.set(i,r),r}};e.\u0275fac=function(r){return new(r||e)(xe($a),xe(Be))},e.\u0275prov=q({token:e,factory:e.\u0275fac});let n=e;return n})(),Hs=class{constructor(e){this._doc=e}},Wu="ng-app-id",Og=(()=>{let e=class e{constructor(i,r,s,o={}){this.doc=i,this.appId=r,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=zu(o),this.resetHostNodes()}addStyles(i){for(let r of i)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(i){for(let r of i)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let i=this.styleNodesInDOM;i&&(i.forEach(r=>r.remove()),i.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(i){this.hostNodes.add(i);for(let r of this.getAllStyles())this.addStyleToHost(i,r)}removeHost(i){this.hostNodes.delete(i)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(i){for(let r of this.hostNodes)this.addStyleToHost(r,i)}onStyleRemoved(i){let r=this.styleRef;r.get(i)?.elements?.forEach(s=>s.remove()),r.delete(i)}collectServerRenderedStyles(){let i=this.doc.head?.querySelectorAll(`style[${Wu}="${this.appId}"]`);if(i?.length){let r=new Map;return i.forEach(s=>{s.textContent!=null&&r.set(s.textContent,s)}),r}return null}changeUsageCount(i,r){let s=this.styleRef;if(s.has(i)){let o=s.get(i);return o.usage+=r,o.usage}return s.set(i,{usage:r,elements:[]}),r}getStyleElement(i,r){let s=this.styleNodesInDOM,o=s?.get(r);if(o?.parentNode===i)return s.delete(r),o.removeAttribute(Wu),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=r,this.platformIsServer&&a.setAttribute(Wu,this.appId),i.appendChild(a),a}}addStyleToHost(i,r){let s=this.getStyleElement(i,r),o=this.styleRef,a=o.get(r)?.elements;a?a.push(s):o.set(r,{elements:[s],usage:1})}resetHostNodes(){let i=this.hostNodes;i.clear(),i.add(this.doc.head)}};e.\u0275fac=function(r){return new(r||e)(xe(kt),xe(ku),xe(Du,8),xe(xi))},e.\u0275prov=q({token:e,factory:e.\u0275fac});let n=e;return n})(),Hu={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Yu=/%COMP%/g,kg="%COMP%",cS=`_nghost-${kg}`,lS=`_ngcontent-${kg}`,uS=!0,dS=new de("",{providedIn:"root",factory:()=>uS});function hS(n){return lS.replace(Yu,n)}function fS(n){return cS.replace(Yu,n)}function Dg(n,e){return e.map(t=>t.replace(Yu,n))}var Ga=(()=>{let e=class e{constructor(i,r,s,o,a,c,l,u=null){this.eventManager=i,this.sharedStylesHost=r,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=c,this.ngZone=l,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=zu(c),this.defaultRenderer=new $s(i,a,l,this.platformIsServer)}createRenderer(i,r){if(!i||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Rs.ShadowDom&&(r=ce(R({},r),{encapsulation:Rs.Emulated}));let s=this.getOrCreateRenderer(i,r);return s instanceof qa?s.applyToHost(i):s instanceof Gs&&s.applyStyles(),s}getOrCreateRenderer(i,r){let s=this.rendererByCompId,o=s.get(r.id);if(!o){let a=this.doc,c=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(r.encapsulation){case Rs.Emulated:o=new qa(l,u,r,this.appId,d,a,c,h);break;case Rs.ShadowDom:return new qu(l,u,i,r,a,c,this.nonce,h);default:o=new Gs(l,u,r,d,a,c,h);break}s.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(r){return new(r||e)(xe(Pg),xe(Og),xe(ku),xe(dS),xe(kt),xe(xi),xe(Be),xe(Du))},e.\u0275prov=q({token:e,factory:e.\u0275fac});let n=e;return n})(),$s=class{constructor(e,t,i,r){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Hu[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Ag(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(Ag(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new be(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;let s=Hu[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){let r=Hu[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(Ls.DashCase|Ls.Important)?e.style.setProperty(t,i,r&Ls.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&Ls.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e!=null&&(e[t]=i)}setValue(e,t){e.nodeValue=t}listen(e,t,i){if(typeof e=="string"&&(e=vr().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(i))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function Ag(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var qu=class extends $s{constructor(e,t,i,r,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=Dg(r.id,r.styles);for(let u of l){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Gs=class extends $s{constructor(e,t,i,r,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r,this.styles=c?Dg(c,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},qa=class extends Gs{constructor(e,t,i,r,s,o,a,c){let l=r+"-"+i.id;super(e,t,i,s,o,a,c,l),this.contentAttr=hS(l),this.hostAttr=fS(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}},pS=(()=>{let e=class e extends Hs{constructor(i){super(i)}supports(i){return!0}addEventListener(i,r,s){return i.addEventListener(r,s,!1),()=>this.removeEventListener(i,r,s)}removeEventListener(i,r,s){return i.removeEventListener(r,s)}};e.\u0275fac=function(r){return new(r||e)(xe(kt))},e.\u0275prov=q({token:e,factory:e.\u0275fac});let n=e;return n})(),mS=(()=>{let e=class e extends Hs{constructor(i){super(i),this.delegate=I(xg,{optional:!0})}supports(i){return this.delegate?this.delegate.supports(i):!1}addEventListener(i,r,s){return this.delegate.addEventListener(i,r,s)}removeEventListener(i,r,s){return this.delegate.removeEventListener(i,r,s)}};e.\u0275fac=function(r){return new(r||e)(xe(kt))},e.\u0275prov=q({token:e,factory:e.\u0275fac});let n=e;return n})(),Mg=["alt","control","meta","shift"],gS={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},_S={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},vS=(()=>{let e=class e extends Hs{constructor(i){super(i)}supports(i){return e.parseEventName(i)!=null}addEventListener(i,r,s){let o=e.parseEventName(r),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>vr().onAndCancel(i,o.domEventName,a))}static parseEventName(i){let r=i.toLowerCase().split("."),s=r.shift();if(r.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(r.pop()),a="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),a="code."),Mg.forEach(u=>{let d=r.indexOf(u);d>-1&&(r.splice(d,1),a+=u+".")}),a+=o,r.length!=0||o.length===0)return null;let l={};return l.domEventName=s,l.fullKey=a,l}static matchEventFullKeyCode(i,r){let s=gS[i.key]||i.key,o="";return r.indexOf("code.")>-1&&(s=i.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),Mg.forEach(a=>{if(a!==s){let c=_S[a];c(i)&&(o+=a+".")}}),o+=s,o===r)}static eventCallback(i,r,s){return o=>{e.matchEventFullKeyCode(o,i)&&s.runGuarded(()=>r(o))}}static _normalizeKey(i){return i==="esc"?"escape":i}};e.\u0275fac=function(r){return new(r||e)(xe(kt))},e.\u0275prov=q({token:e,factory:e.\u0275fac});let n=e;return n})();function Rg(n,e){return bg(R({rootComponent:n},yS(e)))}function yS(n){return{appProviders:[...SS,...n?.providers??[]],platformProviders:wS}}function bS(){Gu.makeCurrent()}function xS(){return new Ou}function CS(){return ng(document),document}var wS=[{provide:xi,useValue:Eg},{provide:ig,useValue:bS,multi:!0},{provide:kt,useFactory:CS,deps:[]}];var SS=[{provide:Zm,useValue:"root"},{provide:Ou,useFactory:xS,deps:[]},{provide:$a,useClass:pS,multi:!0,deps:[kt,Be,xi]},{provide:$a,useClass:vS,multi:!0,deps:[kt]},{provide:$a,useClass:mS,multi:!0},Ga,Og,Pg,{provide:ja,useExisting:Ga},{provide:Ig,useClass:aS,deps:[]},[]];var Ng=(()=>{let e=class e{constructor(i){this._doc=i}getTitle(){return this._doc.title}setTitle(i){this._doc.title=i||""}};e.\u0275fac=function(r){return new(r||e)(xe(kt))},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var B="primary",co=Symbol("RouteTitle"),Zu=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Sr(n){return new Zu(n)}function IS(n,e,t){let i=t.path.split("/");if(i.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||i.length<n.length))return null;let r={};for(let s=0;s<i.length;s++){let o=i[s],a=n[s];if(o[0]===":")r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function TS(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ln(n[t],e[t]))return!1;return!0}function ln(n,e){let t=n?ed(n):void 0,i=e?ed(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!Wg(n[r],e[r]))return!1;return!0}function ed(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Wg(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),i=[...e].sort();return t.every((r,s)=>i[s]===r)}else return n===e}function Hg(n){return n.length>0?n[n.length-1]:null}function qn(n){return jm(n)?n:Wa(n)?je(Promise.resolve(n)):z(n)}var AS={exact:Gg,subset:qg},$g={exact:MS,subset:PS,ignored:()=>!0};function Lg(n,e,t){return AS[t.paths](n.root,e.root,t.matrixParams)&&$g[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function MS(n,e){return ln(n,e)}function Gg(n,e,t){if(!Si(n.segments,e.segments)||!Xa(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let i in e.children)if(!n.children[i]||!Gg(n.children[i],e.children[i],t))return!1;return!0}function PS(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Wg(n[t],e[t]))}function qg(n,e,t){return Yg(n,e,e.segments,t)}function Yg(n,e,t,i){if(n.segments.length>t.length){let r=n.segments.slice(0,t.length);return!(!Si(r,t)||e.hasChildren()||!Xa(r,t,i))}else if(n.segments.length===t.length){if(!Si(n.segments,t)||!Xa(n.segments,t,i))return!1;for(let r in e.children)if(!n.children[r]||!qg(n.children[r],e.children[r],i))return!1;return!0}else{let r=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!Si(n.segments,r)||!Xa(n.segments,r,i)||!n.children[B]?!1:Yg(n.children[B],e,s,i)}}function Xa(n,e,t){return e.every((i,r)=>$g[t](n[r].parameters,i.parameters))}var wn=class{constructor(e=new se([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap??=Sr(this.queryParams),this._queryParamMap}toString(){return DS.serialize(this)}},se=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Qa(this)}},wi=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Sr(this.parameters),this._parameterMap}toString(){return Xg(this)}};function OS(n,e){return Si(n,e)&&n.every((t,i)=>ln(t.parameters,e[i].parameters))}function Si(n,e){return n.length!==e.length?!1:n.every((t,i)=>t.path===e[i].path)}function kS(n,e){let t=[];return Object.entries(n.children).forEach(([i,r])=>{i===B&&(t=t.concat(e(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==B&&(t=t.concat(e(r,i)))}),t}var Id=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=q({token:e,factory:()=>new Zs,providedIn:"root"});let n=e;return n})(),Zs=class{parse(e){let t=new nd(e);return new wn(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${qs(e.root,!0)}`,i=LS(e.queryParams),r=typeof e.fragment=="string"?`#${RS(e.fragment)}`:"";return`${t}${i}${r}`}},DS=new Zs;function Qa(n){return n.segments.map(e=>Xg(e)).join("/")}function qs(n,e){if(!n.hasChildren())return Qa(n);if(e){let t=n.children[B]?qs(n.children[B],!1):"",i=[];return Object.entries(n.children).forEach(([r,s])=>{r!==B&&i.push(`${r}:${qs(s,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}else{let t=kS(n,(i,r)=>r===B?[qs(n.children[B],!1)]:[`${r}:${qs(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[B]!=null?`${Qa(n)}/${t[0]}`:`${Qa(n)}/(${t.join("//")})`}}function Kg(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ya(n){return Kg(n).replace(/%3B/gi,";")}function RS(n){return encodeURI(n)}function td(n){return Kg(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ja(n){return decodeURIComponent(n)}function Fg(n){return Ja(n.replace(/\+/g,"%20"))}function Xg(n){return`${td(n.path)}${NS(n.parameters)}`}function NS(n){return Object.entries(n).map(([e,t])=>`;${td(e)}=${td(t)}`).join("")}function LS(n){let e=Object.entries(n).map(([t,i])=>Array.isArray(i)?i.map(r=>`${Ya(t)}=${Ya(r)}`).join("&"):`${Ya(t)}=${Ya(i)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var FS=/^[^\/()?;#]+/;function Ku(n){let e=n.match(FS);return e?e[0]:""}var VS=/^[^\/()?;=#]+/;function US(n){let e=n.match(VS);return e?e[0]:""}var zS=/^[^=?&#]+/;function jS(n){let e=n.match(zS);return e?e[0]:""}var BS=/^[^&#]+/;function WS(n){let e=n.match(BS);return e?e[0]:""}var nd=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new se([],{}):new se([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[B]=new se(e,t)),i}parseSegment(){let e=Ku(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new be(4009,!1);return this.capture(e),new wi(Ja(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=US(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let r=Ku(this.remaining);r&&(i=r,this.capture(i))}e[Ja(t)]=Ja(i)}parseQueryParam(e){let t=jS(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let o=WS(this.remaining);o&&(i=o,this.capture(i))}let r=Fg(t),s=Fg(i);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=Ku(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new be(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=B);let o=this.parseChildren();t[s]=Object.keys(o).length===1?o[B]:new se([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new be(4011,!1)}};function Qg(n){return n.segments.length>0?new se([],{[B]:n}):n}function Jg(n){let e={};for(let[i,r]of Object.entries(n.children)){let s=Jg(r);if(i===B&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[i]=s)}let t=new se(n.segments,e);return HS(t)}function HS(n){if(n.numberOfChildren===1&&n.children[B]){let e=n.children[B];return new se(n.segments.concat(e.segments),e.children)}return n}function Ei(n){return n instanceof wn}function $S(n,e,t=null,i=null){let r=Zg(n);return e_(r,e,t,i)}function Zg(n){let e;function t(s){let o={};for(let c of s.children){let l=t(c);o[c.outlet]=l}let a=new se(s.url,o);return s===n&&(e=a),a}let i=t(n.root),r=Qg(i);return e??r}function e_(n,e,t,i){let r=n;for(;r.parent;)r=r.parent;if(e.length===0)return Xu(r,r,r,t,i);let s=GS(e);if(s.toRoot())return Xu(r,r,new se([],{}),t,i);let o=qS(s,r,n),a=o.processChildren?Xs(o.segmentGroup,o.index,s.commands):n_(o.segmentGroup,o.index,s.commands);return Xu(r,o.segmentGroup,a,t,i)}function Za(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function eo(n){return typeof n=="object"&&n!=null&&n.outlets}function Xu(n,e,t,i,r){let s={};i&&Object.entries(i).forEach(([c,l])=>{s[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let o;n===e?o=t:o=t_(n,e,t);let a=Qg(Jg(o));return new wn(a,s,r)}function t_(n,e,t){let i={};return Object.entries(n.children).forEach(([r,s])=>{s===e?i[r]=t:i[r]=t_(s,e,t)}),new se(n.segments,i)}var ec=class{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&Za(i[0]))throw new be(4003,!1);let r=i.find(eo);if(r&&r!==Hg(i))throw new be(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function GS(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new ec(!0,0,n);let e=0,t=!1,i=n.reduce((r,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return typeof s!="string"?[...r,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&r.push(a))}),r):[...r,s]},[]);return new ec(t,e,i)}var xr=class{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}};function qS(n,e,t){if(n.isAbsolute)return new xr(e,!0,0);if(!t)return new xr(e,!1,NaN);if(t.parent===null)return new xr(t,!0,0);let i=Za(n.commands[0])?0:1,r=t.segments.length-1+i;return YS(t,r,n.numberOfDoubleDots)}function YS(n,e,t){let i=n,r=e,s=t;for(;s>r;){if(s-=r,i=i.parent,!i)throw new be(4005,!1);r=i.segments.length}return new xr(i,!1,r-s)}function KS(n){return eo(n[0])?n[0].outlets:{[B]:n}}function n_(n,e,t){if(n??=new se([],{}),n.segments.length===0&&n.hasChildren())return Xs(n,e,t);let i=XS(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let s=new se(n.segments.slice(0,i.pathIndex),{});return s.children[B]=new se(n.segments.slice(i.pathIndex),n.children),Xs(s,0,r)}else return i.match&&r.length===0?new se(n.segments,{}):i.match&&!n.hasChildren()?id(n,e,t):i.match?Xs(n,0,r):id(n,e,t)}function Xs(n,e,t){if(t.length===0)return new se(n.segments,{});{let i=KS(t),r={};if(Object.keys(i).some(s=>s!==B)&&n.children[B]&&n.numberOfChildren===1&&n.children[B].segments.length===0){let s=Xs(n.children[B],e,t);return new se(n.segments,s.children)}return Object.entries(i).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(r[s]=n_(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{i[s]===void 0&&(r[s]=o)}),new se(n.segments,r)}}function XS(n,e,t){let i=0,r=e,s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return s;let o=n.segments[r],a=t[i];if(eo(a))break;let c=`${a}`,l=i<t.length-1?t[i+1]:null;if(r>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!Ug(c,l,o))return s;i+=2}else{if(!Ug(c,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function id(n,e,t){let i=n.segments.slice(0,e),r=0;for(;r<t.length;){let s=t[r];if(eo(s)){let c=QS(s.outlets);return new se(i,c)}if(r===0&&Za(t[0])){let c=n.segments[e];i.push(new wi(c.path,Vg(t[0]))),r++;continue}let o=eo(s)?s.outlets[B]:`${s}`,a=r<t.length-1?t[r+1]:null;o&&a&&Za(a)?(i.push(new wi(o,Vg(a))),r+=2):(i.push(new wi(o,{})),r++)}return new se(i,{})}function QS(n){let e={};return Object.entries(n).forEach(([t,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(e[t]=id(new se([],{}),0,i))}),e}function Vg(n){let e={};return Object.entries(n).forEach(([t,i])=>e[t]=`${i}`),e}function Ug(n,e,t){return n==t.path&&ln(e,t.parameters)}var Qs="imperative",Ye=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Ye||{}),jt=class{constructor(e,t){this.id=e,this.url=t}},to=class extends jt{constructor(e,t,i="imperative",r=null){super(e,t),this.type=Ye.NavigationStart,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Qt=class extends jt{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i,this.type=Ye.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Rt=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Rt||{}),rd=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(rd||{}),Cn=class extends jt{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=Ye.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Ii=class extends jt{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=Ye.NavigationSkipped}},no=class extends jt{constructor(e,t,i,r){super(e,t),this.error=i,this.target=r,this.type=Ye.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},tc=class extends jt{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=Ye.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},sd=class extends jt{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=Ye.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},od=class extends jt{constructor(e,t,i,r,s){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=Ye.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},ad=class extends jt{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=Ye.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},cd=class extends jt{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=Ye.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ld=class{constructor(e){this.route=e,this.type=Ye.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},ud=class{constructor(e){this.route=e,this.type=Ye.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},dd=class{constructor(e){this.snapshot=e,this.type=Ye.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},hd=class{constructor(e){this.snapshot=e,this.type=Ye.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},fd=class{constructor(e){this.snapshot=e,this.type=Ye.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},pd=class{constructor(e){this.snapshot=e,this.type=Ye.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var io=class{},Er=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function JS(n,e){return n.providers&&!n._injector&&(n._injector=hg(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Xt(n){return n.outlet||B}function ZS(n,e){let t=n.filter(i=>Xt(i)===e);return t.push(...n.filter(i=>Xt(i)!==e)),t}function lo(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var md=class{get injector(){return lo(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new cc(this.rootInjector),this.attachRef=null}},cc=(()=>{let e=class e{constructor(i){this.rootInjector=i,this.contexts=new Map}onChildOutletCreated(i,r){let s=this.getOrCreateContext(i);s.outlet=r,this.contexts.set(i,s)}onChildOutletDestroyed(i){let r=this.getContext(i);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let i=this.contexts;return this.contexts=new Map,i}onOutletReAttached(i){this.contexts=i}getOrCreateContext(i){let r=this.getContext(i);return r||(r=new md(this.rootInjector),this.contexts.set(i,r)),r}getContext(i){return this.contexts.get(i)||null}};e.\u0275fac=function(r){return new(r||e)(xe(za))},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),nc=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=gd(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){let t=gd(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=_d(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return _d(e,this._root).map(t=>t.value)}};function gd(n,e){if(n===e.value)return e;for(let t of e.children){let i=gd(n,t);if(i)return i}return null}function _d(n,e){if(n===e.value)return[e];for(let t of e.children){let i=_d(n,t);if(i.length)return i.unshift(e),i}return[]}var Dt=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function br(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var ic=class extends nc{constructor(e,t){super(e),this.snapshot=t,Td(this,e)}toString(){return this.snapshot.toString()}};function i_(n){let e=eE(n),t=new ze([new wi("",{})]),i=new ze({}),r=new ze({}),s=new ze({}),o=new ze(""),a=new Sn(t,i,s,o,r,B,n,e.root);return a.snapshot=e.root,new ic(new Dt(a,[]),e)}function eE(n){let e={},t={},i={},r="",s=new Cr([],e,i,r,t,B,n,null,{});return new sc("",new Dt(s,[]))}var Sn=class{constructor(e,t,i,r,s,o,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(j(l=>l[co]))??z(void 0),this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(j(e=>Sr(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(j(e=>Sr(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function rc(n,e,t="emptyOnly"){let i,{routeConfig:r}=n;return e!==null&&(t==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?i={params:R(R({},e.params),n.params),data:R(R({},e.data),n.data),resolve:R(R(R(R({},n.data),e.data),r?.data),n._resolvedData)}:i={params:R({},n.params),data:R({},n.data),resolve:R(R({},n.data),n._resolvedData??{})},r&&s_(r)&&(i.resolve[co]=r.title),i}var Cr=class{get title(){return this.data?.[co]}constructor(e,t,i,r,s,o,a,c,l){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Sr(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Sr(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(i=>i.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},sc=class extends nc{constructor(e,t){super(t),this.url=e,Td(this,t)}toString(){return r_(this._root)}};function Td(n,e){e.value._routerState=n,e.children.forEach(t=>Td(n,t))}function r_(n){let e=n.children.length>0?` { ${n.children.map(r_).join(", ")} } `:"";return`${n.value}${e}`}function Qu(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ln(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),ln(e.params,t.params)||n.paramsSubject.next(t.params),TS(e.url,t.url)||n.urlSubject.next(t.url),ln(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function vd(n,e){let t=ln(n.params,e.params)&&OS(n.url,e.url),i=!n.parent!=!e.parent;return t&&!i&&(!n.parent||vd(n.parent,e.parent))}function s_(n){return typeof n.title=="string"||n.title===null}var Ad=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=B,this.activateEvents=new _t,this.deactivateEvents=new _t,this.attachEvents=new _t,this.detachEvents=new _t,this.parentContexts=I(cc),this.location=I(lg),this.changeDetector=I(_r),this.inputBinder=I(Md,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(i){if(i.name){let{firstChange:r,previousValue:s}=i.name;if(r)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(i){return this.parentContexts.getContext(i)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let i=this.parentContexts.getContext(this.name);i?.route&&(i.attachRef?this.attach(i.attachRef,i.route):this.activateWith(i.route,i.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new be(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new be(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new be(4012,!1);this.location.detach();let i=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(i.instance),i}attach(i,r){this.activated=i,this._activatedRoute=r,this.location.insert(i.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(i.instance)}deactivate(){if(this.activated){let i=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(i)}}activateWith(i,r){if(this.isActivated)throw new be(4013,!1);this._activatedRoute=i;let s=this.location,a=i.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new yd(i,c,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:l,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=fe({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[bn]});let n=e;return n})(),yd=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===Sn?this.route:e===cc?this.childContexts:this.parent.get(e,t)}},Md=new de("");function tE(n,e,t){let i=ro(n,e._root,t?t._root:void 0);return new ic(i,e)}function ro(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let i=t.value;i._futureSnapshot=e.value;let r=nE(n,e,t);return new Dt(i,r)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>ro(n,a)),o}}let i=iE(e.value),r=e.children.map(s=>ro(n,s));return new Dt(i,r)}}function nE(n,e,t){return e.children.map(i=>{for(let r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return ro(n,i,r);return ro(n,i)})}function iE(n){return new Sn(new ze(n.url),new ze(n.params),new ze(n.queryParams),new ze(n.fragment),new ze(n.data),n.outlet,n.component,n)}var so=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},o_="ngNavigationCancelingError";function oc(n,e){let{redirectTo:t,navigationBehaviorOptions:i}=Ei(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=a_(!1,Rt.Redirect);return r.url=t,r.navigationBehaviorOptions=i,r}function a_(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[o_]=!0,t.cancellationCode=e,t}function rE(n){return c_(n)&&Ei(n.url)}function c_(n){return!!n&&n[o_]}var sE=(n,e,t,i)=>j(r=>(new bd(e,r.targetRouterState,r.currentRouterState,t,i).activate(n),r)),bd=class{constructor(e,t,i,r,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),Qu(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){let r=br(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,t,i){let r=e.value,s=t?t.value:null;if(r===s)if(r.component){let o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,i);else s&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=br(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);if(i&&i.outlet){let o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=br(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,t,i){let r=br(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new pd(s.value.snapshot))}),e.children.length&&this.forwardEvent(new hd(e.value.snapshot))}activateRoutes(e,t,i){let r=e.value,s=t?t.value:null;if(Qu(r),r===s)if(r.component){let o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,i);else if(r.component){let o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Qu(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=r,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,i)}},ac=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},wr=class{constructor(e,t){this.component=e,this.route=t}};function oE(n,e,t){let i=n._root,r=e?e._root:null;return Ys(i,r,t,[i.value])}function aE(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Ar(n,e){let t=Symbol(),i=e.get(n,t);return i===t?typeof n=="function"&&!Qm(n)?n:e.get(n):i}function Ys(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=br(e);return n.children.forEach(o=>{cE(o,s[o.value.outlet],t,i.concat([o.value]),r),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Js(a,t.getContext(o),r)),r}function cE(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=lE(o,s,s.routeConfig.runGuardsAndResolvers);c?r.canActivateChecks.push(new ac(i)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Ys(n,e,a?a.children:null,i,r):Ys(n,e,t,i,r),c&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new wr(a.outlet.component,o))}else o&&Js(e,a,r),r.canActivateChecks.push(new ac(i)),s.component?Ys(n,null,a?a.children:null,i,r):Ys(n,null,t,i,r);return r}function lE(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Si(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Si(n.url,e.url)||!ln(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!vd(n,e)||!ln(n.queryParams,e.queryParams);case"paramsChange":default:return!vd(n,e)}}function Js(n,e,t){let i=br(n),r=n.value;Object.entries(i).forEach(([s,o])=>{r.component?e?Js(o,e.children.getContext(s),t):Js(o,null,t):Js(o,e,t)}),r.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new wr(e.outlet.component,r)):t.canDeactivateChecks.push(new wr(null,r)):t.canDeactivateChecks.push(new wr(null,r))}function uo(n){return typeof n=="function"}function uE(n){return typeof n=="boolean"}function dE(n){return n&&uo(n.canLoad)}function hE(n){return n&&uo(n.canActivate)}function fE(n){return n&&uo(n.canActivateChild)}function pE(n){return n&&uo(n.canDeactivate)}function mE(n){return n&&uo(n.canMatch)}function l_(n){return n instanceof Bm||n?.name==="EmptyError"}var Ka=Symbol("INITIAL_VALUE");function Ir(){return an(n=>Eu(n.map(e=>e.pipe(fr(1),Km(Ka)))).pipe(j(e=>{for(let t of e)if(t!==!0){if(t===Ka)return Ka;if(t===!1||gE(t))return t}return!0}),jn(e=>e!==Ka),fr(1)))}function gE(n){return Ei(n)||n instanceof so}function _E(n,e){return Ut(t=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?z(ce(R({},t),{guardsResult:!0})):vE(o,i,r,n).pipe(Ut(a=>a&&uE(a)?yE(i,s,n,e):z(a)),j(a=>ce(R({},t),{guardsResult:a})))})}function vE(n,e,t,i){return je(n).pipe(Ut(r=>SE(r.component,r.route,t,e,i)),Bn(r=>r!==!0,!0))}function yE(n,e,t,i){return je(e).pipe(ks(r=>Wm(xE(r.route.parent,i),bE(r.route,i),wE(n,r.path,t),CE(n,r.route,t))),Bn(r=>r!==!0,!0))}function bE(n,e){return n!==null&&e&&e(new fd(n)),z(!0)}function xE(n,e){return n!==null&&e&&e(new dd(n)),z(!0)}function CE(n,e,t){let i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||i.length===0)return z(!0);let r=i.map(s=>Tu(()=>{let o=lo(e)??t,a=Ar(s,o),c=hE(a)?a.canActivate(e,n):yn(o,()=>a(e,n));return qn(c).pipe(Bn())}));return z(r).pipe(Ir())}function wE(n,e,t){let i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>aE(o)).filter(o=>o!==null).map(o=>Tu(()=>{let a=o.guards.map(c=>{let l=lo(o.node)??t,u=Ar(c,l),d=fE(u)?u.canActivateChild(i,n):yn(l,()=>u(i,n));return qn(d).pipe(Bn())});return z(a).pipe(Ir())}));return z(s).pipe(Ir())}function SE(n,e,t,i,r){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return z(!0);let o=s.map(a=>{let c=lo(e)??r,l=Ar(a,c),u=pE(l)?l.canDeactivate(n,e,t,i):yn(c,()=>l(n,e,t,i));return qn(u).pipe(Bn())});return z(o).pipe(Ir())}function EE(n,e,t,i){let r=e.canLoad;if(r===void 0||r.length===0)return z(!0);let s=r.map(o=>{let a=Ar(o,n),c=dE(a)?a.canLoad(e,t):yn(n,()=>a(e,t));return qn(c)});return z(s).pipe(Ir(),u_(i))}function u_(n){return Vm(ye(e=>{if(typeof e!="boolean")throw oc(n,e)}),j(e=>e===!0))}function IE(n,e,t,i){let r=e.canMatch;if(!r||r.length===0)return z(!0);let s=r.map(o=>{let a=Ar(o,n),c=mE(a)?a.canMatch(e,t):yn(n,()=>a(e,t));return qn(c)});return z(s).pipe(Ir(),u_(i))}var oo=class{constructor(e){this.segmentGroup=e||null}},ao=class extends Error{constructor(e){super(),this.urlTree=e}};function yr(n){return Os(new oo(n))}function TE(n){return Os(new be(4e3,!1))}function AE(n){return Os(a_(!1,Rt.GuardRejected))}var xd=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return z(i);if(r.numberOfChildren>1||!r.children[B])return TE(`${e.redirectTo}`);r=r.children[B]}}applyRedirectCommands(e,t,i,r,s){if(typeof t!="string"){let a=t,{queryParams:c,fragment:l,routeConfig:u,url:d,outlet:h,params:f,data:p,title:_}=r,v=yn(s,()=>a({params:f,data:p,queryParams:c,fragment:l,routeConfig:u,url:d,outlet:h,title:_}));if(v instanceof wn)throw new ao(v);t=v}let o=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i);if(t[0]==="/")throw new ao(o);return o}applyRedirectCreateUrlTree(e,t,i,r){let s=this.createSegmentGroup(e,t.root,i,r);return new wn(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let i={};return Object.entries(e).forEach(([r,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);i[r]=t[a]}else i[r]=s}),i}createSegmentGroup(e,t,i,r){let s=this.createSegments(e,t.segments,i,r),o={};return Object.entries(t.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,i,r)}),new se(s,o)}createSegments(e,t,i,r){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,t,i){let r=i[t.path.substring(1)];if(!r)throw new be(4001,!1);return r}findOrReturn(e,t){let i=0;for(let r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}},Cd={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ME(n,e,t,i,r){let s=Pd(n,e,t);return s.matched?(i=JS(e,i),IE(i,e,t,r).pipe(j(o=>o===!0?s:R({},Cd)))):z(s)}function Pd(n,e,t){if(e.path==="**")return PE(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?R({},Cd):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let r=(e.matcher||IS)(t,n,e);if(!r)return R({},Cd);let s={};Object.entries(r.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=r.consumed.length>0?R(R({},s),r.consumed[r.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function PE(n){return{matched:!0,parameters:n.length>0?Hg(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function zg(n,e,t,i){return t.length>0&&DE(n,t,i)?{segmentGroup:new se(e,kE(i,new se(t,n.children))),slicedSegments:[]}:t.length===0&&RE(n,t,i)?{segmentGroup:new se(n.segments,OE(n,t,i,n.children)),slicedSegments:t}:{segmentGroup:new se(n.segments,n.children),slicedSegments:t}}function OE(n,e,t,i){let r={};for(let s of t)if(lc(n,e,s)&&!i[Xt(s)]){let o=new se([],{});r[Xt(s)]=o}return R(R({},i),r)}function kE(n,e){let t={};t[B]=e;for(let i of n)if(i.path===""&&Xt(i)!==B){let r=new se([],{});t[Xt(i)]=r}return t}function DE(n,e,t){return t.some(i=>lc(n,e,i)&&Xt(i)!==B)}function RE(n,e,t){return t.some(i=>lc(n,e,i))}function lc(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function NE(n,e,t,i){return Xt(n)!==i&&(i===B||!lc(e,t,n))?!1:Pd(e,n,t).matched}function LE(n,e,t){return e.length===0&&!n.children[t]}var wd=class{};function FE(n,e,t,i,r,s,o="emptyOnly"){return new Sd(n,e,t,i,r,o,s).recognize()}var VE=31,Sd=class{constructor(e,t,i,r,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=i,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new xd(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new be(4002,`'${e.segmentGroup}'`)}recognize(){let e=zg(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(j(({children:t,rootSnapshot:i})=>{let r=new Dt(i,t),s=new sc("",r),o=$S(i,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let t=new Cr([],Object.freeze({}),Object.freeze(R({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),B,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,B,t).pipe(j(i=>({children:i,rootSnapshot:t})),hr(i=>{if(i instanceof ao)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof oo?this.noMatchError(i):i}))}processSegmentGroup(e,t,i,r,s){return i.segments.length===0&&i.hasChildren()?this.processChildren(e,t,i,s):this.processSegment(e,t,i,i.segments,r,!0,s).pipe(j(o=>o instanceof Dt?[o]:[]))}processChildren(e,t,i,r){let s=[];for(let o of Object.keys(i.children))o==="primary"?s.unshift(o):s.push(o);return je(s).pipe(ks(o=>{let a=i.children[o],c=ZS(t,o);return this.processSegmentGroup(e,c,a,o,r)}),Ym((o,a)=>(o.push(...a),o)),Au(null),qm(),Ut(o=>{if(o===null)return yr(i);let a=d_(o);return UE(a),z(a)}))}processSegment(e,t,i,r,s,o,a){return je(t).pipe(ks(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,i,r,s,o,a).pipe(hr(l=>{if(l instanceof oo)return z(null);throw l}))),Bn(c=>!!c),hr(c=>{if(l_(c))return LE(i,r,s)?z(new wd):yr(i);throw c}))}processSegmentAgainstRoute(e,t,i,r,s,o,a,c){return NE(i,r,s,o)?i.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,i,s,o,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,r,t,i,s,o,c):yr(r):yr(r)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o,a){let{matched:c,parameters:l,consumedSegments:u,positionalParamSegments:d,remainingSegments:h}=Pd(t,r,s);if(!c)return yr(t);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>VE&&(this.allowRedirects=!1));let f=new Cr(s,l,Object.freeze(R({},this.urlTree.queryParams)),this.urlTree.fragment,jg(r),Xt(r),r.component??r._loadedComponent??null,r,Bg(r)),p=rc(f,a,this.paramsInheritanceStrategy);f.params=Object.freeze(p.params),f.data=Object.freeze(p.data);let _=this.applyRedirects.applyRedirectCommands(u,r.redirectTo,d,f,e);return this.applyRedirects.lineralizeSegments(r,_).pipe(Ut(v=>this.processSegment(e,i,t,v.concat(h),o,!1,a)))}matchSegmentAgainstRoute(e,t,i,r,s,o){let a=ME(t,i,r,e,this.urlSerializer);return i.path==="**"&&(t.children={}),a.pipe(an(c=>c.matched?(e=i._injector??e,this.getChildConfig(e,i,r).pipe(an(({routes:l})=>{let u=i._loadedInjector??e,{parameters:d,consumedSegments:h,remainingSegments:f}=c,p=new Cr(h,d,Object.freeze(R({},this.urlTree.queryParams)),this.urlTree.fragment,jg(i),Xt(i),i.component??i._loadedComponent??null,i,Bg(i)),_=rc(p,o,this.paramsInheritanceStrategy);p.params=Object.freeze(_.params),p.data=Object.freeze(_.data);let{segmentGroup:v,slicedSegments:x}=zg(t,h,f,l);if(x.length===0&&v.hasChildren())return this.processChildren(u,l,v,p).pipe(j(T=>new Dt(p,T)));if(l.length===0&&x.length===0)return z(new Dt(p,[]));let w=Xt(i)===s;return this.processSegment(u,l,v,x,w?B:s,!0,p).pipe(j(T=>new Dt(p,T instanceof Dt?[T]:[])))}))):yr(t)))}getChildConfig(e,t,i){return t.children?z({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?z({routes:t._loadedRoutes,injector:t._loadedInjector}):EE(e,t,i,this.urlSerializer).pipe(Ut(r=>r?this.configLoader.loadChildren(e,t).pipe(ye(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):AE(t))):z({routes:[],injector:e})}};function UE(n){n.sort((e,t)=>e.value.outlet===B?-1:t.value.outlet===B?1:e.value.outlet.localeCompare(t.value.outlet))}function zE(n){let e=n.value.routeConfig;return e&&e.path===""}function d_(n){let e=[],t=new Set;for(let i of n){if(!zE(i)){e.push(i);continue}let r=e.find(s=>i.value.routeConfig===s.value.routeConfig);r!==void 0?(r.children.push(...i.children),t.add(r)):e.push(i)}for(let i of t){let r=d_(i.children);e.push(new Dt(i.value,r))}return e.filter(i=>!t.has(i))}function jg(n){return n.data||{}}function Bg(n){return n.resolve||{}}function jE(n,e,t,i,r,s){return Ut(o=>FE(n,e,t,i,o.extractedUrl,r,s).pipe(j(({state:a,tree:c})=>ce(R({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function BE(n,e){return Ut(t=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return z(t);let s=new Set(r.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let l of h_(c))o.add(l);let a=0;return je(o).pipe(ks(c=>s.has(c)?WE(c,i,n,e):(c.data=rc(c,c.parent,n).resolve,z(void 0))),ye(()=>a++),Mu(1),Ut(c=>a===o.size?z(t):zn))})}function h_(n){let e=n.children.map(t=>h_(t)).flat();return[n,...e]}function WE(n,e,t,i){let r=n.routeConfig,s=n._resolve;return r?.title!==void 0&&!s_(r)&&(s[co]=r.title),HE(s,n,e,i).pipe(j(o=>(n._resolvedData=o,n.data=rc(n,n.parent,t).resolve,null)))}function HE(n,e,t,i){let r=ed(n);if(r.length===0)return z({});let s={};return je(r).pipe(Ut(o=>$E(n[o],e,t,i).pipe(Bn(),ye(a=>{if(a instanceof so)throw oc(new Zs,a);s[o]=a}))),Mu(1),$m(s),hr(o=>l_(o)?zn:Os(o)))}function $E(n,e,t,i){let r=lo(e)??i,s=Ar(n,r),o=s.resolve?s.resolve(e,t):yn(r,()=>s(e,t));return qn(o)}function Ju(n){return an(e=>{let t=n(e);return t?je(t).pipe(j(()=>e)):z(e)})}var f_=(()=>{let e=class e{buildTitle(i){let r,s=i.root;for(;s!==void 0;)r=this.getResolvedTitleForRoute(s)??r,s=s.children.find(o=>o.outlet===B);return r}getResolvedTitleForRoute(i){return i.data[co]}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=q({token:e,factory:()=>I(GE),providedIn:"root"});let n=e;return n})(),GE=(()=>{let e=class e extends f_{constructor(i){super(),this.title=i}updateTitle(i){let r=this.buildTitle(i);r!==void 0&&this.title.setTitle(r)}};e.\u0275fac=function(r){return new(r||e)(xe(Ng))},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Od=new de("",{providedIn:"root",factory:()=>({})}),qE=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Ce({type:e,selectors:[["ng-component"]],standalone:!0,features:[we],decls:1,vars:0,template:function(r,s){r&1&&N(0,"router-outlet")},dependencies:[Ad],encapsulation:2});let n=e;return n})();function kd(n){let e=n.children&&n.children.map(kd),t=e?ce(R({},n),{children:e}):R({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==B&&(t.component=qE),t}var Dd=new de(""),YE=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=I(Vu)}loadComponent(i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return z(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let r=qn(i.loadComponent()).pipe(j(p_),ye(o=>{this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=o}),Ua(()=>{this.componentLoaders.delete(i)})),s=new xu(r,()=>new on).pipe(bu());return this.componentLoaders.set(i,s),s}loadChildren(i,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return z({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=KE(r,this.compiler,i,this.onLoadEndListener).pipe(Ua(()=>{this.childrenLoaders.delete(r)})),a=new xu(o,()=>new on).pipe(bu());return this.childrenLoaders.set(r,a),a}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function KE(n,e,t,i){return qn(n.loadChildren()).pipe(j(p_),Ut(r=>r instanceof dg||Array.isArray(r)?z(r):je(e.compileModuleAsync(r))),j(r=>{i&&i(n);let s,o,a=!1;return Array.isArray(r)?(o=r,a=!0):(s=r.create(t).injector,o=s.get(Dd,[],{optional:!0,self:!0}).flat()),{routes:o.map(kd),injector:s}}))}function XE(n){return n&&typeof n=="object"&&"default"in n}function p_(n){return XE(n)?n.default:n}var Rd=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=q({token:e,factory:()=>I(QE),providedIn:"root"});let n=e;return n})(),QE=(()=>{let e=class e{shouldProcessUrl(i){return!0}extract(i){return i}merge(i,r){return i}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),JE=new de("");var ZE=new de(""),eI=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new on,this.transitionAbortSubject=new on,this.configLoader=I(YE),this.environmentInjector=I(za),this.urlSerializer=I(Id),this.rootContexts=I(cc),this.location=I(Ha),this.inputBindingEnabled=I(Md,{optional:!0})!==null,this.titleStrategy=I(f_),this.options=I(Od,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=I(Rd),this.createViewTransition=I(JE,{optional:!0}),this.navigationErrorHandler=I(ZE,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>z(void 0),this.rootComponentType=null;let i=s=>this.events.next(new ld(s)),r=s=>this.events.next(new ud(s));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=i}complete(){this.transitions?.complete()}handleNavigationRequest(i){let r=++this.navigationId;this.transitions?.next(ce(R(R({},this.transitions.value),i),{id:r}))}setupNavigations(i,r,s){return this.transitions=new ze({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Qs,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(jn(o=>o.id!==0),j(o=>ce(R({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),an(o=>{let a=!1,c=!1;return z(o).pipe(an(l=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Rt.SupersededByNewNavigation),zn;this.currentTransition=o,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,targetBrowserUrl:typeof l.extras.browserUrl=="string"?this.urlSerializer.parse(l.extras.browserUrl):l.extras.browserUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?ce(R({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let u=!i.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=l.extras.onSameUrlNavigation??i.onSameUrlNavigation;if(!u&&d!=="reload"){let h="";return this.events.next(new Ii(l.id,this.urlSerializer.serialize(l.rawUrl),h,rd.IgnoredSameUrlNavigation)),l.resolve(!1),zn}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return z(l).pipe(an(h=>{let f=this.transitions?.getValue();return this.events.next(new to(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),f!==this.transitions?.getValue()?zn:Promise.resolve(h)}),jE(this.environmentInjector,this.configLoader,this.rootComponentType,i.config,this.urlSerializer,this.paramsInheritanceStrategy),ye(h=>{o.targetSnapshot=h.targetSnapshot,o.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=ce(R({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let f=new tc(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:h,extractedUrl:f,source:p,restoredState:_,extras:v}=l,x=new to(h,this.urlSerializer.serialize(f),p,_);this.events.next(x);let w=i_(this.rootComponentType).snapshot;return this.currentTransition=o=ce(R({},l),{targetSnapshot:w,urlAfterRedirects:f,extras:ce(R({},v),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,z(o)}else{let h="";return this.events.next(new Ii(l.id,this.urlSerializer.serialize(l.extractedUrl),h,rd.IgnoredByUrlHandlingStrategy)),l.resolve(!1),zn}}),ye(l=>{let u=new sd(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),j(l=>(this.currentTransition=o=ce(R({},l),{guards:oE(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),o)),_E(this.environmentInjector,l=>this.events.next(l)),ye(l=>{if(o.guardsResult=l.guardsResult,l.guardsResult&&typeof l.guardsResult!="boolean")throw oc(this.urlSerializer,l.guardsResult);let u=new od(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(u)}),jn(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",Rt.GuardRejected),!1)),Ju(l=>{if(l.guards.canActivateChecks.length)return z(l).pipe(ye(u=>{let d=new ad(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),an(u=>{let d=!1;return z(u).pipe(BE(this.paramsInheritanceStrategy,this.environmentInjector),ye({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(u,"",Rt.NoDataFromResolver)}}))}),ye(u=>{let d=new cd(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}))}),Ju(l=>{let u=d=>{let h=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(d.routeConfig).pipe(ye(f=>{d.component=f}),j(()=>{})));for(let f of d.children)h.push(...u(f));return h};return Eu(u(l.targetSnapshot.root)).pipe(Au(null),fr(1))}),Ju(()=>this.afterPreactivation()),an(()=>{let{currentSnapshot:l,targetSnapshot:u}=o,d=this.createViewTransition?.(this.environmentInjector,l.root,u.root);return d?je(d).pipe(j(()=>o)):z(o)}),j(l=>{let u=tE(i.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o=ce(R({},l),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,o}),ye(()=>{this.events.next(new io)}),sE(this.rootContexts,i.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),fr(1),ye({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Qt(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),Xm(this.transitionAbortSubject.pipe(ye(l=>{throw l}))),Ua(()=>{!a&&!c&&this.cancelNavigationTransition(o,"",Rt.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),hr(l=>{if(c=!0,c_(l))this.events.next(new Cn(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),rE(l)?this.events.next(new Er(l.url,l.navigationBehaviorOptions)):o.resolve(!1);else{let u=new no(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0);try{let d=yn(this.environmentInjector,()=>this.navigationErrorHandler?.(u));if(d instanceof so){let{message:h,cancellationCode:f}=oc(this.urlSerializer,d);this.events.next(new Cn(o.id,this.urlSerializer.serialize(o.extractedUrl),h,f)),this.events.next(new Er(d.redirectTo,d.navigationBehaviorOptions))}else{this.events.next(u);let h=i.errorHandler(l);o.resolve(!!h)}}catch(d){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(d)}}return zn}))}))}cancelNavigationTransition(i,r,s){let o=new Cn(i.id,this.urlSerializer.serialize(i.extractedUrl),r,s);this.events.next(o),i.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let i=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return i.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function tI(n){return n!==Qs}var nI=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=q({token:e,factory:()=>I(iI),providedIn:"root"});let n=e;return n})(),Ed=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},iI=(()=>{let e=class e extends Ed{};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=Ot(e)))(s||e)}})(),e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),m_=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=q({token:e,factory:()=>I(rI),providedIn:"root"});let n=e;return n})(),rI=(()=>{let e=class e extends m_{constructor(){super(...arguments),this.location=I(Ha),this.urlSerializer=I(Id),this.options=I(Od,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=I(Rd),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new wn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=i_(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(i){return this.location.subscribe(r=>{r.type==="popstate"&&i(r.url,r.state)})}handleRouterEvent(i,r){if(i instanceof to)this.stateMemento=this.createStateMemento();else if(i instanceof Ii)this.rawUrlTree=r.initialUrl;else if(i instanceof tc){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??s,r)}}else i instanceof io?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):i instanceof Cn&&(i.code===Rt.GuardRejected||i.code===Rt.NoDataFromResolver)?this.restoreHistory(r):i instanceof no?this.restoreHistory(r,!0):i instanceof Qt&&(this.lastSuccessfulId=i.id,this.currentPageId=this.browserPageId)}setBrowserUrl(i,r){let s=i instanceof wn?this.urlSerializer.serialize(i):i;if(this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl){let o=this.browserPageId,a=R(R({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(s,"",a)}else{let o=R(R({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(i,r=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===i.finalUrl&&o===0&&(this.resetState(i),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(i),this.resetUrlToCurrentUrlTree())}resetState(i){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,i.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(i,r){return this.canceledNavigationResolution==="computed"?{navigationId:i,\u0275routerPageId:r}:{navigationId:i}}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=Ot(e)))(s||e)}})(),e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Ks=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Ks||{});function sI(n,e){n.events.pipe(jn(t=>t instanceof Qt||t instanceof Cn||t instanceof no||t instanceof Ii),j(t=>t instanceof Qt||t instanceof Ii?Ks.COMPLETE:(t instanceof Cn?t.code===Rt.Redirect||t.code===Rt.SupersededByNewNavigation:!1)?Ks.REDIRECTING:Ks.FAILED),jn(t=>t!==Ks.REDIRECTING),fr(1)).subscribe(()=>{e()})}function oI(n){throw n}var aI={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},cI={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Me=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=I(Ba),this.stateManager=I(m_),this.options=I(Od,{optional:!0})||{},this.pendingTasks=I(tg),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=I(eI),this.urlSerializer=I(Id),this.location=I(Ha),this.urlHandlingStrategy=I(Rd),this._events=new on,this.errorHandler=this.options.errorHandler||oI,this.navigated=!1,this.routeReuseStrategy=I(nI),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=I(Dd,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!I(Md,{optional:!0}),this.eventsSubscription=new Fm,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:i=>{this.console.warn(i)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let i=this.navigationTransitions.events.subscribe(r=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Cn&&r.code!==Rt.Redirect&&r.code!==Rt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Qt)this.navigated=!0;else if(r instanceof Er){let a=r.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(r.url,s.currentRawUrl),l=R({browserUrl:s.extras.browserUrl,info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:s.extras.replaceUrl||this.urlUpdateStrategy==="eager"||tI(s.source)},a);this.scheduleNavigation(c,Qs,null,l,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}uI(r)&&this._events.next(r)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(i)}resetRootComponentType(i){this.routerState.root.component=i,this.navigationTransitions.rootComponentType=i}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Qs,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((i,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(i,"popstate",r)},0)})}navigateToSyncWithBrowser(i,r,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let l=R({},s);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let c=this.parseUrl(i);this.scheduleNavigation(c,r,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(i){this.config=i.map(kd),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(i,r={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:c,preserveFragment:l}=r,u=l?this.currentUrlTree.fragment:a,d=null;switch(c){case"merge":d=R(R({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let h;try{let f=s?s.snapshot:this.routerState.snapshot.root;h=Zg(f)}catch{(typeof i[0]!="string"||i[0][0]!=="/")&&(i=[]),h=this.currentUrlTree.root}return e_(h,i,d,u??null)}navigateByUrl(i,r={skipLocationChange:!1}){let s=Ei(i)?i:this.parseUrl(i),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,Qs,null,r)}navigate(i,r={skipLocationChange:!1}){return lI(i),this.navigateByUrl(this.createUrlTree(i,r),r)}serializeUrl(i){return this.urlSerializer.serialize(i)}parseUrl(i){try{return this.urlSerializer.parse(i)}catch{return this.urlSerializer.parse("/")}}isActive(i,r){let s;if(r===!0?s=R({},aI):r===!1?s=R({},cI):s=r,Ei(i))return Lg(this.currentUrlTree,i,s);let o=this.parseUrl(i);return Lg(this.currentUrlTree,o,s)}removeEmptyProps(i){return Object.entries(i).reduce((r,[s,o])=>(o!=null&&(r[s]=o),r),{})}scheduleNavigation(i,r,s,o,a){if(this.disposed)return Promise.resolve(!1);let c,l,u;a?(c=a.resolve,l=a.reject,u=a.promise):u=new Promise((h,f)=>{c=h,l=f});let d=this.pendingTasks.add();return sI(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:i,extras:o,resolve:c,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(h=>Promise.reject(h))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function lI(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new be(4008,!1)}function uI(n){return!(n instanceof io)&&!(n instanceof Er)}var Tr=(()=>{let e=class e{constructor(i,r,s,o,a,c){this.router=i,this.route=r,this.tabIndexAttribute=s,this.renderer=o,this.el=a,this.locationStrategy=c,this.href=null,this.onChanges=new on,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let l=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=i.events.subscribe(u=>{u instanceof Qt&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(i){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",i)}ngOnChanges(i){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(i){i==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Ei(i)?this.routerLinkInput=i:this.routerLinkInput=Array.isArray(i)?i:[i],this.setTabIndexIfNotOnNativeEl("0"))}onClick(i,r,s,o,a){let c=this.urlTree;if(c===null||this.isAnchorElement&&(i!==0||r||s||o||a||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(c,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let i=this.urlTree;this.href=i!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(i)):null;let r=this.href===null?null:sg(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(i,r){let s=this.renderer,o=this.el.nativeElement;r!==null?s.setAttribute(o,i,r):s.removeAttribute(o,i)}get urlTree(){return this.routerLinkInput===null?null:Ei(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};e.\u0275fac=function(r){return new(r||e)(G(Me),G(Sn),eg("tabindex"),G(Wn),G(cn),G(Uu))},e.\u0275dir=fe({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,s){r&1&&M("click",function(a){return s.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),r&2&&Ci("target",s.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",$n],skipLocationChange:[2,"skipLocationChange","skipLocationChange",$n],replaceUrl:[2,"replaceUrl","replaceUrl",$n],routerLink:"routerLink"},standalone:!0,features:[ug,bn]});let n=e;return n})(),g_=(()=>{let e=class e{get isActive(){return this._isActive}constructor(i,r,s,o,a){this.router=i,this.element=r,this.renderer=s,this.cdr=o,this.link=a,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new _t,this.routerEventsSubscription=i.events.subscribe(c=>{c instanceof Qt&&this.update()})}ngAfterContentInit(){z(this.links.changes,z(null)).pipe(Iu()).subscribe(i=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let i=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=je(i).pipe(Iu()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(i){let r=Array.isArray(i)?i:i.split(" ");this.classes=r.filter(s=>!!s)}ngOnChanges(i){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let i=this.hasActiveLinks();this.classes.forEach(r=>{i?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),i&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==i&&(this._isActive=i,this.cdr.markForCheck(),this.isActiveChange.emit(i))})}isLinkActive(i){let r=dI(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return s=>{let o=s.urlTree;return o?i.isActive(o,r):!1}}hasActiveLinks(){let i=this.isLinkActive(this.router);return this.link&&i(this.link)||this.links.some(i)}};e.\u0275fac=function(r){return new(r||e)(G(Me),G(cn),G(Wn),G(_r),G(Tr,8))},e.\u0275dir=fe({type:e,selectors:[["","routerLinkActive",""]],contentQueries:function(r,s,o){if(r&1&&pg(o,Tr,5),r&2){let a;Vs(a=Us())&&(s.links=a)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[bn]});let n=e;return n})();function dI(n){return!!n.paths}var hI=new de("");function __(n,...e){return Kt([{provide:Dd,multi:!0,useValue:n},[],{provide:Sn,useFactory:fI,deps:[Me]},{provide:vg,multi:!0,useFactory:pI},e.map(t=>t.\u0275providers)])}function fI(n){return n.routerState.root}function pI(){let n=I(xn);return e=>{let t=n.get(Fu);if(e!==t.components[0])return;let i=n.get(Me),r=n.get(mI);n.get(gI)===1&&i.initialNavigation(),n.get(_I,null,Pu.Optional)?.setUpPreloading(),n.get(hI,null,Pu.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var mI=new de("",{factory:()=>new on}),gI=new de("",{providedIn:"root",factory:()=>1});var _I=new de("");var v_=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=Ce({type:n,selectors:[["app-welcome"]],standalone:!0,features:[we],decls:40,vars:0,consts:[[1,"nunito-sans-bold"],["routerLink","/auth-form",1,"nunito-sans-bold"],[1,"nunito-sans-regular"]],template:function(i,r){i&1&&(g(0,"h1",0),y(1,"Personal Finance Dashboard"),m(),g(2,"button",1),y(3,"Get Started Now"),m(),g(4,"div")(5,"p",0),y(6,"Demo & Usage:"),m(),g(7,"ul")(8,"li",2)(9,"span",0),y(10,"Explore with the Demo:"),m(),y(11," Navigate through the app using the navigation bar to see how each section functions. Play around with the provided demo data to get a feel for how the app works and how data updates in real-time. "),m(),g(12,"li",2)(13,"span",0),y(14,"Secure Your Data:"),m(),y(15," This dashboard prioritizes security. You don't need to link your real bank accounts. Instead, you can enter your own financial information to create a personalized experience. "),m(),g(16,"li",2)(17,"span",0),y(18,"Save Your Progress:"),m(),y(19," Create an account to save your data to the project's Firebase database. This allows you to pick up where you left off when you log in next time. "),m(),g(20,"li",2)(21,"span",0),y(22,"Easy Management:"),m(),y(23," Manage your accounts and transactions seamlessly. Simply click the respective buttons at the top of each page to create new entries or modify existing ones. "),m(),g(24,"li",2)(25,"span",0),y(26,"Informative Tooltips:"),m(),y(27," Some buttons display tooltips with additional options before taking action. This helps you choose the most precise action you want to perform. "),m(),g(28,"li",2)(29,"span",0),y(30,"Safe Transaction Deletion:"),m(),y(31," You can delete and reverse transactions by simply clicking them. In case you clicked one by accident, don't worry, the app will ask you for confirmation before deleting it. "),m(),g(32,"li",2)(33,"span",0),y(34,"Track Income and Expenses:"),m(),y(35," Whenever you create a transaction from an income account to a main account or from a main account to an expense account, the dashboard tracks these movements. Income and expense accounts will accumulate all amounts added or passed, allowing you to see how much each income account has provided and how much each expense account has taken in total. "),m(),g(36,"li",2)(37,"span",0),y(38,"Built-in Safety Net:"),m(),y(39," Feel free to explore! The app provides helpful prompts to catch potential errors before they happen, allowing you to make informed decisions. "),m()()())},dependencies:[Tr],styles:["h1[_ngcontent-%COMP%]{margin:60px 0;text-align:center;font-size:100px;color:var(--secondary)}button[_ngcontent-%COMP%]{display:flex;align-items:center;margin:auto;height:80px;padding:0 20px;font-size:45px;background-color:var(--main);color:#f7f9fc;border:none;border-radius:10px;box-shadow:0 0 5px #00000040;cursor:pointer}div[_ngcontent-%COMP%]{margin:120px 30px 60px}p[_ngcontent-%COMP%]{margin-bottom:30px;font-size:40px;color:var(--secondary)}ul[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px;padding-left:30px}li[_ngcontent-%COMP%]{font-size:30px;color:var(--secondary)}@media (width <= 1729px){h1[_ngcontent-%COMP%]{font-size:95px}}@media (width <= 1629px){h1[_ngcontent-%COMP%]{font-size:85px}button[_ngcontent-%COMP%]{height:70px;font-size:40px}p[_ngcontent-%COMP%]{font-size:35px}li[_ngcontent-%COMP%]{font-size:25px}}@media (width <= 1479px){h1[_ngcontent-%COMP%]{font-size:75px}}@media (width <= 1069px){h1[_ngcontent-%COMP%]{font-size:60px;margin-top:30px;margin-bottom:30px}button[_ngcontent-%COMP%]{height:60px;font-size:30px}p[_ngcontent-%COMP%]{font-size:30px}li[_ngcontent-%COMP%]{font-size:20px}}"]})}return n})();var A_=(()=>{let e=class e{constructor(i,r){this._renderer=i,this._elementRef=r,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(i,r){this._renderer.setProperty(this._elementRef.nativeElement,i,r)}registerOnTouched(i){this.onTouched=i}registerOnChange(i){this.onChange=i}setDisabledState(i){this.setProperty("disabled",i)}};e.\u0275fac=function(r){return new(r||e)(G(Wn),G(cn))},e.\u0275dir=fe({type:e});let n=e;return n})(),_c=(()=>{let e=class e extends A_{};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=Ot(e)))(s||e)}})(),e.\u0275dir=fe({type:e,features:[nt]});let n=e;return n})(),vo=new de("");var vI={provide:vo,useExisting:zt(()=>Ze),multi:!0};function yI(){let n=vr()?vr().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var bI=new de(""),Ze=(()=>{let e=class e extends A_{constructor(i,r,s){super(i,r),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!yI())}writeValue(i){let r=i??"";this.setProperty("value",r)}_handleInput(i){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(i)}_compositionStart(){this._composing=!0}_compositionEnd(i){this._composing=!1,this._compositionMode&&this.onChange(i)}};e.\u0275fac=function(r){return new(r||e)(G(Wn),G(cn),G(bI,8))},e.\u0275dir=fe({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,s){r&1&&M("input",function(a){return s._handleInput(a.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(a){return s._compositionEnd(a.target.value)})},features:[vt([vI]),nt]});let n=e;return n})();function Ti(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}function xI(n){return n!=null&&typeof n.length=="number"}var Ai=new de(""),M_=new de(""),CI=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;function wI(n){return e=>{if(Ti(e.value)||Ti(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function SI(n){return e=>{if(Ti(e.value)||Ti(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function EI(n){return Ti(n.value)?{required:!0}:null}function II(n){return Ti(n.value)||CI.test(n.value)?null:{email:!0}}function TI(n){return e=>Ti(e.value)||!xI(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}function y_(n){return null}function P_(n){return n!=null}function O_(n){return Wa(n)?je(n):n}function k_(n){let e={};return n.forEach(t=>{e=t!=null?R(R({},e),t):e}),Object.keys(e).length===0?null:e}function D_(n,e){return e.map(t=>t(n))}function AI(n){return!n.validate}function R_(n){return n.map(e=>AI(e)?e:t=>e.validate(t))}function MI(n){if(!n)return null;let e=n.filter(P_);return e.length==0?null:function(t){return k_(D_(t,e))}}function Ld(n){return n!=null?MI(R_(n)):null}function PI(n){if(!n)return null;let e=n.filter(P_);return e.length==0?null:function(t){let i=D_(t,e).map(O_);return Hm(i).pipe(j(k_))}}function Fd(n){return n!=null?PI(R_(n)):null}function b_(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function OI(n){return n._rawValidators}function kI(n){return n._rawAsyncValidators}function Nd(n){return n?Array.isArray(n)?n:[n]:[]}function dc(n,e){return Array.isArray(n)?n.includes(e):n===e}function x_(n,e){let t=Nd(e);return Nd(n).forEach(r=>{dc(t,r)||t.push(r)}),t}function C_(n,e){return Nd(e).filter(t=>!dc(n,t))}var hc=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Ld(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Fd(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Or=class extends hc{get formDirective(){return null}get path(){return null}},_o=class extends hc{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},fc=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},DI={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Lz=ce(R({},DI),{"[class.ng-submitted]":"isSubmitted"}),bt=(()=>{let e=class e extends fc{constructor(i){super(i)}};e.\u0275fac=function(r){return new(r||e)(G(_o,2))},e.\u0275dir=fe({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,s){r&2&&pr("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[nt]});let n=e;return n})(),xt=(()=>{let e=class e extends fc{constructor(i){super(i)}};e.\u0275fac=function(r){return new(r||e)(G(Or,10))},e.\u0275dir=fe({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,s){r&2&&pr("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[nt]});let n=e;return n})();var ho="VALID",uc="INVALID",Mr="PENDING",fo="DISABLED",kr=class{},pc=class extends kr{constructor(e,t){super(),this.value=e,this.source=t}},mo=class extends kr{constructor(e,t){super(),this.pristine=e,this.source=t}},go=class extends kr{constructor(e,t){super(),this.touched=e,this.source=t}},Pr=class extends kr{constructor(e,t){super(),this.status=e,this.source=t}};function N_(n){return(vc(n)?n.validators:n)||null}function RI(n){return Array.isArray(n)?Ld(n):n||null}function L_(n,e){return(vc(e)?e.asyncValidators:n)||null}function NI(n){return Array.isArray(n)?Fd(n):n||null}function vc(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function LI(n,e,t){let i=n.controls;if(!(e?Object.keys(i):i).length)throw new be(1e3,"");if(!i[t])throw new be(1001,"")}function FI(n,e,t){n._forEachChild((i,r)=>{if(t[r]===void 0)throw new be(1002,"")})}var mc=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=js(()=>this.statusReactive()),this.statusReactive=Fs(void 0),this._pristine=js(()=>this.pristineReactive()),this.pristineReactive=Fs(!0),this._touched=js(()=>this.touchedReactive()),this.touchedReactive=Fs(!1),this._events=new on,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Gn(this.statusReactive)}set status(e){Gn(()=>this.statusReactive.set(e))}get valid(){return this.status===ho}get invalid(){return this.status===uc}get pending(){return this.status==Mr}get disabled(){return this.status===fo}get enabled(){return this.status!==fo}get pristine(){return Gn(this.pristineReactive)}set pristine(e){Gn(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return Gn(this.touchedReactive)}set touched(e){Gn(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(x_(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(x_(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(C_(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(C_(e,this._rawAsyncValidators))}hasValidator(e){return dc(this._rawValidators,e)}hasAsyncValidator(e){return dc(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ce(R({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new go(!0,i))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:i})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,i),t&&e.emitEvent!==!1&&this._events.next(new go(!1,i))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ce(R({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new mo(!1,i))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,i),t&&e.emitEvent!==!1&&this._events.next(new mo(!0,i))}markAsPending(e={}){this.status=Mr;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Pr(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ce(R({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=fo,this.errors=null,this._forEachChild(r=>{r.disable(ce(R({},e),{onlySelf:!0}))}),this._updateValue();let i=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new pc(this.value,i)),this._events.next(new Pr(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ce(R({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=ho,this._forEachChild(i=>{i.enable(ce(R({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ce(R({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ho||this.status===Mr)&&this._runAsyncValidator(i,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new pc(this.value,t)),this._events.next(new Pr(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ce(R({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?fo:ho}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Mr,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let i=O_(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){let i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,i){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||i)&&this._events.next(new Pr(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,i)}_initObservables(){this.valueChanges=new _t,this.statusChanges=new _t}_calculateStatus(){return this._allControlsDisabled()?fo:this.errors?uc:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Mr)?Mr:this._anyControlsHaveStatus(uc)?uc:ho}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),r&&this._events.next(new mo(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new go(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){vc(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=RI(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=NI(this._rawAsyncValidators)}},gc=class extends mc{constructor(e,t,i){super(N_(t),L_(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){FI(this,!0,e),Object.keys(e).forEach(i=>{LI(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(i=>{let r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e?e[r]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>i._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,i,r)=>((i.enabled||this.disabled)&&(t[r]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,s)=>{i=t(i,r,s)}),i}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Vd=new de("CallSetDisabledState",{providedIn:"root",factory:()=>Ud}),Ud="always";function VI(n,e){return[...e.path,n]}function F_(n,e,t=Ud){V_(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),zI(n,e),BI(n,e),jI(n,e),UI(n,e)}function w_(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function UI(n,e){if(e.valueAccessor.setDisabledState){let t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function V_(n,e){let t=OI(n);e.validator!==null?n.setValidators(b_(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let i=kI(n);e.asyncValidator!==null?n.setAsyncValidators(b_(i,e.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();w_(e._rawValidators,r),w_(e._rawAsyncValidators,r)}function zI(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&U_(n,e)})}function jI(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&U_(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function U_(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function BI(n,e){let t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function WI(n,e){n==null,V_(n,e)}function HI(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function $I(n){return Object.getPrototypeOf(n.constructor)===_c}function GI(n,e){n._syncPendingControls(),e.forEach(t=>{let i=t.control;i.updateOn==="submit"&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function qI(n,e){if(!e)return null;Array.isArray(e);let t,i,r;return e.forEach(s=>{s.constructor===Ze?t=s:$I(s)?i=s:r=s}),r||i||t||null}var YI={provide:Or,useExisting:zt(()=>lt)},po=Promise.resolve(),lt=(()=>{let e=class e extends Or{get submitted(){return Gn(this.submittedReactive)}constructor(i,r,s){super(),this.callSetDisabledState=s,this._submitted=js(()=>this.submittedReactive()),this.submittedReactive=Fs(!1),this._directives=new Set,this.ngSubmit=new _t,this.form=new gc({},Ld(i),Fd(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(i){po.then(()=>{let r=this._findContainer(i.path);i.control=r.registerControl(i.name,i.control),F_(i.control,i,this.callSetDisabledState),i.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(i)})}getControl(i){return this.form.get(i.path)}removeControl(i){po.then(()=>{let r=this._findContainer(i.path);r&&r.removeControl(i.name),this._directives.delete(i)})}addFormGroup(i){po.then(()=>{let r=this._findContainer(i.path),s=new gc({});WI(s,i),r.registerControl(i.name,s),s.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(i){po.then(()=>{let r=this._findContainer(i.path);r&&r.removeControl(i.name)})}getFormGroup(i){return this.form.get(i.path)}updateModel(i,r){po.then(()=>{this.form.get(i.path).setValue(r)})}setValue(i){this.control.setValue(i)}onSubmit(i){return this.submittedReactive.set(!0),GI(this.form,this._directives),this.ngSubmit.emit(i),i?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(i=void 0){this.form.reset(i),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(i){return i.pop(),i.length?this.form.get(i):this.form}};e.\u0275fac=function(r){return new(r||e)(G(Ai,10),G(M_,10),G(Vd,8))},e.\u0275dir=fe({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,s){r&1&&M("submit",function(a){return s.onSubmit(a)})("reset",function(){return s.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[vt([YI]),nt]});let n=e;return n})();function S_(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function E_(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var KI=class extends mc{constructor(e=null,t,i){super(N_(t),L_(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),vc(t)&&(t.nonNullable||t.initialValueIsDefault)&&(E_(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){S_(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){S_(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){E_(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var XI={provide:_o,useExisting:zt(()=>ut)},I_=Promise.resolve(),ut=(()=>{let e=class e extends _o{constructor(i,r,s,o,a,c){super(),this._changeDetectorRef=a,this.callSetDisabledState=c,this.control=new KI,this._registered=!1,this.name="",this.update=new _t,this._parent=i,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=qI(this,o)}ngOnChanges(i){if(this._checkForErrors(),!this._registered||"name"in i){if(this._registered&&(this._checkName(),this.formDirective)){let r=i.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in i&&this._updateDisabled(i),HI(i,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){F_(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(i){I_.then(()=>{this.control.setValue(i,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(i){let r=i.isDisabled.currentValue,s=r!==0&&$n(r);I_.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(i){return this._parent?VI(i,this._parent):[i]}};e.\u0275fac=function(r){return new(r||e)(G(Or,9),G(Ai,10),G(M_,10),G(vo,10),G(_r,8),G(Vd,8))},e.\u0275dir=fe({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[vt([XI]),nt,bn]});let n=e;return n})(),Ct=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=fe({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let n=e;return n})(),QI={provide:vo,useExisting:zt(()=>Nt),multi:!0},Nt=(()=>{let e=class e extends _c{writeValue(i){let r=i??"";this.setProperty("value",r)}registerOnChange(i){this.onChange=r=>{i(r==""?null:parseFloat(r))}}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=Ot(e)))(s||e)}})(),e.\u0275dir=fe({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,s){r&1&&M("input",function(a){return s.onChange(a.target.value)})("blur",function(){return s.onTouched()})},features:[vt([QI]),nt]});let n=e;return n})();var JI={provide:vo,useExisting:zt(()=>j_),multi:!0};function z_(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function ZI(n){return n.split(":")[0]}var j_=(()=>{let e=class e extends _c{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(i){this._compareWith=i}writeValue(i){this.value=i;let r=this._getOptionId(i),s=z_(r,i);this.setProperty("value",s)}registerOnChange(i){this.onChange=r=>{this.value=this._getOptionValue(r),i(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(i){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),i))return r;return null}_getOptionValue(i){let r=ZI(i);return this._optionMap.has(r)?this._optionMap.get(r):i}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=Ot(e)))(s||e)}})(),e.\u0275dir=fe({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,s){r&1&&M("change",function(a){return s.onChange(a.target.value)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},features:[vt([JI]),nt]});let n=e;return n})(),Dr=(()=>{let e=class e{constructor(i,r,s){this._element=i,this._renderer=r,this._select=s,this._select&&(this.id=this._select._registerOption())}set ngValue(i){this._select!=null&&(this._select._optionMap.set(this.id,i),this._setElementValue(z_(this.id,i)),this._select.writeValue(this._select.value))}set value(i){this._setElementValue(i),this._select&&this._select.writeValue(this._select.value)}_setElementValue(i){this._renderer.setProperty(this._element.nativeElement,"value",i)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(r){return new(r||e)(G(cn),G(Wn),G(j_,9))},e.\u0275dir=fe({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let n=e;return n})(),eT={provide:vo,useExisting:zt(()=>B_),multi:!0};function T_(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function tT(n){return n.split(":")[0]}var B_=(()=>{let e=class e extends _c{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(i){this._compareWith=i}writeValue(i){this.value=i;let r;if(Array.isArray(i)){let s=i.map(o=>this._getOptionId(o));r=(o,a)=>{o._setSelected(s.indexOf(a.toString())>-1)}}else r=(s,o)=>{s._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(i){this.onChange=r=>{let s=[],o=r.selectedOptions;if(o!==void 0){let a=o;for(let c=0;c<a.length;c++){let l=a[c],u=this._getOptionValue(l.value);s.push(u)}}else{let a=r.options;for(let c=0;c<a.length;c++){let l=a[c];if(l.selected){let u=this._getOptionValue(l.value);s.push(u)}}}this.value=s,i(s)}}_registerOption(i){let r=(this._idCounter++).toString();return this._optionMap.set(r,i),r}_getOptionId(i){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,i))return r;return null}_getOptionValue(i){let r=tT(i);return this._optionMap.has(r)?this._optionMap.get(r)._value:i}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=Ot(e)))(s||e)}})(),e.\u0275dir=fe({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,s){r&1&&M("change",function(a){return s.onChange(a.target)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},features:[vt([eT]),nt]});let n=e;return n})(),Rr=(()=>{let e=class e{constructor(i,r,s){this._element=i,this._renderer=r,this._select=s,this._select&&(this.id=this._select._registerOption(this))}set ngValue(i){this._select!=null&&(this._value=i,this._setElementValue(T_(this.id,i)),this._select.writeValue(this._select.value))}set value(i){this._select?(this._value=i,this._setElementValue(T_(this.id,i)),this._select.writeValue(this._select.value)):this._setElementValue(i)}_setElementValue(i){this._renderer.setProperty(this._element.nativeElement,"value",i)}_setSelected(i){this._renderer.setProperty(this._element.nativeElement,"selected",i)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(r){return new(r||e)(G(cn),G(Wn),G(B_,9))},e.\u0275dir=fe({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let n=e;return n})();function nT(n){return typeof n=="number"?n:parseInt(n,10)}function W_(n){return typeof n=="number"?n:parseFloat(n)}var yo=(()=>{let e=class e{constructor(){this._validator=y_}ngOnChanges(i){if(this.inputName in i){let r=this.normalizeInput(i[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):y_,this._onChange&&this._onChange()}}validate(i){return this._validator(i)}registerOnValidatorChange(i){this._onChange=i}enabled(i){return i!=null}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=fe({type:e,features:[bn]});let n=e;return n})(),iT={provide:Ai,useExisting:zt(()=>Lt),multi:!0},Lt=(()=>{let e=class e extends yo{constructor(){super(...arguments),this.inputName="max",this.normalizeInput=i=>W_(i),this.createValidator=i=>SI(i)}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=Ot(e)))(s||e)}})(),e.\u0275dir=fe({type:e,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(r,s){r&2&&Ci("max",s._enabled?s.max:null)},inputs:{max:"max"},features:[vt([iT]),nt]});let n=e;return n})(),rT={provide:Ai,useExisting:zt(()=>Ft),multi:!0},Ft=(()=>{let e=class e extends yo{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=i=>W_(i),this.createValidator=i=>wI(i)}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=Ot(e)))(s||e)}})(),e.\u0275dir=fe({type:e,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,s){r&2&&Ci("min",s._enabled?s.min:null)},inputs:{min:"min"},features:[vt([rT]),nt]});let n=e;return n})(),sT={provide:Ai,useExisting:zt(()=>dt),multi:!0};var dt=(()=>{let e=class e extends yo{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=$n,this.createValidator=i=>EI}enabled(i){return i}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=Ot(e)))(s||e)}})(),e.\u0275dir=fe({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,s){r&2&&Ci("required",s._enabled?"":null)},inputs:{required:"required"},features:[vt([sT]),nt]});let n=e;return n})();var oT={provide:Ai,useExisting:zt(()=>zd),multi:!0},zd=(()=>{let e=class e extends yo{constructor(){super(...arguments),this.inputName="email",this.normalizeInput=$n,this.createValidator=i=>II}enabled(i){return i}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=Ot(e)))(s||e)}})(),e.\u0275dir=fe({type:e,selectors:[["","email","","formControlName",""],["","email","","formControl",""],["","email","","ngModel",""]],inputs:{email:"email"},features:[vt([oT]),nt]});let n=e;return n})(),aT={provide:Ai,useExisting:zt(()=>jd),multi:!0},jd=(()=>{let e=class e extends yo{constructor(){super(...arguments),this.inputName="minlength",this.normalizeInput=i=>nT(i),this.createValidator=i=>TI(i)}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=Ot(e)))(s||e)}})(),e.\u0275dir=fe({type:e,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(r,s){r&2&&Ci("minlength",s._enabled?s.minlength:null)},inputs:{minlength:"minlength"},features:[vt([aT]),nt]});let n=e;return n})();var cT=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Ns({type:e}),e.\u0275inj=Ds({});let n=e;return n})();var wt=(()=>{let e=class e{static withConfig(i){return{ngModule:e,providers:[{provide:Vd,useValue:i.callSetDisabledState??Ud}]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Ns({type:e}),e.\u0275inj=Ds({imports:[cT]});let n=e;return n})();var Wd={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var S=function(n,e){if(!n)throw Pi(e)},Pi=function(n){return new Error("Firebase Database ("+Wd.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};var $_=function(n){let e=[],t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},lT=function(n){let e=[],t=0,i=0;for(;t<n.length;){let r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){let s=n[t++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){let s=n[t++],o=n[t++],a=n[t++],c=((r&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(c>>10)),e[i++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return e.join("")},bc={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){let s=n[r],o=r+1<n.length,a=o?n[r+1]:0,c=r+2<n.length,l=c?n[r+2]:0,u=s>>2,d=(s&3)<<4|a>>4,h=(a&15)<<2|l>>6,f=l&63;c||(f=64,o||(h=64)),i.push(t[u],t[d],t[h],t[f])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray($_(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):lT(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){let s=t[n.charAt(r++)],a=r<n.length?t[n.charAt(r)]:0;++r;let l=r<n.length?t[n.charAt(r)]:64;++r;let d=r<n.length?t[n.charAt(r)]:64;if(++r,s==null||a==null||l==null||d==null)throw new Hd;let h=s<<2|a>>4;if(i.push(h),l!==64){let f=a<<4&240|l>>2;if(i.push(f),d!==64){let p=l<<6&192|d;i.push(p)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Hd=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Gd=function(n){let e=$_(n);return bc.encodeByteArray(e,!0)},bo=function(n){return Gd(n).replace(/\./g,"")},xo=function(n){try{return bc.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function G_(n){return q_(void 0,n)}function q_(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:let t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(let t in e)!e.hasOwnProperty(t)||!uT(t)||(n[t]=q_(n[t],e[t]));return n}function uT(n){return n!=="__proto__"}function dT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var hT=()=>dT().__FIREBASE_DEFAULTS__,fT=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},pT=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&xo(n[1]);return e&&JSON.parse(e)},qd=()=>{try{return hT()||fT()||pT()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Yd=n=>{var e,t;return(t=(e=qd())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Y_=n=>{let e=Yd(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},Kd=()=>{var n;return(n=qd())===null||n===void 0?void 0:n.config},Xd=n=>{var e;return(e=qd())===null||e===void 0?void 0:e[`_${n}`]};var En=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}};function K_(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},i=e||"demo-project",r=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[bo(JSON.stringify(t)),bo(JSON.stringify(o)),""].join(".")}function Ke(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Co(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ke())}function X_(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function xc(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Q_(){let n=Ke();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function un(){return Wd.NODE_CLIENT===!0||Wd.NODE_ADMIN===!0}function J_(){try{return typeof indexedDB=="object"}catch{return!1}}function Z_(){return new Promise((n,e)=>{try{let t=!0,i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var mT="FirebaseError",Jt=class n extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=mT,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,In.prototype.create)}},In=class{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){let i=t[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?gT(s,i):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new Jt(r,a,i)}};function gT(n,e){return n.replace(_T,(t,i)=>{let r=e[i];return r!=null?String(r):`<${i}?>`})}var _T=/\{\$([^}]+)}/g;function Nr(n){return JSON.parse(n)}function Fe(n){return JSON.stringify(n)}var e0=function(n){let e={},t={},i={},r="";try{let s=n.split(".");e=Nr(xo(s[0])||""),t=Nr(xo(s[1])||""),r=s[2],i=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:i,signature:r}};var t0=function(n){let e=e0(n),t=e.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},n0=function(n){let e=e0(n).claims;return typeof e=="object"&&e.admin===!0};function Zt(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function Oi(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function wo(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function So(n,e,t){let i={};for(let r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=e.call(t,n[r],r,n));return i}function Lr(n,e){if(n===e)return!0;let t=Object.keys(n),i=Object.keys(e);for(let r of t){if(!i.includes(r))return!1;let s=n[r],o=e[r];if(H_(s)&&H_(o)){if(!Lr(s,o))return!1}else if(s!==o)return!1}for(let r of i)if(!t.includes(r))return!1;return!0}function H_(n){return n!==null&&typeof n=="object"}function ki(n){let e=[];for(let[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Fr(n){let e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){let[r,s]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(s)}}),e}function Vr(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}var yc=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);let i=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)i[d]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let d=0;d<16;d++)i[d]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let d=16;d<80;d++){let h=i[d-3]^i[d-8]^i[d-14]^i[d-16];i[d]=(h<<1|h>>>31)&4294967295}let r=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4],l,u;for(let d=0;d<80;d++){d<40?d<20?(l=a^s&(o^a),u=1518500249):(l=s^o^a,u=1859775393):d<60?(l=s&o|a&(s|o),u=2400959708):(l=s^o^a,u=3395469782);let h=(r<<5|r>>>27)+l+c+u+i[d]&4294967295;c=a,a=o,o=(s<<30|s>>>2)&4294967295,s=r,r=h}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);let i=t-this.blockSize,r=0,s=this.buf_,o=this.inbuf_;for(;r<t;){if(o===0)for(;r<=i;)this.compress_(e,r),r+=this.blockSize;if(typeof e=="string"){for(;r<t;)if(s[o]=e.charCodeAt(r),++o,++r,o===this.blockSize){this.compress_(s),o=0;break}}else for(;r<t;)if(s[o]=e[r],++o,++r,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=t}digest(){let e=[],t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=t&255,t/=256;this.compress_(this.buf_);let i=0;for(let r=0;r<5;r++)for(let s=24;s>=0;s-=8)e[i]=this.chain_[r]>>s&255,++i;return e}};function i0(n,e){let t=new $d(n,e);return t.subscribe.bind(t)}var $d=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");vT(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:i},r.next===void 0&&(r.next=Bd),r.error===void 0&&(r.error=Bd),r.complete===void 0&&(r.complete=Bd);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function vT(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Bd(){}function Eo(n,e){return`${n} failed: ${e} argument `}var r0=function(n){let e=[],t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);if(r>=55296&&r<=56319){let s=r-55296;i++,S(i<n.length,"Surrogate pair missing trail surrogate.");let o=n.charCodeAt(i)-56320;r=65536+(s<<10)+o}r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):r<65536?(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},Io=function(n){let e=0;for(let t=0;t<n.length;t++){let i=n.charCodeAt(t);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,t++):e+=3}return e};var Uz=4*60*60*1e3;function et(n){return n&&n._delegate?n._delegate:n}var Bt=class{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Di="[DEFAULT]";var Cc=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let i=new En;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{let r=this.getOrInitializeService({instanceIdentifier:t});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let i=this.normalizeInstanceIdentifier(e?.identifier),r=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(bT(e))try{this.getOrInitializeService({instanceIdentifier:Di})}catch{}for(let[t,i]of this.instancesDeferred.entries()){let r=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=Di){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return b(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Di){return this.instances.has(e)}getOptions(e=Di){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);i===a&&o.resolve(r)}return r}onInit(e,t){var i;let r=this.normalizeInstanceIdentifier(t),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);let o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let i=this.onInitCallbacks.get(t);if(i)for(let r of i)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:yT(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Di){return this.component?this.component.multipleInstances?e:Di:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function yT(n){return n===Di?void 0:n}function bT(n){return n.instantiationMode==="EAGER"}var To=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Cc(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var xT=[],le=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(le||{}),CT={debug:le.DEBUG,verbose:le.VERBOSE,info:le.INFO,warn:le.WARN,error:le.ERROR,silent:le.SILENT},wT=le.INFO,ST={[le.DEBUG]:"log",[le.VERBOSE]:"log",[le.INFO]:"info",[le.WARN]:"warn",[le.ERROR]:"error"},ET=(n,e,...t)=>{if(e<n.logLevel)return;let i=new Date().toISOString(),r=ST[e];if(r)console[r](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Yn=class{constructor(e){this.name=e,this._logLevel=wT,this._logHandler=ET,this._userLogHandler=null,xT.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?CT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,le.DEBUG,...e),this._logHandler(this,le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,le.VERBOSE,...e),this._logHandler(this,le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,le.INFO,...e),this._logHandler(this,le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,le.WARN,...e),this._logHandler(this,le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,le.ERROR,...e),this._logHandler(this,le.ERROR,...e)}};var IT=(n,e)=>e.some(t=>n instanceof t),s0,o0;function TT(){return s0||(s0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function AT(){return o0||(o0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var a0=new WeakMap,Jd=new WeakMap,c0=new WeakMap,Qd=new WeakMap,eh=new WeakMap;function MT(n){let e=new Promise((t,i)=>{let r=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(dn(n.result)),r()},o=()=>{i(n.error),r()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&a0.set(t,n)}).catch(()=>{}),eh.set(e,n),e}function PT(n){if(Jd.has(n))return;let e=new Promise((t,i)=>{let r=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),r()},o=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});Jd.set(n,e)}var Zd={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Jd.get(n);if(e==="objectStoreNames")return n.objectStoreNames||c0.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return dn(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function l0(n){Zd=n(Zd)}function OT(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let i=n.call(wc(this),e,...t);return c0.set(i,e.sort?e.sort():[e]),dn(i)}:AT().includes(n)?function(...e){return n.apply(wc(this),e),dn(a0.get(this))}:function(...e){return dn(n.apply(wc(this),e))}}function kT(n){return typeof n=="function"?OT(n):(n instanceof IDBTransaction&&PT(n),IT(n,TT())?new Proxy(n,Zd):n)}function dn(n){if(n instanceof IDBRequest)return MT(n);if(Qd.has(n))return Qd.get(n);let e=kT(n);return e!==n&&(Qd.set(n,e),eh.set(e,n)),e}var wc=n=>eh.get(n);function d0(n,e,{blocked:t,upgrade:i,blocking:r,terminated:s}={}){let o=indexedDB.open(n,e),a=dn(o);return i&&o.addEventListener("upgradeneeded",c=>{i(dn(o.result),c.oldVersion,c.newVersion,dn(o.transaction),c)}),t&&o.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),r&&c.addEventListener("versionchange",l=>r(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var DT=["get","getKey","getAll","getAllKeys","count"],RT=["put","add","delete","clear"],th=new Map;function u0(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(th.get(e))return th.get(e);let t=e.replace(/FromIndex$/,""),i=e!==t,r=RT.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(r||DT.includes(t)))return;let s=function(o,...a){return b(this,null,function*(){let c=this.transaction(o,r?"readwrite":"readonly"),l=c.store;return i&&(l=l.index(a.shift())),(yield Promise.all([l[t](...a),r&&c.done]))[0]})};return th.set(e,s),s}l0(n=>ce(R({},n),{get:(e,t,i)=>u0(e,t)||n.get(e,t,i),has:(e,t)=>!!u0(e,t)||n.has(e,t)}));var ih=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(NT(t)){let i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}};function NT(n){let e=n.getComponent();return e?.type==="VERSION"}var rh="@firebase/app",h0="0.10.8";var Ri=new Yn("@firebase/app"),LT="@firebase/app-compat",FT="@firebase/analytics-compat",VT="@firebase/analytics",UT="@firebase/app-check-compat",zT="@firebase/app-check",jT="@firebase/auth",BT="@firebase/auth-compat",WT="@firebase/database",HT="@firebase/database-compat",$T="@firebase/functions",GT="@firebase/functions-compat",qT="@firebase/installations",YT="@firebase/installations-compat",KT="@firebase/messaging",XT="@firebase/messaging-compat",QT="@firebase/performance",JT="@firebase/performance-compat",ZT="@firebase/remote-config",eA="@firebase/remote-config-compat",tA="@firebase/storage",nA="@firebase/storage-compat",iA="@firebase/firestore",rA="@firebase/vertexai-preview",sA="@firebase/firestore-compat",oA="firebase",aA="10.12.5";var sh="[DEFAULT]",cA={[rh]:"fire-core",[LT]:"fire-core-compat",[VT]:"fire-analytics",[FT]:"fire-analytics-compat",[zT]:"fire-app-check",[UT]:"fire-app-check-compat",[jT]:"fire-auth",[BT]:"fire-auth-compat",[WT]:"fire-rtdb",[HT]:"fire-rtdb-compat",[$T]:"fire-fn",[GT]:"fire-fn-compat",[qT]:"fire-iid",[YT]:"fire-iid-compat",[KT]:"fire-fcm",[XT]:"fire-fcm-compat",[QT]:"fire-perf",[JT]:"fire-perf-compat",[ZT]:"fire-rc",[eA]:"fire-rc-compat",[tA]:"fire-gcs",[nA]:"fire-gcs-compat",[iA]:"fire-fst",[sA]:"fire-fst-compat",[rA]:"fire-vertex","fire-js":"fire-js",[oA]:"fire-js-all"};var Ao=new Map,lA=new Map,oh=new Map;function f0(n,e){try{n.container.addComponent(e)}catch(t){Ri.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Xn(n){let e=n.name;if(oh.has(e))return Ri.debug(`There were multiple attempts to register component ${e}.`),!1;oh.set(e,n);for(let t of Ao.values())f0(t,n);for(let t of lA.values())f0(t,n);return!0}function Po(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function en(n){return n.settings!==void 0}var uA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Kn=new In("app","Firebase",uA);var ah=class{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Bt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Kn.create("app-deleted",{appName:this._name})}};var Qn=aA;function uh(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let i=Object.assign({name:sh,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw Kn.create("bad-app-name",{appName:String(r)});if(t||(t=Kd()),!t)throw Kn.create("no-options");let s=Ao.get(r);if(s){if(Lr(t,s.options)&&Lr(i,s.config))return s;throw Kn.create("duplicate-app",{appName:r})}let o=new To(r);for(let c of oh.values())o.addComponent(c);let a=new ah(t,i,o);return Ao.set(r,a),a}function Ur(n=sh){let e=Ao.get(n);if(!e&&n===sh&&Kd())return uh();if(!e)throw Kn.create("no-app",{appName:n});return e}function Sc(){return Array.from(Ao.values())}function Ve(n,e,t){var i;let r=(i=cA[n])!==null&&i!==void 0?i:n;t&&(r+=`-${t}`);let s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ri.warn(a.join(" "));return}Xn(new Bt(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var dA="firebase-heartbeat-database",hA=1,Mo="firebase-heartbeat-store",nh=null;function _0(){return nh||(nh=d0(dA,hA,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Mo)}catch(t){console.warn(t)}}}}).catch(n=>{throw Kn.create("idb-open",{originalErrorMessage:n.message})})),nh}function fA(n){return b(this,null,function*(){try{let t=(yield _0()).transaction(Mo),i=yield t.objectStore(Mo).get(v0(n));return yield t.done,i}catch(e){if(e instanceof Jt)Ri.warn(e.message);else{let t=Kn.create("idb-get",{originalErrorMessage:e?.message});Ri.warn(t.message)}}})}function p0(n,e){return b(this,null,function*(){try{let i=(yield _0()).transaction(Mo,"readwrite");yield i.objectStore(Mo).put(e,v0(n)),yield i.done}catch(t){if(t instanceof Jt)Ri.warn(t.message);else{let i=Kn.create("idb-set",{originalErrorMessage:t?.message});Ri.warn(i.message)}}})}function v0(n){return`${n.name}!${n.options.appId}`}var pA=1024,mA=30*24*60*60*1e3,ch=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new lh(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}triggerHeartbeat(){return b(this,null,function*(){var e,t;let r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=m0();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=mA}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return b(this,null,function*(){var e;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=m0(),{heartbeatsToSend:i,unsentEntries:r}=gA(this._heartbeatsCache.heartbeats),s=bo(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s})}};function m0(){return new Date().toISOString().substring(0,10)}function gA(n,e=pA){let t=[],i=n.slice();for(let r of n){let s=t.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),g0(t)>e){s.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),g0(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}var lh=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return b(this,null,function*(){return J_()?Z_().then(()=>!0).catch(()=>!1):!1})}read(){return b(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield fA(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return b(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return p0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return b(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return p0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return})}};function g0(n){return bo(JSON.stringify({version:2,heartbeats:n})).length}function _A(n){Xn(new Bt("platform-logger",e=>new ih(e),"PRIVATE")),Xn(new Bt("heartbeat",e=>new ch(e),"PRIVATE")),Ve(rh,h0,n),Ve(rh,h0,"esm2017"),Ve("fire-js","")}_A("");var vA="firebase",yA="10.12.5";Ve(vA,yA,"app");var Li=new zs("ANGULARFIRE2_VERSION");function Ic(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Oo=(n,e)=>{let t=e?[e]:Sc(),i=[];return t.forEach(r=>{r.container.getProvider(n).instances.forEach(o=>{i.includes(o)||i.push(o)})}),i},jr=class{constructor(){return Oo(bA)}},bA="app-check";function zr(){}var Ec=class{zone;delegate;constructor(e,t=zm){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,i){let r=this.zone,s=function(o){r.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,t,i)}},dh=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",zr,{},zr,zr)),t.pipe(ye({next:i,complete:i,error:i})).subscribe(e).add(i)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Br=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Ec(Zone.current)),this.insideAngular=t.run(()=>new Ec(Zone.current,Um)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(i){return new(i||n)(xe(Be))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Tc(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function xA(n){return Tc().ngZone.runOutsideAngular(()=>n())}function Ni(n){return Tc().ngZone.run(()=>n())}function CA(n){return wA(Tc())(n)}function wA(n){return function(t){return t=t.lift(new dh(n.ngZone)),t.pipe(Su(n.outsideAngular),wu(n.insideAngular))}}var SA=(n,e)=>function(){let i=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Ni(()=>n.apply(void 0,i))},ht=(n,e)=>function(){let t,i=arguments;for(let s=0;s<arguments.length;s++)typeof i[s]=="function"&&(e&&(t||=Ni(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",zr,{},zr,zr))),i[s]=SA(i[s],t));let r=xA(()=>n.apply(this,i));if(!e)if(r instanceof yu){let s=Tc();return r.pipe(Su(s.outsideAngular),wu(s.insideAngular))}else return Ni(()=>r);return r instanceof yu?r.pipe(CA):r instanceof Promise?Ni(()=>new Promise((s,o)=>r.then(a=>Ni(()=>s(a)),a=>Ni(()=>o(a))))):typeof r=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),r.apply(this,arguments)}:Ni(()=>r)};var Tn=class{constructor(e){return e}},Fi=class{constructor(){return Sc()}};function EA(n){return n&&n.length===1?n[0]:new Tn(Ur())}var hh=new de("angularfire2._apps"),IA={provide:Tn,useFactory:EA,deps:[[new mt,hh]]},TA={provide:Fi,deps:[[new mt,hh]]};function AA(n){return(e,t)=>{let i=t.get(xi);Ve("angularfire",Li.full,"core"),Ve("angularfire",Li.full,"app"),Ve("angular",_g.full,i.toString());let r=e.runOutsideAngular(()=>n(t));return new Tn(r)}}function y0(n,...e){return Kt([IA,TA,{provide:hh,useFactory:AA(n),multi:!0,deps:[Be,xn,Br,...e]}])}var b0=ht(uh,!0);function F0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var V0=F0,U0=new In("auth","Firebase",F0());var Dc=new Yn("@firebase/auth");function MA(n,...e){Dc.logLevel<=le.WARN&&Dc.warn(`Auth (${Qn}): ${n}`,...e)}function Mc(n,...e){Dc.logLevel<=le.ERROR&&Dc.error(`Auth (${Qn}): ${n}`,...e)}function fn(n,...e){throw Nh(n,...e)}function Vi(n,...e){return Nh(n,...e)}function z0(n,e,t){let i=Object.assign(Object.assign({},V0()),{[e]:t});return new In("auth","Firebase",i).create(e,{appName:n.name})}function Pn(n){return z0(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Nh(n,...e){if(typeof n!="string"){let t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return U0.create(n,...e)}function U(n,e,...t){if(!n)throw Nh(e,...t)}function An(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Mc(e),new Error(e)}function Zn(n,e){n||An(e)}function gh(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function PA(){return x0()==="http:"||x0()==="https:"}function x0(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function OA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(PA()||X_()||"connection"in navigator)?navigator.onLine:!0}function kA(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Ui=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Zn(t>e,"Short delay should be less than long delay!"),this.isMobile=Co()||xc()}get(){return OA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Lh(n,e){Zn(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Rc=class{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;An("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;An("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;An("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var DA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var RA=new Ui(3e4,6e4);function ei(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function ti(s,o,a,c){return b(this,arguments,function*(n,e,t,i,r={}){return j0(n,r,()=>b(this,null,function*(){let l={},u={};i&&(e==="GET"?u=i:l={body:JSON.stringify(i)});let d=ki(Object.assign({key:n.config.apiKey},u)).slice(1),h=yield n._getAdditionalHeaders();return h["Content-Type"]="application/json",n.languageCode&&(h["X-Firebase-Locale"]=n.languageCode),Rc.fetch()(B0(n,n.config.apiHost,t,d),Object.assign({method:e,headers:h,referrerPolicy:"no-referrer"},l))}))})}function j0(n,e,t){return b(this,null,function*(){n._canInitEmulator=!1;let i=Object.assign(Object.assign({},DA),e);try{let r=new _h(n),s=yield Promise.race([t(),r.promise]);r.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Ac(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ac(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Ac(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw Ac(n,"user-disabled",o);let u=i[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw z0(n,u,l);fn(n,u)}}catch(r){if(r instanceof Jt)throw r;fn(n,"network-request-failed",{message:String(r)})}})}function Uo(s,o,a,c){return b(this,arguments,function*(n,e,t,i,r={}){let l=yield ti(n,e,t,i,r);return"mfaPendingCredential"in l&&fn(n,"multi-factor-auth-required",{_serverResponse:l}),l})}function B0(n,e,t,i){let r=`${e}${t}?${i}`;return n.config.emulator?Lh(n.config,r):`${n.config.apiScheme}://${r}`}function NA(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var _h=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Vi(this.auth,"network-request-failed")),RA.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Ac(n,e,t){let i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);let r=Vi(n,e,i);return r.customData._tokenResponse=t,r}function C0(n){return n!==void 0&&n.enterprise!==void 0}var vh=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return NA(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function LA(n,e){return b(this,null,function*(){return ti(n,"GET","/v2/recaptchaConfig",ei(n,e))})}function FA(n,e){return b(this,null,function*(){return ti(n,"POST","/v1/accounts:delete",e)})}function W0(n,e){return b(this,null,function*(){return ti(n,"POST","/v1/accounts:lookup",e)})}function ko(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Fh(n,e=!1){return b(this,null,function*(){let t=et(n),i=yield t.getIdToken(e),r=Vh(i);U(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");let s=typeof r.firebase=="object"?r.firebase:void 0,o=s?.sign_in_provider;return{claims:r,token:i,authTime:ko(fh(r.auth_time)),issuedAtTime:ko(fh(r.iat)),expirationTime:ko(fh(r.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function fh(n){return Number(n)*1e3}function Vh(n){let[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return Mc("JWT malformed, contained fewer than 3 sections"),null;try{let r=xo(t);return r?JSON.parse(r):(Mc("Failed to decode base64 JWT payload"),null)}catch(r){return Mc("Caught error parsing JWT payload as JSON",r?.toString()),null}}function w0(n){let e=Vh(n);return U(e,"internal-error"),U(typeof e.exp<"u","internal-error"),U(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Ro(n,e,t=!1){return b(this,null,function*(){if(t)return e;try{return yield e}catch(i){throw i instanceof Jt&&VA(i)&&n.auth.currentUser===n&&(yield n.auth.signOut()),i}})}function VA({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var yh=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;let r=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>b(this,null,function*(){yield this.iteration()}),t)}iteration(){return b(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var No=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ko(this.lastLoginAt),this.creationTime=ko(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Nc(n){return b(this,null,function*(){var e;let t=n.auth,i=yield n.getIdToken(),r=yield Ro(n,W0(t,{idToken:i}));U(r?.users.length,t,"internal-error");let s=r.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?H0(s.providerUserInfo):[],a=UA(n.providerData,o),c=n.isAnonymous,l=!(n.email&&s.passwordHash)&&!a?.length,u=c?l:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new No(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(n,d)})}function Uh(n){return b(this,null,function*(){let e=et(n);yield Nc(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function UA(n,e){return[...n.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function H0(n){return n.map(e=>{var{providerId:t}=e,i=Cu(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}function zA(n,e){return b(this,null,function*(){let t=yield j0(n,{},()=>b(this,null,function*(){let i=ki({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=n.config,o=B0(n,r,"/v1/token",`key=${s}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Rc.fetch()(o,{method:"POST",headers:a,body:i})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function jA(n,e){return b(this,null,function*(){return ti(n,"POST","/v2/accounts:revokeToken",ei(n,e))})}var Do=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){U(e.idToken,"internal-error"),U(typeof e.idToken<"u","internal-error"),U(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):w0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){U(e.length!==0,"internal-error");let t=w0(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return b(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(U(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return b(this,null,function*(){let{accessToken:i,refreshToken:r,expiresIn:s}=yield zA(e,t);this.updateTokensAndExpiration(i,r,Number(s))})}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){let{refreshToken:i,accessToken:r,expirationTime:s}=t,o=new n;return i&&(U(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),r&&(U(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),s&&(U(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return An("not implemented")}};function Jn(n,e){U(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Wr=class n{constructor(e){var{uid:t,auth:i,stsTokenManager:r}=e,s=Cu(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new yh(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new No(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return b(this,null,function*(){let t=yield Ro(this,this.stsTokenManager.getToken(this.auth,e));return U(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return Fh(this,e)}reload(){return Uh(this)}_assign(e){this!==e&&(U(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){U(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return b(this,null,function*(){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&(yield Nc(this)),yield this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)})}delete(){return b(this,null,function*(){if(en(this.auth.app))return Promise.reject(Pn(this.auth));let e=yield this.getIdToken();return yield Ro(this,FA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,r,s,o,a,c,l,u;let d=(i=t.displayName)!==null&&i!==void 0?i:void 0,h=(r=t.email)!==null&&r!==void 0?r:void 0,f=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=t.photoURL)!==null&&o!==void 0?o:void 0,_=(a=t.tenantId)!==null&&a!==void 0?a:void 0,v=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,x=(l=t.createdAt)!==null&&l!==void 0?l:void 0,w=(u=t.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:T,emailVerified:P,isAnonymous:A,providerData:D,stsTokenManager:L}=t;U(T&&L,e,"internal-error");let F=Do.fromJSON(this.name,L);U(typeof T=="string",e,"internal-error"),Jn(d,e.name),Jn(h,e.name),U(typeof P=="boolean",e,"internal-error"),U(typeof A=="boolean",e,"internal-error"),Jn(f,e.name),Jn(p,e.name),Jn(_,e.name),Jn(v,e.name),Jn(x,e.name),Jn(w,e.name);let V=new n({uid:T,auth:e,email:h,emailVerified:P,displayName:d,isAnonymous:A,photoURL:p,phoneNumber:f,tenantId:_,stsTokenManager:F,createdAt:x,lastLoginAt:w});return D&&Array.isArray(D)&&(V.providerData=D.map(X=>Object.assign({},X))),v&&(V._redirectEventId=v),V}static _fromIdTokenResponse(e,t,i=!1){return b(this,null,function*(){let r=new Do;r.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return yield Nc(s),s})}static _fromGetAccountInfoResponse(e,t,i){return b(this,null,function*(){let r=t.users[0];U(r.localId!==void 0,"internal-error");let s=r.providerUserInfo!==void 0?H0(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!s?.length,a=new Do;a.updateFromIdToken(i);let c=new n({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new No(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!s?.length};return Object.assign(c,l),c})}};var S0=new Map;function Mn(n){Zn(n instanceof Function,"Expected a class definition");let e=S0.get(n);return e?(Zn(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,S0.set(n,e),e)}var BA=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return b(this,null,function*(){return!0})}_set(t,i){return b(this,null,function*(){this.storage[t]=i})}_get(t){return b(this,null,function*(){let i=this.storage[t];return i===void 0?null:i})}_remove(t){return b(this,null,function*(){delete this.storage[t]})}_addListener(t,i){}_removeListener(t,i){}}return n.type="NONE",n})(),bh=BA;function Pc(n,e,t){return`firebase:${n}:${e}:${t}`}var Lc=class n{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;let{config:r,name:s}=this.auth;this.fullUserKey=Pc(this.userKey,r.apiKey,s),this.fullPersistenceKey=Pc("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return b(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Wr._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return b(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,i="authUser"){return b(this,null,function*(){if(!t.length)return new n(Mn(bh),e,i);let r=(yield Promise.all(t.map(l=>b(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=r[0]||Mn(bh),o=Pc(i,e.config.apiKey,e.name),a=null;for(let l of t)try{let u=yield l._get(o);if(u){let d=Wr._fromJSON(e,u);l!==s&&(a=d),s=l;break}}catch{}let c=r.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new n(s,e,i):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(t.map(l=>b(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new n(s,e,i))})}};function E0(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(q0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if($0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(K0(e))return"Blackberry";if(X0(e))return"Webos";if(zh(e))return"Safari";if((e.includes("chrome/")||G0(e))&&!e.includes("edge/"))return"Chrome";if(Y0(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function $0(n=Ke()){return/firefox\//i.test(n)}function zh(n=Ke()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function G0(n=Ke()){return/crios\//i.test(n)}function q0(n=Ke()){return/iemobile/i.test(n)}function Y0(n=Ke()){return/android/i.test(n)}function K0(n=Ke()){return/blackberry/i.test(n)}function X0(n=Ke()){return/webos/i.test(n)}function Hc(n=Ke()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function WA(n=Ke()){var e;return Hc(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function HA(){return Q_()&&document.documentMode===10}function Q0(n=Ke()){return Hc(n)||Y0(n)||X0(n)||K0(n)||/windows phone/i.test(n)||q0(n)}function $A(){try{return!!(window&&window!==window.top)}catch{return!1}}function J0(n,e=[]){let t;switch(n){case"Browser":t=E0(Ke());break;case"Worker":t=`${E0(Ke())}-${n}`;break;default:t=n}let i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Qn}/${i}`}var xh=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let i=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});i.onAbort=t,this.queue.push(i);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}runMiddleware(e){return b(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let i of this.queue)yield i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(let r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})}};function GA(t){return b(this,arguments,function*(n,e={}){return ti(n,"GET","/v2/passwordPolicy",ei(n,e))})}var qA=6,Ch=class{constructor(e){var t,i,r,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:qA,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,r,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(i=c.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(r=c.containsLowercaseLetter)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var wh=class{constructor(e,t,i,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Fc(this),this.idTokenSubscription=new Fc(this),this.beforeStateQueue=new xh(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=U0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Mn(t)),this._initializationPromise=this.queue(()=>b(this,null,function*(){var i,r;if(!this._deleted&&(this.persistenceManager=yield Lc.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return b(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return b(this,null,function*(){try{let t=yield W0(this,{idToken:e}),i=yield Wr._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return b(this,null,function*(){var t;if(en(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let i=yield this.assertedPersistence.getCurrentUser(),r=i,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=r?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(r)}catch(o){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return U(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)})}tryRedirectSignIn(e){return b(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return b(this,null,function*(){try{yield Nc(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=kA()}_delete(){return b(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return b(this,null,function*(){if(en(this.app))return Promise.reject(Pn(this));let t=e?et(e):null;return t&&U(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return b(this,null,function*(){if(!this._deleted)return e&&U(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>b(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return b(this,null,function*(){return en(this.app)?Promise.reject(Pn(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return en(this.app)?Promise.reject(Pn(this)):this.queue(()=>b(this,null,function*(){yield this.assertedPersistence.setPersistence(Mn(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return b(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return b(this,null,function*(){let e=yield GA(this),t=new Ch(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new In("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let i=this.onAuthStateChanged(()=>{i(),e()},t)}})}revokeAccessToken(e){return b(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),yield jA(this,i)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return b(this,null,function*(){let i=yield this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return b(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Mn(e)||this._popupRedirectResolver;U(t,this,"argument-error"),this.redirectPersistenceManager=yield Lc.create(this,[Mn(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return b(this,null,function*(){var t,i;return this._isInitialized&&(yield this.queue(()=>b(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return b(this,null,function*(){if(e===this.currentUser)return this.queue(()=>b(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(U(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,i,r);return()=>{o=!0,c()}}else{let c=e.addObserver(t);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return b(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return U(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=J0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return b(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let i=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();i&&(t["X-Firebase-Client"]=i);let r=yield this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t})}_getAppCheckToken(){return b(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&MA(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function ji(n){return et(n)}var Fc=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=i0(t=>this.observer=t)}get next(){return U(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var $c={loadJS(){return b(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function YA(n){$c=n}function Z0(n){return $c.loadJS(n)}function KA(){return $c.recaptchaEnterpriseScript}function XA(){return $c.gapiScript}function ev(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var QA="recaptcha-enterprise",JA="NO_RECAPTCHA",Sh=class{constructor(e){this.type=QA,this.auth=ji(e)}verify(e="verify",t=!1){return b(this,null,function*(){function i(s){return b(this,null,function*(){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise((o,a)=>b(this,null,function*(){LA(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new vh(c);return s.tenantId==null?s._agentRecaptchaConfig=l:s._tenantRecaptchaConfigs[s.tenantId]=l,o(l.siteKey)}}).catch(c=>{a(c)})}))})}function r(s,o,a){let c=window.grecaptcha;C0(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(l=>{o(l)}).catch(()=>{o(JA)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{i(this.auth).then(a=>{if(!t&&C0(window.grecaptcha))r(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=KA();c.length!==0&&(c+=a),Z0(c).then(()=>{r(a,s,o)}).catch(l=>{o(l)})}}).catch(a=>{o(a)})})})}};function I0(n,e,t,i=!1){return b(this,null,function*(){let r=new Sh(n),s;try{s=yield r.verify(t)}catch{s=yield r.verify(t,!0)}let o=Object.assign({},e);return i?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o})}function Eh(n,e,t,i){return b(this,null,function*(){var r;if(!((r=n._getRecaptchaConfig())===null||r===void 0)&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let s=yield I0(n,e,t,t==="getOobCode");return i(n,s)}else return i(n,e).catch(s=>b(this,null,function*(){if(s.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let o=yield I0(n,e,t,t==="getOobCode");return i(n,o)}else return Promise.reject(s)}))})}function jh(n,e){let t=Po(n,"auth");if(t.isInitialized()){let r=t.getImmediate(),s=t.getOptions();if(Lr(s,e??{}))return r;fn(r,"already-initialized")}return t.initialize({options:e})}function ZA(n,e){let t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(Mn);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function Bh(n,e,t){let i=ji(n);U(i._canInitEmulator,i,"emulator-config-failed"),U(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");let r=!!t?.disableWarnings,s=tv(e),{host:o,port:a}=eM(e),c=a===null?"":`:${a}`;i.config.emulator={url:`${s}//${o}${c}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||tM()}function tv(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function eM(n){let e=tv(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let i=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){let s=r[1];return{host:s,port:T0(i.substr(s.length+1))}}else{let[s,o]=i.split(":");return{host:s,port:T0(o)}}}function T0(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function tM(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Lo=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return An("not implemented")}_getIdTokenResponse(e){return An("not implemented")}_linkToIdToken(e,t){return An("not implemented")}_getReauthenticationResolver(e){return An("not implemented")}};function nM(n,e){return b(this,null,function*(){return ti(n,"POST","/v1/accounts:signUp",e)})}function iM(n,e){return b(this,null,function*(){return Uo(n,"POST","/v1/accounts:signInWithPassword",ei(n,e))})}function rM(n,e){return b(this,null,function*(){return Uo(n,"POST","/v1/accounts:signInWithEmailLink",ei(n,e))})}function sM(n,e){return b(this,null,function*(){return Uo(n,"POST","/v1/accounts:signInWithEmailLink",ei(n,e))})}var Fo=class n extends Lo{constructor(e,t,i,r=null){super("password",i),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new n(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return b(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Eh(e,t,"signInWithPassword",iM);case"emailLink":return rM(e,{email:this._email,oobCode:this._password});default:fn(e,"internal-error")}})}_linkToIdToken(e,t){return b(this,null,function*(){switch(this.signInMethod){case"password":let i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Eh(e,i,"signUpPassword",nM);case"emailLink":return sM(e,{idToken:t,email:this._email,oobCode:this._password});default:fn(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function ph(n,e){return b(this,null,function*(){return Uo(n,"POST","/v1/accounts:signInWithIdp",ei(n,e))})}function oM(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function aM(n){let e=Fr(Vr(n)).link,t=e?Fr(Vr(e)).deep_link_id:null,i=Fr(Vr(n)).deep_link_id;return(i?Fr(Vr(i)).link:null)||i||t||e||n}var Vc=class n{constructor(e){var t,i,r,s,o,a;let c=Fr(Vr(e)),l=(t=c.apiKey)!==null&&t!==void 0?t:null,u=(i=c.oobCode)!==null&&i!==void 0?i:null,d=oM((r=c.mode)!==null&&r!==void 0?r:null);U(l&&u&&d,"argument-error"),this.apiKey=l,this.operation=d,this.code=u,this.continueUrl=(s=c.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=c.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let t=aM(e);try{return new n(t)}catch{return null}}};var nv=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,i){return Fo._fromEmailAndPassword(t,i)}static credentialWithLink(t,i){let r=Vc.parseLink(i);return U(r,"argument-error"),Fo._fromEmailAndCode(t,r.code,r.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),Uc=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Ih=class extends Uc{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function cM(n,e){return b(this,null,function*(){return Uo(n,"POST","/v1/accounts:signUp",ei(n,e))})}var Hr=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,i,r=!1){return b(this,null,function*(){let s=yield Wr._fromIdTokenResponse(e,i,r),o=A0(i);return new n({user:s,providerId:o,_tokenResponse:i,operationType:t})})}static _forOperation(e,t,i){return b(this,null,function*(){yield e._updateTokensIfNecessary(i,!0);let r=A0(i);return new n({user:e,providerId:r,_tokenResponse:i,operationType:t})})}};function A0(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var Th=class n extends Jt{constructor(e,t,i,r){var s;super(t.code,t.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,r){return new n(e,t,i,r)}};function iv(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Th._fromErrorAndOperation(n,s,e,i):s})}function lM(n,e,t=!1){return b(this,null,function*(){let i=yield Ro(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Hr._forOperation(n,"link",i)})}function uM(n,e,t=!1){return b(this,null,function*(){let{auth:i}=n;if(en(i.app))return Promise.reject(Pn(i));let r="reauthenticate";try{let s=yield Ro(n,iv(i,r,e,n),t);U(s.idToken,i,"internal-error");let o=Vh(s.idToken);U(o,i,"internal-error");let{sub:a}=o;return U(n.uid===a,i,"user-mismatch"),Hr._forOperation(n,r,s)}catch(s){throw s?.code==="auth/user-not-found"&&fn(i,"user-mismatch"),s}})}function rv(n,e,t=!1){return b(this,null,function*(){if(en(n.app))return Promise.reject(Pn(n));let i="signIn",r=yield iv(n,i,e),s=yield Hr._fromIdTokenResponse(n,i,r);return t||(yield n._updateCurrentUser(s.user)),s})}function Wh(n,e){return b(this,null,function*(){return rv(ji(n),e)})}function sv(n){return b(this,null,function*(){let e=ji(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function Hh(n,e,t){return b(this,null,function*(){if(en(n.app))return Promise.reject(Pn(n));let i=ji(n),o=yield Eh(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",cM).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&sv(n),c}),a=yield Hr._fromIdTokenResponse(i,"signIn",o);return yield i._updateCurrentUser(a.user),a})}function $h(n,e,t){return en(n.app)?Promise.reject(Pn(n)):Wh(et(n),nv.credential(e,t)).catch(i=>b(this,null,function*(){throw i.code==="auth/password-does-not-meet-requirements"&&sv(n),i}))}function Gh(n,e,t,i){return et(n).onIdTokenChanged(e,t,i)}function qh(n,e,t){return et(n).beforeAuthStateChanged(e,t)}function Yh(n){return et(n).signOut()}var zc="__sak";var jc=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(zc,"1"),this.storage.removeItem(zc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};function dM(){let n=Ke();return zh(n)||Hc(n)}var hM=1e3,fM=10,pM=(()=>{class n extends jc{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,i)=>this.onStorageEvent(t,i),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=dM()&&$A(),this.fallbackToPolling=Q0(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let i of Object.keys(this.listeners)){let r=this.storage.getItem(i),s=this.localCache[i];r!==s&&t(i,s,r)}}onStorageEvent(t,i=!1){if(!t.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}let r=t.key;if(i?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){let a=this.storage.getItem(r);if(t.newValue!==a)t.newValue!==null?this.storage.setItem(r,t.newValue):this.storage.removeItem(r);else if(this.localCache[r]===t.newValue&&!i)return}let s=()=>{let a=this.storage.getItem(r);!i&&this.localCache[r]===a||this.notifyListeners(r,a)},o=this.storage.getItem(r);HA()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,fM):s()}notifyListeners(t,i){this.localCache[t]=i;let r=this.listeners[t];if(r)for(let s of Array.from(r))s(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,i,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:i,newValue:r}),!0)})},hM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,i){return b(this,null,function*(){yield bi(n.prototype,this,"_set").call(this,t,i),this.localCache[t]=JSON.stringify(i)})}_get(t){return b(this,null,function*(){let i=yield bi(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(i),i})}_remove(t){return b(this,null,function*(){yield bi(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),ov=pM;var mM=(()=>{class n extends jc{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,i){}_removeListener(t,i){}}return n.type="SESSION",n})(),Kh=mM;function gM(n){return Promise.all(n.map(e=>b(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var _M=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let i=this.receivers.find(s=>s.isListeningto(t));if(i)return i;let r=new n(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}handleEvent(t){return b(this,null,function*(){let i=t,{eventId:r,eventType:s,data:o}=i.data,a=this.handlersMap[s];if(!a?.size)return;i.ports[0].postMessage({status:"ack",eventId:r,eventType:s});let c=Array.from(a).map(u=>b(this,null,function*(){return u(i.origin,o)})),l=yield gM(c);i.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})})}_subscribe(t,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(i)}_unsubscribe(t,i){this.handlersMap[t]&&i&&this.handlersMap[t].delete(i),(!i||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function av(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}var Ah=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,i=50){return b(this,null,function*(){let r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let l=av("",20);r.port1.start();let u=setTimeout(()=>{c(new Error("unsupported_event"))},i);o={messageChannel:r,onMessage(d){let h=d;if(h.data.eventId===l)switch(h.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(h.data.response);break;default:clearTimeout(u),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function hn(){return window}function vM(n){hn().location.href=n}function cv(){return typeof hn().WorkerGlobalScope<"u"&&typeof hn().importScripts=="function"}function yM(){return b(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function bM(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function xM(){return cv()?self:null}var lv="firebaseLocalStorageDb",CM=1,Bc="firebaseLocalStorage",uv="fbase_key",zi=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function Gc(n,e){return n.transaction([Bc],e?"readwrite":"readonly").objectStore(Bc)}function wM(){let n=indexedDB.deleteDatabase(lv);return new zi(n).toPromise()}function Mh(){let n=indexedDB.open(lv,CM);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let i=n.result;try{i.createObjectStore(Bc,{keyPath:uv})}catch(r){t(r)}}),n.addEventListener("success",()=>b(this,null,function*(){let i=n.result;i.objectStoreNames.contains(Bc)?e(i):(i.close(),yield wM(),e(yield Mh()))}))})}function M0(n,e,t){return b(this,null,function*(){let i=Gc(n,!0).put({[uv]:e,value:t});return new zi(i).toPromise()})}function SM(n,e){return b(this,null,function*(){let t=Gc(n,!1).get(e),i=yield new zi(t).toPromise();return i===void 0?null:i.value})}function P0(n,e){let t=Gc(n,!0).delete(e);return new zi(t).toPromise()}var EM=800,IM=3,TM=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return b(this,null,function*(){return this.db?this.db:(this.db=yield Mh(),this.db)})}_withRetries(t){return b(this,null,function*(){let i=0;for(;;)try{let r=yield this._openDb();return yield t(r)}catch(r){if(i++>IM)throw r;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return b(this,null,function*(){return cv()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return b(this,null,function*(){this.receiver=_M._getInstance(xM()),this.receiver._subscribe("keyChanged",(t,i)=>b(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(i.key)}})),this.receiver._subscribe("ping",(t,i)=>b(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return b(this,null,function*(){var t,i;if(this.activeServiceWorker=yield yM(),!this.activeServiceWorker)return;this.sender=new Ah(this.activeServiceWorker);let r=yield this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((i=r[0])===null||i===void 0)&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return b(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||bM()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return b(this,null,function*(){try{if(!indexedDB)return!1;let t=yield Mh();return yield M0(t,zc,"1"),yield P0(t,zc),!0}catch{}return!1})}_withPendingWrite(t){return b(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,i){return b(this,null,function*(){return this._withPendingWrite(()=>b(this,null,function*(){return yield this._withRetries(r=>M0(r,t,i)),this.localCache[t]=i,this.notifyServiceWorker(t)}))})}_get(t){return b(this,null,function*(){let i=yield this._withRetries(r=>SM(r,t));return this.localCache[t]=i,i})}_remove(t){return b(this,null,function*(){return this._withPendingWrite(()=>b(this,null,function*(){return yield this._withRetries(i=>P0(i,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return b(this,null,function*(){let t=yield this._withRetries(s=>{let o=Gc(s,!1).getAll();return new zi(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let i=[],r=new Set;if(t.length!==0)for(let{fbase_key:s,value:o}of t)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),i.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),i.push(s));return i})}notifyListeners(t,i){this.localCache[t]=i;let r=this.listeners[t];if(r)for(let s of Array.from(r))s(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>b(this,null,function*(){return this._poll()}),EM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),dv=TM;var kj=ev("rcb"),Dj=new Ui(3e4,6e4);function AM(n,e){return e?Mn(e):(U(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Vo=class extends Lo{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ph(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ph(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ph(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function MM(n){return rv(n.auth,new Vo(n),n.bypassAuthState)}function PM(n){let{auth:e,user:t}=n;return U(t,e,"internal-error"),uM(t,new Vo(n),n.bypassAuthState)}function OM(n){return b(this,null,function*(){let{auth:e,user:t}=n;return U(t,e,"internal-error"),lM(t,new Vo(n),n.bypassAuthState)})}var Ph=class{constructor(e,t,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>b(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}}))}onAuthEvent(e){return b(this,null,function*(){let{urlResponse:t,sessionId:i,postBody:r,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:t,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return MM;case"linkViaPopup":case"linkViaRedirect":return OM;case"reauthViaPopup":case"reauthViaRedirect":return PM;default:fn(this.auth,"internal-error")}}resolve(e){Zn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Zn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var Rj=new Ui(2e3,1e4);var kM="pendingRedirect",Oc=new Map,Oh=class n extends Ph{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}execute(){return b(this,null,function*(){let e=Oc.get(this.auth._key());if(!e){try{let i=(yield DM(this.resolver,this.auth))?yield bi(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Oc.set(this.auth._key(),e)}return this.bypassAuthState||Oc.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return b(this,null,function*(){if(e.type==="signInViaRedirect")return bi(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,bi(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return b(this,null,function*(){})}cleanUp(){}};function DM(n,e){return b(this,null,function*(){let t=LM(e),i=NM(n);if(!(yield i._isAvailable()))return!1;let r=(yield i._get(t))==="true";return yield i._remove(t),r})}function RM(n,e){Oc.set(n._key(),e)}function NM(n){return Mn(n._redirectPersistence)}function LM(n){return Pc(kM,n.config.apiKey,n.name)}function FM(n,e,t=!1){return b(this,null,function*(){if(en(n.app))return Promise.reject(Pn(n));let i=ji(n),r=AM(i,e),o=yield new Oh(i,r,t).execute();return o&&!t&&(delete o.user._redirectEventId,yield i._persistUserIfCurrent(o.user),yield i._setRedirectUser(null,e)),o})}var VM=10*60*1e3,kh=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!UM(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!hv(e)){let r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(Vi(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=VM&&this.cachedEventUids.clear(),this.cachedEventUids.has(O0(e))}saveEventToCache(e){this.cachedEventUids.add(O0(e)),this.lastProcessedEventTime=Date.now()}};function O0(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function hv({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function UM(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return hv(n);default:return!1}}function zM(t){return b(this,arguments,function*(n,e={}){return ti(n,"GET","/v1/projects",e)})}var jM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,BM=/^https?/;function WM(n){return b(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield zM(n);for(let t of e)try{if(HM(t))return}catch{}fn(n,"unauthorized-domain")})}function HM(n){let e=gh(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===i}if(!BM.test(t))return!1;if(jM.test(n))return i===n;let r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}var $M=new Ui(3e4,6e4);function k0(){let n=hn().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function GM(n){return new Promise((e,t)=>{var i,r,s;function o(){k0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{k0(),t(Vi(n,"network-request-failed"))},timeout:$M.get()})}if(!((r=(i=hn().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((s=hn().gapi)===null||s===void 0)&&s.load)o();else{let a=ev("iframefcb");return hn()[a]=()=>{gapi.load?o():t(Vi(n,"network-request-failed"))},Z0(`${XA()}?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw kc=null,e})}var kc=null;function qM(n){return kc=kc||GM(n),kc}var YM=new Ui(5e3,15e3),KM="__/auth/iframe",XM="emulator/auth/iframe",QM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},JM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ZM(n){let e=n.config;U(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?Lh(e,XM):`https://${n.config.authDomain}/${KM}`,i={apiKey:e.apiKey,appName:n.name,v:Qn},r=JM.get(n.config.apiHost);r&&(i.eid=r);let s=n._getFrameworks();return s.length&&(i.fw=s.join(",")),`${t}?${ki(i).slice(1)}`}function eP(n){return b(this,null,function*(){let e=yield qM(n),t=hn().gapi;return U(t,n,"internal-error"),e.open({where:document.body,url:ZM(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:QM,dontclear:!0},i=>new Promise((r,s)=>b(this,null,function*(){yield i.restyle({setHideOnLeave:!1});let o=Vi(n,"network-request-failed"),a=hn().setTimeout(()=>{s(o)},YM.get());function c(){hn().clearTimeout(a),r(i)}i.ping(c).then(c,()=>{s(o)})})))})}var tP={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},nP=500,iP=600,rP="_blank",sP="http://localhost",Wc=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function oP(n,e,t,i=nP,r=iP){let s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString(),a="",c=Object.assign(Object.assign({},tP),{width:i.toString(),height:r.toString(),top:s,left:o}),l=Ke().toLowerCase();t&&(a=G0(l)?rP:t),$0(l)&&(e=e||sP,c.scrollbars="yes");let u=Object.entries(c).reduce((h,[f,p])=>`${h}${f}=${p},`,"");if(WA(l)&&a!=="_self")return aP(e||"",a),new Wc(null);let d=window.open(e||"",a,u);U(d,n,"popup-blocked");try{d.focus()}catch{}return new Wc(d)}function aP(n,e){let t=document.createElement("a");t.href=n,t.target=e;let i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}var cP="__/auth/handler",lP="emulator/auth/handler",uP=encodeURIComponent("fac");function D0(n,e,t,i,r,s){return b(this,null,function*(){U(n.config.authDomain,n,"auth-domain-config-required"),U(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Qn,eventId:r};if(e instanceof Uc){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",wo(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[u,d]of Object.entries(s||{}))o[u]=d}if(e instanceof Ih){let u=e.getScopes().filter(d=>d!=="");u.length>0&&(o.scopes=u.join(","))}n.tenantId&&(o.tid=n.tenantId);let a=o;for(let u of Object.keys(a))a[u]===void 0&&delete a[u];let c=yield n._getAppCheckToken(),l=c?`#${uP}=${encodeURIComponent(c)}`:"";return`${dP(n)}?${ki(a).slice(1)}${l}`})}function dP({config:n}){return n.emulator?Lh(n,lP):`https://${n.authDomain}/${cP}`}var mh="webStorageSupport",Dh=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Kh,this._completeRedirectFn=FM,this._overrideRedirectResult=RM}_openPopup(e,t,i,r){return b(this,null,function*(){var s;Zn((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield D0(e,t,i,gh(),r);return oP(e,o,av())})}_openRedirect(e,t,i,r){return b(this,null,function*(){yield this._originValidation(e);let s=yield D0(e,t,i,gh(),r);return vM(s),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:r,promise:s}=this.eventManagers[t];return r?Promise.resolve(r):(Zn(s,"If manager is not set, promise should be"),s)}let i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}initAndGetManager(e){return b(this,null,function*(){let t=yield eP(e),i=new kh(e);return t.register("authEvent",r=>(U(r?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(mh,{type:mh},r=>{var s;let o=(s=r?.[0])===null||s===void 0?void 0:s[mh];o!==void 0&&t(!!o),fn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=WM(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Q0()||zh()||Hc()}},fv=Dh;var R0="@firebase/auth",N0="1.7.6";var Rh=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return b(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){U(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function hP(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function fP(n){Xn(new Bt("auth",(e,{options:t})=>{let i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;U(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});let c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:J0(n)},l=new wh(i,r,s,c);return ZA(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Xn(new Bt("auth-internal",e=>{let t=ji(e.getProvider("auth").getImmediate());return(i=>new Rh(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ve(R0,N0,hP(n)),Ve(R0,N0,"esm2017")}var pP=5*60,mP=Xd("authIdTokenMaxAge")||pP,L0=null,gP=n=>e=>b(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>mP)return;let r=t?.token;L0!==r&&(L0=r,yield fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});function Xh(n=Ur()){let e=Po(n,"auth");if(e.isInitialized())return e.getImmediate();let t=jh(n,{popupRedirectResolver:fv,persistence:[dv,ov,Kh]}),i=Xd("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(i,location.origin);if(location.origin===s.origin){let o=gP(s.toString());qh(t,o,()=>o(t.currentUser)),Gh(t,a=>o(a))}}let r=Yd("auth");return r&&Bh(t,`http://${r}`),t}function _P(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}YA({loadJS(n){return new Promise((e,t)=>{let i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=r=>{let s=Vi("internal-error");s.customData=r,t(s)},i.type="text/javascript",i.charset="UTF-8",_P().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});fP("Browser");var pv="auth",Bi=class{constructor(e){return e}},zo=class{constructor(){return Oo(pv)}};var Qh=new de("angularfire2.auth-instances");function aO(n,e){let t=Ic(pv,n,e);return t&&new Bi(t)}function cO(n){return(e,t)=>{let i=e.runOutsideAngular(()=>n(t));return new Bi(i)}}var lO={provide:zo,deps:[[new mt,Qh]]},uO={provide:Bi,useFactory:aO,deps:[[new mt,Qh],Tn]};function mv(n,...e){return Ve("angularfire",Li.full,"auth"),Kt([uO,lO,{provide:Qh,useFactory:cO(n),multi:!0,deps:[Be,xn,Br,Fi,[new mt,jr],...e]}])}var gv=ht(Hh,!0);var _v=ht(Xh,!0);var vv=ht($h,!0);var yv=ht(Yh,!0);var qc=(()=>{class n{auth=I(Bi);signUp(t,i){return je(gv(this.auth,t,i))}signIn(t,i){return je(vv(this.auth,t,i))}signOut(){return je(yv(this.auth))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var bv=(()=>{class n{demo={accounts:{main:[{name:"Savings",balance:5e3},{name:"Budget",balance:1500},{name:"Goal",balance:3e3,target:5e3}],income:[{name:"Salary",balance:3e3},{name:"Freelance",balance:1500},{name:"Investment Returns",balance:1e3},{name:"Rental Income",balance:1200},{name:"Side Business",balance:800},{name:"Dividends",balance:600}],expense:[{name:"Rent",balance:1200},{name:"Groceries",balance:400},{name:"Utilities",balance:250},{name:"Transportation",balance:150},{name:"Insurance",balance:300},{name:"Entertainment",balance:200}]},transactions:{transfer:[{source:"Savings",amount:500,receiver:"Budget"},{source:"Budget",amount:200,receiver:"Savings"},{source:"Budget",amount:300,receiver:"Goal"},{source:"Goal",amount:100,receiver:"Savings"},{source:"Savings",amount:1e3,receiver:"Goal"},{source:"Budget",amount:500,receiver:"Savings"}],income:[{source:"Salary",amount:3e3,receiver:"Savings"},{source:"Freelance",amount:1500,receiver:"Budget"},{source:"Investment Returns",amount:1e3,receiver:"Goal"},{source:"Rental Income",amount:1200,receiver:"Savings"},{source:"Side Business",amount:800,receiver:"Budget"},{source:"Dividends",amount:600,receiver:"Goal"}],expense:[{source:"Budget",amount:1200,receiver:"Rent"},{source:"Savings",amount:400,receiver:"Groceries"},{source:"Budget",amount:250,receiver:"Utilities"},{source:"Savings",amount:150,receiver:"Transportation"},{source:"Budget",amount:300,receiver:"Insurance"},{source:"Savings",amount:200,receiver:"Entertainment"}]}};demoSubject=new ze(this.demo);getData(){return this.demoSubject.asObservable()}onCreateAccount(t,i){let r=this.demoSubject.value;t==="income"?r.accounts.income.push(i):r.accounts.expense.push(i),this.demoSubject.next(r)}onEditAccount(t,i,r){let s=this.demoSubject.value,o="";t==="main"?s.accounts.main[i]=r:t==="income"?(o=s.accounts.income[i].name,s.accounts.income[i]=r,s.transactions.income.map(a=>{a.source===o&&(a.source=r.name)})):(o=s.accounts.expense[i].name,s.accounts.expense[i]=r,s.transactions.expense.map(a=>{a.receiver===o&&(a.receiver=r.name)})),this.demoSubject.next(s)}onDeleteAccount(t,i){let r=this.demoSubject.value,s="";t==="income"?(s=r.accounts.income[i].name,r.accounts.income.splice(i,1),r.transactions.income=r.transactions.income.filter(o=>o.source!=s)):(s=r.accounts.expense[i].name,r.accounts.expense.splice(i,1),r.transactions.expense=r.transactions.expense.filter(o=>o.receiver!=s)),this.demoSubject.next(r)}onEditBalance(t,i,r){let s=this.demoSubject.value;t==="main"?s.accounts.main[i].balance=r:t==="income"?s.accounts.income[i].balance=r:s.accounts.expense[i].balance=r,this.demoSubject.next(s)}onCreateTransaction(t,i){let r=this.demoSubject.value;t==="transfer"?r.transactions.transfer.push(i):t==="income"?r.transactions.income.push(i):r.transactions.expense.push(i),this.demoSubject.next(r)}onDeleteTransaction(t,i){let r=this.demoSubject.value;t==="transfer"?r.transactions.transfer.splice(i,1):t==="income"?r.transactions.income.splice(i,1):r.transactions.expense.splice(i,1),this.demoSubject.next(r)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var xv="@firebase/database",Cv="1.0.7";var sp="";function dO(n){sp=n}var of=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Fe(t))}get(e){let t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:Nr(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var af=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return Zt(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var ty=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){let e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new of(e)}}catch{}return new af},Hi=ty("localStorage"),cf=ty("sessionStorage");var qr=new Yn("@firebase/database"),hO=function(){let n=1;return function(){return n++}}(),ny=function(n){let e=r0(n),t=new yc;t.update(e);let i=t.digest();return bc.encodeByteArray(i)},ra=function(...n){let e="";for(let t=0;t<n.length;t++){let i=n[t];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=ra.apply(null,i):typeof i=="object"?e+=Fe(i):e+=i,e+=" "}return e},$i=null,wv=!0,fO=function(n,e){S(!e||n===!0||n===!1,"Can't turn on custom loggers persistently."),n===!0?(qr.logLevel=le.VERBOSE,$i=qr.log.bind(qr),e&&cf.set("logging_enabled",!0)):typeof n=="function"?$i=n:($i=null,cf.remove("logging_enabled"))},Xe=function(...n){if(wv===!0&&(wv=!1,$i===null&&cf.get("logging_enabled")===!0&&fO(!0)),$i){let e=ra.apply(null,n);$i(e)}},sa=function(n){return function(...e){Xe(n,...e)}},lf=function(...n){let e="FIREBASE INTERNAL ERROR: "+ra(...n);qr.error(e)},On=function(...n){let e=`FIREBASE FATAL ERROR: ${ra(...n)}`;throw qr.error(e),new Error(e)},ft=function(...n){let e="FIREBASE WARNING: "+ra(...n);qr.warn(e)},pO=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&ft("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},op=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},mO=function(n){if(un()||document.readyState==="complete")n();else{let e=!1,t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},Xr="[MIN_NAME]",Gi="[MAX_NAME]",Ki=function(n,e){if(n===e)return 0;if(n===Xr||e===Gi)return-1;if(e===Xr||n===Gi)return 1;{let t=Sv(n),i=Sv(e);return t!==null?i!==null?t-i===0?n.length-e.length:t-i:-1:i!==null?1:n<e?-1:1}},gO=function(n,e){return n===e?0:n<e?-1:1},jo=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+Fe(e))},ap=function(n){if(typeof n!="object"||n===null)return Fe(n);let e=[];for(let i in n)e.push(i);e.sort();let t="{";for(let i=0;i<e.length;i++)i!==0&&(t+=","),t+=Fe(e[i]),t+=":",t+=ap(n[e[i]]);return t+="}",t},iy=function(n,e){let t=n.length;if(t<=e)return[n];let i=[];for(let r=0;r<t;r+=e)r+e>t?i.push(n.substring(r,t)):i.push(n.substring(r,r+e));return i};function Qe(n,e){for(let t in n)n.hasOwnProperty(t)&&e(t,n[t])}var ry=function(n){S(!op(n),"Invalid JSON number");let e=11,t=52,i=(1<<e-1)-1,r,s,o,a,c;n===0?(s=0,o=0,r=1/n===-1/0?1:0):(r=n<0,n=Math.abs(n),n>=Math.pow(2,1-i)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),i),s=a+i,o=Math.round(n*Math.pow(2,t-a)-Math.pow(2,t))):(s=0,o=Math.round(n/Math.pow(2,1-i-t))));let l=[];for(c=t;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);l.push(r?1:0),l.reverse();let u=l.join(""),d="";for(c=0;c<64;c+=8){let h=parseInt(u.substr(c,8),2).toString(16);h.length===1&&(h="0"+h),d=d+h}return d.toLowerCase()},_O=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},vO=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function yO(n,e){let t="Unknown Error";n==="too_big"?t="The data requested exceeds the maximum size that can be accessed with a single request.":n==="permission_denied"?t="Client doesn't have permission to access the desired data.":n==="unavailable"&&(t="The service is unavailable");let i=new Error(n+" at "+e._path.toString()+": "+t);return i.code=n.toUpperCase(),i}var bO=new RegExp("^-?(0*)\\d{1,10}$"),xO=-2147483648,CO=2147483647,Sv=function(n){if(bO.test(n)){let e=Number(n);if(e>=xO&&e<=CO)return e}return null},rs=function(n){try{n()}catch(e){setTimeout(()=>{let t=e.stack||"";throw ft("Exception was thrown by user callback.",t),e},Math.floor(0))}},wO=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Go=function(n,e){let t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};var uf=class{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){ft(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var df=class{constructor(e,t,i){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(Xe("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ft(e)}},qo=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}n.OWNER="owner";return n})(),Kc="5",sy="v",oy="s",ay="r",cy="f",ly=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,uy="ls",dy="p",hf="ac",hy="websocket",fy="long_polling";var Xc=class{constructor(e,t,i,r,s=!1,o="",a=!1,c=!1){this.secure=t,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Hi.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Hi.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}};function SO(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function py(n,e,t){S(typeof e=="string","typeof type must == string"),S(typeof t=="object","typeof params must == object");let i;if(e===hy)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===fy)i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);SO(n)&&(t.ns=n.namespace);let r=[];return Qe(t,(s,o)=>{r.push(s+"="+o)}),i+r.join("&")}var ff=class{constructor(){this.counters_={}}incrementCounter(e,t=1){Zt(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return G_(this.counters_)}};var Jh={},Zh={};function cp(n){let e=n.toString();return Jh[e]||(Jh[e]=new ff),Jh[e]}function EO(n,e){let t=n.toString();return Zh[t]||(Zh[t]=e()),Zh[t]}var pf=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){let i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&rs(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var Ev="start",IO="close",TO="pLPCommand",AO="pRTLPCB",my="id",gy="pw",_y="ser",MO="cb",PO="seg",OO="ts",kO="d",DO="dframe",vy=1870,yy=30,RO=vy-yy,NO=25e3,LO=3e4,mf=class n{constructor(e,t,i,r,s,o,a){this.connId=e,this.repoInfo=t,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=sa(e),this.stats_=cp(t),this.urlFn=c=>(this.appCheckToken&&(c[hf]=this.appCheckToken),py(t,fy,c))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new pf(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(LO)),mO(()=>{if(this.isClosed_)return;this.scriptTagHolder=new gf((...s)=>{let[o,a,c,l,u]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===Ev)this.id=a,this.password=c;else if(o===IO)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{let[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);let i={};i[Ev]="t",i[_y]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[MO]=this.scriptTagHolder.uniqueCallbackIdentifier),i[sy]=Kc,this.transportSessionId&&(i[oy]=this.transportSessionId),this.lastSessionId&&(i[uy]=this.lastSessionId),this.applicationId&&(i[dy]=this.applicationId),this.appCheckToken&&(i[hf]=this.appCheckToken),typeof location<"u"&&location.hostname&&ly.test(location.hostname)&&(i[ay]=cy);let r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){n.forceAllow_=!0}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){return un()?!1:n.forceAllow_?!0:!n.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!_O()&&!vO()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let t=Fe(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);let i=Gd(t),r=iy(i,RO);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(un())return;this.myDisconnFrame=document.createElement("iframe");let i={};i[DO]="t",i[my]=e,i[gy]=t,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let t=Fe(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}},gf=class n{constructor(e,t,i,r){if(this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,un())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=hO(),window[TO+this.uniqueCallbackIdentifier]=e,window[AO+this.uniqueCallbackIdentifier]=t,this.myIFrame=n.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');let o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Xe("frame writing exception"),a.stack&&Xe(a.stack),Xe(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Xe("No IE domain setting required")}catch{let i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[my]=this.myID,e[gy]=this.myPW,e[_y]=this.currentSerial;let t=this.urlFn(e),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+yy+i.length<=vy;){let o=this.pendingSegs.shift();i=i+"&"+PO+r+"="+o.seg+"&"+OO+r+"="+o.ts+"&"+kO+r+"="+o.d,r++}return t=t+i,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,i){this.pendingSegs.push({seg:e,ts:t,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);let i=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(i,Math.floor(NO)),s=()=>{clearTimeout(r),i()};this.addTag(e,s)}addTag(e,t){un()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;let i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){let r=i.readyState;(!r||r==="loaded"||r==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),t())},i.onerror=()=>{Xe("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}};var FO=16384,VO=45e3,Qc=null;typeof MozWebSocket<"u"?Qc=MozWebSocket:typeof WebSocket<"u"&&(Qc=WebSocket);var Bo=(()=>{class n{constructor(t,i,r,s,o,a,c){this.connId=t,this.applicationId=r,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=sa(this.connId),this.stats_=cp(i),this.connURL=n.connectionURL_(i,a,c,s,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(t,i,r,s,o){let a={};return a[sy]=Kc,!un()&&typeof location<"u"&&location.hostname&&ly.test(location.hostname)&&(a[ay]=cy),i&&(a[oy]=i),r&&(a[uy]=r),s&&(a[hf]=s),o&&(a[dy]=o),py(t,hy,a)}open(t,i){this.onDisconnect=i,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Hi.set("previous_websocket_failure",!0);try{let r;if(un()){let s=this.nodeAdmin?"AdminNode":"Node";r={headers:{"User-Agent":`Firebase/${Kc}/${sp}/${process.platform}/${s}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,a=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(r.proxy={origin:a})}this.mySock=new Qc(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");let s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");let s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){let i=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(i);r&&r.length>1&&parseFloat(r[1])<4.4&&(t=!0)}return!t&&Qc!==null&&!n.forceDisallow_}static previouslyFailed(){return Hi.isInMemoryStorage||Hi.get("previous_websocket_failure")===!0}markConnectionHealthy(){Hi.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){let i=this.frames.join("");this.frames=null;let r=Nr(i);this.onMessage(r)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(S(this.frames===null,"We already have a frame buffer"),t.length<=6){let i=Number(t);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;let i=t.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(i);else{let r=this.extractFrameCount_(i);r!==null&&this.appendFrame_(r)}}send(t){this.resetKeepAlive();let i=Fe(t);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);let r=iy(i,FO);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(VO))}sendString_(t){try{this.mySock.send(t)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4;return n})(),UO=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[mf,Bo]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){let i=Bo&&Bo.isAvailable(),r=i&&!Bo.previouslyFailed();if(t.webSocketOnly&&(i||ft("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Bo];else{let s=this.transports_=[];for(let o of n.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}n.globalTransportInitialized_=!1;return n})(),zO=6e4,jO=5e3,BO=10*1024,WO=100*1024,ef="t",Iv="d",HO="s",Tv="r",$O="e",Av="o",Mv="a",Pv="n",Ov="p",GO="h",_f=class{constructor(e,t,i,r,s,o,a,c,l,u){this.id=e,this.repoInfo_=t,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=sa("c:"+this.id+":"),this.transportManager_=new UO(t),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,i)},Math.floor(0));let r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=Go(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>WO?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>BO?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){let t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(ef in e){let t=e[ef];t===Mv?this.upgradeIfSecondaryHealthy_():t===Tv?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===Av&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let t=jo("t",e),i=jo("d",e);if(t==="c")this.onSecondaryControl_(i);else if(t==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Ov,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Mv,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Pv,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let t=jo("t",e),i=jo("d",e);t==="c"?this.onControl_(i):t==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let t=jo(ef,e);if(Iv in e){let i=e[Iv];if(t===GO){let r=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if(t===Pv){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===HO?this.onConnectionShutdown_(i):t===Tv?this.onReset_(i):t===$O?lf("Server Error: "+i):t===Av?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):lf("Unknown control packet command: "+t)}}onHandshake_(e){let t=e.ts,i=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),Kc!==i&&ft("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,i),Go(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(zO))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Go(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(jO))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Ov,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Hi.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var Jc=class{put(e,t,i,r){}merge(e,t,i,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,i){}onDisconnectMerge(e,t,i){}onDisconnectCancel(e,t){}reportStats(e){}};var Zc=class{constructor(e){this.allowedEvents_=e,this.listeners_={},S(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){let i=[...this.listeners_[e]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,t)}}on(e,t,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:i});let r=this.getInitialEvent(e);r&&t.apply(i,r)}off(e,t,i){this.validateEventType_(e);let r=this.listeners_[e]||[];for(let s=0;s<r.length;s++)if(r[s].callback===t&&(!i||i===r[s].context)){r.splice(s,1);return}}validateEventType_(e){S(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}};var el=class n extends Zc{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Co()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new n}getInitialEvent(e){return S(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var kv=32,Dv=768,oe=class{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}};function ie(){return new oe("")}function Y(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function ri(n){return n.pieces_.length-n.pieceNum_}function pe(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new oe(n.pieces_,e)}function lp(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function qO(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function Qo(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function by(n){if(n.pieceNum_>=n.pieces_.length)return null;let e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new oe(e,0)}function Pe(n,e){let t=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)t.push(n.pieces_[i]);if(e instanceof oe)for(let i=e.pieceNum_;i<e.pieces_.length;i++)t.push(e.pieces_[i]);else{let i=e.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&t.push(i[r])}return new oe(t,0)}function J(n){return n.pieceNum_>=n.pieces_.length}function St(n,e){let t=Y(n),i=Y(e);if(t===null)return e;if(t===i)return St(pe(n),pe(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function YO(n,e){let t=Qo(n,0),i=Qo(e,0);for(let r=0;r<t.length&&r<i.length;r++){let s=Ki(t[r],i[r]);if(s!==0)return s}return t.length===i.length?0:t.length<i.length?-1:1}function up(n,e){if(ri(n)!==ri(e))return!1;for(let t=n.pieceNum_,i=e.pieceNum_;t<=n.pieces_.length;t++,i++)if(n.pieces_[t]!==e.pieces_[i])return!1;return!0}function Wt(n,e){let t=n.pieceNum_,i=e.pieceNum_;if(ri(n)>ri(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[i])return!1;++t,++i}return!0}var vf=class{constructor(e,t){this.errorPrefix_=t,this.parts_=Qo(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=Io(this.parts_[i]);xy(this)}};function KO(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=Io(e),xy(n)}function XO(n){let e=n.parts_.pop();n.byteLength_-=Io(e),n.parts_.length>0&&(n.byteLength_-=1)}function xy(n){if(n.byteLength_>Dv)throw new Error(n.errorPrefix_+"has a key path longer than "+Dv+" bytes ("+n.byteLength_+").");if(n.parts_.length>kv)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+kv+") or object contains a cycle "+Wi(n))}function Wi(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}var yf=class n extends Zc{constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{let i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new n}getInitialEvent(e){return S(e==="visible","Unknown event type: "+e),[this.visible_]}};var Wo=1e3,QO=60*5*1e3,Rv=30*1e3,JO=1.3,ZO=3e4,ek="server_kill",Nv=3,dp=(()=>{class n extends Jc{constructor(t,i,r,s,o,a,c,l){if(super(),this.repoInfo_=t,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=l,this.id=n.nextPersistentConnectionId_++,this.log_=sa("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Wo,this.maxReconnectDelay_=QO,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!un())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");yf.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&el.getInstance().on("online",this.onOnline_,this)}sendRequest(t,i,r){let s=++this.requestNumber_,o={r:s,a:t,b:i};this.log_(Fe(o)),S(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),r&&(this.requestCBHash_[s]=r)}get(t){this.initConnection_();let i=new En,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?i.resolve(c):i.reject(c)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),i.promise}listen(t,i,r,s){this.initConnection_();let o=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),S(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),S(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");let c={onComplete:s,hashFn:i,query:t,tag:r};this.listens.get(a).set(o,c),this.connected_&&this.sendListen_(c)}sendGet_(t){let i=this.outstandingGets_[t];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(t){let i=t.query,r=i._path.toString(),s=i._queryIdentifier;this.log_("Listen on "+r+" for "+s);let o={p:r},a="q";t.tag&&(o.q=i._queryObject,o.t=t.tag),o.h=t.hashFn(),this.sendRequest(a,o,c=>{let l=c.d,u=c.s;n.warnOnListenWarnings_(l,i),(this.listens.get(r)&&this.listens.get(r).get(s))===t&&(this.log_("listen response",c),u!=="ok"&&this.removeListen_(r,s),t.onComplete&&t.onComplete(u,l))})}static warnOnListenWarnings_(t,i){if(t&&typeof t=="object"&&Zt(t,"w")){let r=Oi(t,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){let s='".indexOn": "'+i._queryParams.getIndex().toString()+'"',o=i._path.toString();ft(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||n0(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Rv)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let t=this.authToken_,i=t0(t)?"auth":"gauth",r={cred:t};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(i,r,s=>{let o=s.s,a=s.d||"error";this.authToken_===t&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{let i=t.s,r=t.d||"error";i==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(t,i){let r=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),S(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,t._queryObject,i)}sendUnlisten_(t,i,r,s){this.log_("Unlisten on "+t+" for "+i);let o={p:t},a="n";s&&(o.q=r,o.t=s),this.sendRequest(a,o)}onDisconnectPut(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:i,onComplete:r})}onDisconnectMerge(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:i,onComplete:r})}onDisconnectCancel(t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(t,i,r,s){let o={p:i,d:r};this.log_("onDisconnect "+t,o),this.sendRequest(t,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(t,i,r,s){this.putInternal("p",t,i,r,s)}merge(t,i,r,s){this.putInternal("m",t,i,r,s)}putInternal(t,i,r,s,o){this.initConnection_();let a={p:i,d:r};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:t,request:a,onComplete:s}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+i)}sendPut_(t){let i=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(i,r,o=>{this.log_(i+" response",o),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(t){if(this.connected_){let i={c:t};this.log_("reportStats",i),this.sendRequest("s",i,r=>{if(r.s!=="ok"){let o=r.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+Fe(t));let i=t.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,i){this.log_("handleServerMessage",t,i),t==="d"?this.onDataUpdate_(i.p,i.d,!1,i.t):t==="m"?this.onDataUpdate_(i.p,i.d,!0,i.t):t==="c"?this.onListenRevoked_(i.p,i.q):t==="ac"?this.onAuthRevoked_(i.s,i.d):t==="apc"?this.onAppCheckRevoked_(i.s,i.d):t==="sd"?this.onSecurityDebugPacket_(i):lf("Unrecognized action received from server: "+Fe(t)+`
Are you using the latest client?`)}onReady_(t,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){S(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Wo,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Wo,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>ZO&&(this.reconnectDelay_=Wo),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let t=new Date().getTime()-this.lastConnectionAttemptTime_,i=Math.max(0,this.reconnectDelay_-t);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*JO)}this.onConnectStatus_(!1)}establishConnection_(){return b(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let t=this.onDataMessage_.bind(this),i=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,a=!1,c=null,l=function(){c?c.close():(a=!0,r())},u=function(h){S(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(h)};this.realtime_={close:l,sendRequest:u};let d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[h,f]=yield Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);a?Xe("getToken() completed but was canceled"):(Xe("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=f&&f.token,c=new _f(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,i,r,p=>{ft(p+" ("+this.repoInfo_.toString()+")"),this.interrupt(ek)},o))}catch(h){this.log_("Failed to get token: "+h),a||(this.repoInfo_.nodeAdmin&&ft(h),l())}}})}interrupt(t){Xe("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Xe("Resuming connection for reason: "+t),delete this.interruptReasons_[t],wo(this.interruptReasons_)&&(this.reconnectDelay_=Wo,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){let i=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){let i=this.outstandingPuts_[t];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,i){let r;i?r=i.map(o=>ap(o)).join("$"):r="default";let s=this.removeListen_(t,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,i){let r=new oe(t).toString(),s;if(this.listens.has(r)){let o=this.listens.get(r);s=o.get(i),o.delete(i),o.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(t,i){Xe("Auth token revoked: "+t+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Nv&&(this.reconnectDelay_=Rv,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,i){Xe("App check token revoked: "+t+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Nv&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let t of this.listens.values())for(let i of t.values())this.sendListen_(i);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){let t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){let t={},i="js";un()&&(this.repoInfo_.nodeAdmin?i="admin_node":i="node"),t["sdk."+i+"."+sp.replace(/\./g,"-")]=1,Co()?t["framework.cordova"]=1:xc()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){let t=el.getInstance().currentlyOnline();return wo(this.interruptReasons_)&&t}}n.nextPersistentConnectionId_=0,n.nextConnectionId_=0;return n})(),K=class n{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new n(e,t)}};var Qr=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){let i=new K(Xr,e),r=new K(Xr,t);return this.compare(i,r)!==0}minPost(){return K.MIN}};var Yc,tl=class extends Qr{static get __EMPTY_NODE(){return Yc}static set __EMPTY_NODE(e){Yc=e}compare(e,t){return Ki(e.name,t.name)}isDefinedOn(e){throw Pi("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return K.MIN}maxPost(){return new K(Gi,Yc)}makePost(e,t){return S(typeof e=="string","KeyIndex indexValue must always be a string."),new K(e,Yc)}toString(){return".key"}},Yr=new tl;var Gr=class{constructor(e,t,i,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=t?i(e.key,t):1,r&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},tn=(()=>{class n{constructor(t,i,r,s,o){this.key=t,this.value=i,this.color=r??n.RED,this.left=s??Ht.EMPTY_NODE,this.right=o??Ht.EMPTY_NODE}copy(t,i,r,s,o){return new n(t??this.key,i??this.value,r??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,r){let s=this,o=r(t,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(t,i,r),null):o===0?s=s.copy(null,i,null,null,null):s=s.copy(null,null,null,null,s.right.insert(t,i,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ht.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,i){let r,s;if(r=this,i(t,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(t,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),i(t,r.key)===0){if(r.right.isEmpty())return Ht.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){let t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){let t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){let t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth_(){let t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})(),bf=class{copy(e,t,i,r,s){return this}insert(e,t,i){return new tn(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},Ht=class n{constructor(e,t=n.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new n(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,tn.BLACK,null,null))}remove(e){return new n(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,tn.BLACK,null,null))}get(e){let t,i=this.root_;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),t===0)return i.value;t<0?i=i.left:t>0&&(i=i.right)}return null}getPredecessorKey(e){let t,i=this.root_,r=null;for(;!i.isEmpty();)if(t=this.comparator_(e,i.key),t===0){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else t<0?i=i.left:t>0&&(r=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Gr(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Gr(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Gr(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Gr(this.root_,null,this.comparator_,!0,e)}};Ht.EMPTY_NODE=new bf;function tk(n,e){return Ki(n.name,e.name)}function hp(n,e){return Ki(n,e)}var xf;function nk(n){xf=n}var Cy=function(n){return typeof n=="number"?"number:"+ry(n):"string:"+n},wy=function(n){if(n.isLeafNode()){let e=n.val();S(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Zt(e,".sv"),"Priority must be a string or number.")}else S(n===xf||n.isEmpty(),"priority of unexpected type.");S(n===xf||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var Lv,Jr=(()=>{class n{constructor(t,i=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=i,this.lazyHash_=null,S(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),wy(this.priorityNode_)}static set __childrenNodeConstructor(t){Lv=t}static get __childrenNodeConstructor(){return Lv}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return J(t)?this:Y(t)===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,i){return null}updateImmediateChild(t,i){return t===".priority"?this.updatePriority(i):i.isEmpty()&&t!==".priority"?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,i).updatePriority(this.priorityNode_)}updateChild(t,i){let r=Y(t);return r===null?i:i.isEmpty()&&r!==".priority"?this:(S(r!==".priority"||ri(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(pe(t),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,i){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+Cy(this.priorityNode_.val())+":");let i=typeof this.value_;t+=i+":",i==="number"?t+=ry(this.value_):t+=this.value_,this.lazyHash_=ny(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:(S(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){let i=typeof t.value_,r=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(i),o=n.VALUE_TYPE_ORDER.indexOf(r);return S(s>=0,"Unknown leaf type: "+i),S(o>=0,"Unknown leaf type: "+r),s===o?r==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){let i=t;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}else return!1}}n.VALUE_TYPE_ORDER=["object","boolean","number","string"];return n})(),Sy,Ey;function ik(n){Sy=n}function rk(n){Ey=n}var Cf=class extends Qr{compare(e,t){let i=e.node.getPriority(),r=t.node.getPriority(),s=i.compareTo(r);return s===0?Ki(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return K.MIN}maxPost(){return new K(Gi,new Jr("[PRIORITY-POST]",Ey))}makePost(e,t){let i=Sy(e);return new K(t,new Jr("[PRIORITY-POST]",i))}toString(){return".priority"}},Oe=new Cf;var sk=Math.log(2),wf=class{constructor(e){let t=s=>parseInt(Math.log(s)/sk,10),i=s=>parseInt(Array(s+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;let r=i(this.count);this.bits_=e+1&r}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},nl=function(n,e,t,i){n.sort(e);let r=function(c,l){let u=l-c,d,h;if(u===0)return null;if(u===1)return d=n[c],h=t?t(d):d,new tn(h,d.node,tn.BLACK,null,null);{let f=parseInt(u/2,10)+c,p=r(c,f),_=r(f+1,l);return d=n[f],h=t?t(d):d,new tn(h,d.node,tn.BLACK,p,_)}},s=function(c){let l=null,u=null,d=n.length,h=function(p,_){let v=d-p,x=d;d-=p;let w=r(v+1,x),T=n[v],P=t?t(T):T;f(new tn(P,T.node,_,null,w))},f=function(p){l?(l.left=p,l=p):(u=p,l=p)};for(let p=0;p<c.count;++p){let _=c.nextBitIsOne(),v=Math.pow(2,c.count-(p+1));_?h(v,tn.BLACK):(h(v,tn.BLACK),h(v,tn.RED))}return u},o=new wf(n.length),a=s(o);return new Ht(i||e,a)};var tf,$r={},Zr=class n{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return S($r&&Oe,"ChildrenNode.ts has not been loaded"),tf=tf||new n({".priority":$r},{".priority":Oe}),tf}get(e){let t=Oi(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Ht?t:null}hasIndex(e){return Zt(this.indexSet_,e.toString())}addIndex(e,t){S(e!==Yr,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let i=[],r=!1,s=t.getIterator(K.Wrap),o=s.getNext();for(;o;)r=r||e.isDefinedOn(o.node),i.push(o),o=s.getNext();let a;r?a=nl(i,e.getCompare()):a=$r;let c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;let u=Object.assign({},this.indexes_);return u[c]=a,new n(u,l)}addToIndexes(e,t){let i=So(this.indexes_,(r,s)=>{let o=Oi(this.indexSet_,s);if(S(o,"Missing index implementation for "+s),r===$r)if(o.isDefinedOn(e.node)){let a=[],c=t.getIterator(K.Wrap),l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),nl(a,o.getCompare())}else return $r;else{let a=t.get(e.name),c=r;return a&&(c=c.remove(new K(e.name,a))),c.insert(e,e.node)}});return new n(i,this.indexSet_)}removeFromIndexes(e,t){let i=So(this.indexes_,r=>{if(r===$r)return r;{let s=t.get(e.name);return s?r.remove(new K(e.name,s)):r}});return new n(i,this.indexSet_)}};var Ho,W=(()=>{class n{constructor(t,i,r){this.children_=t,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&wy(this.priorityNode_),this.children_.isEmpty()&&S(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Ho||(Ho=new n(new Ht(hp),null,Zr.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ho}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{let i=this.children_.get(t);return i===null?Ho:i}}getChild(t){let i=Y(t);return i===null?this:this.getImmediateChild(i).getChild(pe(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,i){if(S(i,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(i);{let r=new K(t,i),s,o;i.isEmpty()?(s=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(t,i),o=this.indexMap_.addToIndexes(r,this.children_));let a=s.isEmpty()?Ho:this.priorityNode_;return new n(s,a,o)}}updateChild(t,i){let r=Y(t);if(r===null)return i;{S(Y(t)!==".priority"||ri(t)===1,".priority must be the last token in a path");let s=this.getImmediateChild(r).updateChild(pe(t),i);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;let i={},r=0,s=0,o=!0;if(this.forEachChild(Oe,(a,c)=>{i[a]=c.val(t),r++,o&&n.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!t&&o&&s<2*r){let a=[];for(let c in i)a[c]=i[c];return a}else return t&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+Cy(this.getPriority().val())+":"),this.forEachChild(Oe,(i,r)=>{let s=r.hash();s!==""&&(t+=":"+i+":"+s)}),this.lazyHash_=t===""?"":ny(t)}return this.lazyHash_}getPredecessorChildName(t,i,r){let s=this.resolveIndex_(r);if(s){let o=s.getPredecessorKey(new K(t,i));return o?o.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){let i=this.resolveIndex_(t);if(i){let r=i.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(t){let i=this.getFirstChildName(t);return i?new K(i,this.children_.get(i)):null}getLastChildName(t){let i=this.resolveIndex_(t);if(i){let r=i.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(t){let i=this.getLastChildName(t);return i?new K(i,this.children_.get(i)):null}forEachChild(t,i){let r=this.resolveIndex_(t);return r?r.inorderTraversal(s=>i(s.name,s.node)):this.children_.inorderTraversal(i)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,i){let r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(t,s=>s);{let s=this.children_.getIteratorFrom(t.name,K.Wrap),o=s.peek();for(;o!=null&&i.compare(o,t)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,i){let r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(t,s=>s);{let s=this.children_.getReverseIteratorFrom(t.name,K.Wrap),o=s.peek();for(;o!=null&&i.compare(o,t)>0;)s.getNext(),o=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===oa?-1:0}withIndex(t){if(t===Yr||this.indexMap_.hasIndex(t))return this;{let i=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,i)}}isIndexed(t){return t===Yr||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{let i=t;if(this.getPriority().equals(i.getPriority()))if(this.children_.count()===i.children_.count()){let r=this.getIterator(Oe),s=i.getIterator(Oe),o=r.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=r.getNext(),a=s.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(t){return t===Yr?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})(),Sf=class extends W{constructor(){super(new Ht(hp),W.EMPTY_NODE,Zr.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return W.EMPTY_NODE}isEmpty(){return!1}},oa=new Sf;Object.defineProperties(K,{MIN:{value:new K(Xr,W.EMPTY_NODE)},MAX:{value:new K(Gi,oa)}});tl.__EMPTY_NODE=W.EMPTY_NODE;Jr.__childrenNodeConstructor=W;nk(oa);rk(oa);var ok=!0;function He(n,e=null){if(n===null)return W.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),S(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){let t=n;return new Jr(t,He(e))}if(!(n instanceof Array)&&ok){let t=[],i=!1;if(Qe(n,(o,a)=>{if(o.substring(0,1)!=="."){let c=He(a);c.isEmpty()||(i=i||!c.getPriority().isEmpty(),t.push(new K(o,c)))}}),t.length===0)return W.EMPTY_NODE;let s=nl(t,tk,o=>o.name,hp);if(i){let o=nl(t,Oe.getCompare());return new W(s,He(e),new Zr({".priority":o},{".priority":Oe}))}else return new W(s,He(e),Zr.Default)}else{let t=W.EMPTY_NODE;return Qe(n,(i,r)=>{if(Zt(n,i)&&i.substring(0,1)!=="."){let s=He(r);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(i,s))}}),t.updatePriority(He(e))}}ik(He);var Ef=class extends Qr{constructor(e){super(),this.indexPath_=e,S(!J(e)&&Y(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){let i=this.extractChild(e.node),r=this.extractChild(t.node),s=i.compareTo(r);return s===0?Ki(e.name,t.name):s}makePost(e,t){let i=He(e),r=W.EMPTY_NODE.updateChild(this.indexPath_,i);return new K(t,r)}maxPost(){let e=W.EMPTY_NODE.updateChild(this.indexPath_,oa);return new K(Gi,e)}toString(){return Qo(this.indexPath_,0).join("/")}};var If=class extends Qr{compare(e,t){let i=e.node.compareTo(t.node);return i===0?Ki(e.name,t.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return K.MIN}maxPost(){return K.MAX}makePost(e,t){let i=He(e);return new K(t,i)}toString(){return".value"}},ak=new If;function Iy(n){return{type:"value",snapshotNode:n}}function es(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function Jo(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Zo(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function ck(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}var ea=class{constructor(e){this.index_=e}updateChild(e,t,i,r,s,o){S(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");let a=e.getImmediateChild(t);return a.getChild(r).equals(i.getChild(r))&&a.isEmpty()===i.isEmpty()||(o!=null&&(i.isEmpty()?e.hasChild(t)?o.trackChildChange(Jo(t,a)):S(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(es(t,i)):o.trackChildChange(Zo(t,i,a))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(t,i).withIndex(this.index_)}updateFullNode(e,t,i){return i!=null&&(e.isLeafNode()||e.forEachChild(Oe,(r,s)=>{t.hasChild(r)||i.trackChildChange(Jo(r,s))}),t.isLeafNode()||t.forEachChild(Oe,(r,s)=>{if(e.hasChild(r)){let o=e.getImmediateChild(r);o.equals(s)||i.trackChildChange(Zo(r,s,o))}else i.trackChildChange(es(r,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?W.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var il=class n{constructor(e){this.indexedFilter_=new ea(e.getIndex()),this.index_=e.getIndex(),this.startPost_=n.getStartPost_(e),this.endPost_=n.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){let t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,i=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&i}updateChild(e,t,i,r,s,o){return this.matches(new K(t,i))||(i=W.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,i,r,s,o)}updateFullNode(e,t,i){t.isLeafNode()&&(t=W.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority(W.EMPTY_NODE);let s=this;return t.forEachChild(Oe,(o,a)=>{s.matches(new K(o,a))||(r=r.updateImmediateChild(o,W.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){let t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){let t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}else return e.getIndex().maxPost()}};var Tf=class{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{let i=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=t=>{let i=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new il(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,i,r,s,o){return this.rangedFilter_.matches(new K(t,i))||(i=W.EMPTY_NODE),e.getImmediateChild(t).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,i,r,s,o):this.fullLimitUpdateChild_(e,t,i,s,o)}updateFullNode(e,t,i){let r;if(t.isLeafNode()||t.isEmpty())r=W.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<t.numChildren()&&t.isIndexed(this.index_)){r=W.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){let a=s.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))r=r.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{r=t.withIndex(this.index_),r=r.updatePriority(W.EMPTY_NODE);let s;this.reverse_?s=r.getReverseIterator(this.index_):s=r.getIterator(this.index_);let o=0;for(;s.hasNext();){let a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:r=r.updateImmediateChild(a.name,W.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,i,r,s){let o;if(this.reverse_){let d=this.index_.getCompare();o=(h,f)=>d(f,h)}else o=this.index_.getCompare();let a=e;S(a.numChildren()===this.limit_,"");let c=new K(t,i),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(c);if(a.hasChild(t)){let d=a.getImmediateChild(t),h=r.getChildAfterChild(this.index_,l,this.reverse_);for(;h!=null&&(h.name===t||a.hasChild(h.name));)h=r.getChildAfterChild(this.index_,h,this.reverse_);let f=h==null?1:o(h,c);if(u&&!i.isEmpty()&&f>=0)return s?.trackChildChange(Zo(t,i,d)),a.updateImmediateChild(t,i);{s?.trackChildChange(Jo(t,d));let _=a.updateImmediateChild(t,W.EMPTY_NODE);return h!=null&&this.rangedFilter_.matches(h)?(s?.trackChildChange(es(h.name,h.node)),_.updateImmediateChild(h.name,h.node)):_}}else return i.isEmpty()?e:u&&o(l,c)>=0?(s!=null&&(s.trackChildChange(Jo(l.name,l.node)),s.trackChildChange(es(t,i))),a.updateImmediateChild(t,i).updateImmediateChild(l.name,W.EMPTY_NODE)):e}};var Af=class n{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Oe}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return S(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return S(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Xr}hasEnd(){return this.endSet_}getIndexEndValue(){return S(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return S(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Gi}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return S(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Oe}copy(){let e=new n;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function lk(n){return n.loadsAllData()?new ea(n.getIndex()):n.hasLimit()?new Tf(n):new il(n)}function Fv(n){let e={};if(n.isDefault())return e;let t;if(n.index_===Oe?t="$priority":n.index_===ak?t="$value":n.index_===Yr?t="$key":(S(n.index_ instanceof Ef,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=Fe(t),n.startSet_){let i=n.startAfterSet_?"startAfter":"startAt";e[i]=Fe(n.indexStartValue_),n.startNameSet_&&(e[i]+=","+Fe(n.indexStartName_))}if(n.endSet_){let i=n.endBeforeSet_?"endBefore":"endAt";e[i]=Fe(n.indexEndValue_),n.endNameSet_&&(e[i]+=","+Fe(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function Vv(n){let e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==Oe&&(e.i=n.index_.toString()),e}var Mf=class n extends Jc{constructor(e,t,i,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=sa("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(S(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,i,r){let s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);let o=n.getListenId_(e,i),a={};this.listens_[o]=a;let c=Fv(e._queryParams);this.restRequest_(s+".json",c,(l,u)=>{let d=u;if(l===404&&(d=null,l=null),l===null&&this.onDataUpdate_(s,d,!1,i),Oi(this.listens_,o)===a){let h;l?l===401?h="permission_denied":h="rest_error:"+l:h="ok",r(h,null)}})}unlisten(e,t){let i=n.getListenId_(e,t);delete this.listens_[i]}get(e){let t=Fv(e._queryParams),i=e._path.toString(),r=new En;return this.restRequest_(i+".json",t,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(i,a,!1,null),r.resolve(a)):r.reject(new Error(a))}),r.promise}refreshAuthToken(e){}restRequest_(e,t={},i){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(t.auth=r.accessToken),s&&s.token&&(t.ac=s.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+ki(t);this.log_("Sending REST request for "+o);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(i&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=Nr(a.responseText)}catch{ft("Failed to parse JSON response for "+o+": "+a.responseText)}i(null,c)}else a.status!==401&&a.status!==404&&ft("Got unsuccessful REST response for "+o+" Status: "+a.status),i(a.status);i=null}},a.open("GET",o,!0),a.send()})}};var Pf=class{constructor(){this.rootNode_=W.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}};function rl(){return{value:null,children:new Map}}function Ty(n,e,t){if(J(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{let i=Y(e);n.children.has(i)||n.children.set(i,rl());let r=n.children.get(i);e=pe(e),Ty(r,e,t)}}function Of(n,e,t){n.value!==null?t(e,n.value):uk(n,(i,r)=>{let s=new oe(e.toString()+"/"+i);Of(r,s,t)})}function uk(n,e){n.children.forEach((t,i)=>{e(i,t)})}var kf=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Qe(this.last_,(i,r)=>{t[i]=t[i]-r}),this.last_=e,t}};var Uv=10*1e3,dk=30*1e3,hk=5*60*1e3,Df=class{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new kf(e);let i=Uv+(dk-Uv)*Math.random();Go(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){let e=this.statsListener_.get(),t={},i=!1;Qe(e,(r,s)=>{s>0&&Zt(this.statsToReport_,r)&&(t[r]=s,i=!0)}),i&&this.server_.reportStats(t),Go(this.reportStats_.bind(this),Math.floor(Math.random()*2*hk))}};var pn=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(pn||{});function fp(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function pp(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function mp(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}var Rf=class n{constructor(e,t,i){this.path=e,this.affectedTree=t,this.revert=i,this.type=pn.ACK_USER_WRITE,this.source=fp()}operationForChild(e){if(J(this.path)){if(this.affectedTree.value!=null)return S(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let t=this.affectedTree.subtree(new oe(e));return new n(ie(),t,this.revert)}}else return S(Y(this.path)===e,"operationForChild called for unrelated child."),new n(pe(this.path),this.affectedTree,this.revert)}};var sl=class n{constructor(e,t){this.source=e,this.path=t,this.type=pn.LISTEN_COMPLETE}operationForChild(e){return J(this.path)?new n(this.source,ie()):new n(this.source,pe(this.path))}};var ts=class n{constructor(e,t,i){this.source=e,this.path=t,this.snap=i,this.type=pn.OVERWRITE}operationForChild(e){return J(this.path)?new n(this.source,ie(),this.snap.getImmediateChild(e)):new n(this.source,pe(this.path),this.snap)}};var ta=class n{constructor(e,t,i){this.source=e,this.path=t,this.children=i,this.type=pn.MERGE}operationForChild(e){if(J(this.path)){let t=this.children.subtree(new oe(e));return t.isEmpty()?null:t.value?new ts(this.source,ie(),t.value):new n(this.source,ie(),t)}else return S(Y(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new n(this.source,pe(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var kn=class{constructor(e,t,i){this.node_=e,this.fullyInitialized_=t,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(J(e))return this.isFullyInitialized()&&!this.filtered_;let t=Y(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};var Nf=class{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}};function fk(n,e,t,i){let r=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&n.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(ck(o.childName,o.snapshotNode))}),$o(n,r,"child_removed",e,i,t),$o(n,r,"child_added",e,i,t),$o(n,r,"child_moved",s,i,t),$o(n,r,"child_changed",e,i,t),$o(n,r,"value",e,i,t),r}function $o(n,e,t,i,r,s){let o=i.filter(a=>a.type===t);o.sort((a,c)=>mk(n,a,c)),o.forEach(a=>{let c=pk(n,a,s);r.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,n.query_))})})}function pk(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function mk(n,e,t){if(e.childName==null||t.childName==null)throw Pi("Should only compare child_ events.");let i=new K(e.childName,e.snapshotNode),r=new K(t.childName,t.snapshotNode);return n.index_.compare(i,r)}function gl(n,e){return{eventCache:n,serverCache:e}}function Yo(n,e,t,i){return gl(new kn(e,t,i),n.serverCache)}function Ay(n,e,t,i){return gl(n.eventCache,new kn(e,t,i))}function Lf(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function qi(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}var nf,gk=()=>(nf||(nf=new Ht(gO)),nf),pt=class n{constructor(e,t=gk()){this.value=e,this.children=t}static fromObject(e){let t=new n(null);return Qe(e,(i,r)=>{t=t.set(new oe(i),r)}),t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:ie(),value:this.value};if(J(e))return null;{let i=Y(e),r=this.children.get(i);if(r!==null){let s=r.findRootMostMatchingPathAndValue(pe(e),t);return s!=null?{path:Pe(new oe(i),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(J(e))return this;{let t=Y(e),i=this.children.get(t);return i!==null?i.subtree(pe(e)):new n(null)}}set(e,t){if(J(e))return new n(t,this.children);{let i=Y(e),s=(this.children.get(i)||new n(null)).set(pe(e),t),o=this.children.insert(i,s);return new n(this.value,o)}}remove(e){if(J(e))return this.children.isEmpty()?new n(null):new n(null,this.children);{let t=Y(e),i=this.children.get(t);if(i){let r=i.remove(pe(e)),s;return r.isEmpty()?s=this.children.remove(t):s=this.children.insert(t,r),this.value===null&&s.isEmpty()?new n(null):new n(this.value,s)}else return this}}get(e){if(J(e))return this.value;{let t=Y(e),i=this.children.get(t);return i?i.get(pe(e)):null}}setTree(e,t){if(J(e))return t;{let i=Y(e),s=(this.children.get(i)||new n(null)).setTree(pe(e),t),o;return s.isEmpty()?o=this.children.remove(i):o=this.children.insert(i,s),new n(this.value,o)}}fold(e){return this.fold_(ie(),e)}fold_(e,t){let i={};return this.children.inorderTraversal((r,s)=>{i[r]=s.fold_(Pe(e,r),t)}),t(e,this.value,i)}findOnPath(e,t){return this.findOnPath_(e,ie(),t)}findOnPath_(e,t,i){let r=this.value?i(t,this.value):!1;if(r)return r;if(J(e))return null;{let s=Y(e),o=this.children.get(s);return o?o.findOnPath_(pe(e),Pe(t,s),i):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,ie(),t)}foreachOnPath_(e,t,i){if(J(e))return this;{this.value&&i(t,this.value);let r=Y(e),s=this.children.get(r);return s?s.foreachOnPath_(pe(e),Pe(t,r),i):new n(null)}}foreach(e){this.foreach_(ie(),e)}foreach_(e,t){this.children.inorderTraversal((i,r)=>{r.foreach_(Pe(e,i),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,i)=>{i.value&&e(t,i.value)})}};var nn=class n{constructor(e){this.writeTree_=e}static empty(){return new n(new pt(null))}};function Ko(n,e,t){if(J(e))return new nn(new pt(t));{let i=n.writeTree_.findRootMostValueAndPath(e);if(i!=null){let r=i.path,s=i.value,o=St(r,e);return s=s.updateChild(o,t),new nn(n.writeTree_.set(r,s))}else{let r=new pt(t),s=n.writeTree_.setTree(e,r);return new nn(s)}}}function Ff(n,e,t){let i=n;return Qe(t,(r,s)=>{i=Ko(i,Pe(e,r),s)}),i}function zv(n,e){if(J(e))return nn.empty();{let t=n.writeTree_.setTree(e,new pt(null));return new nn(t)}}function Vf(n,e){return Xi(n,e)!=null}function Xi(n,e){let t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(St(t.path,e)):null}function jv(n){let e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(Oe,(i,r)=>{e.push(new K(i,r))}):n.writeTree_.children.inorderTraversal((i,r)=>{r.value!=null&&e.push(new K(i,r.value))}),e}function ii(n,e){if(J(e))return n;{let t=Xi(n,e);return t!=null?new nn(new pt(t)):new nn(n.writeTree_.subtree(e))}}function Uf(n){return n.writeTree_.isEmpty()}function ns(n,e){return My(ie(),n.writeTree_,e)}function My(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let i=null;return e.children.inorderTraversal((r,s)=>{r===".priority"?(S(s.value!==null,"Priority writes must always be leaf nodes"),i=s.value):t=My(Pe(n,r),s,t)}),!t.getChild(n).isEmpty()&&i!==null&&(t=t.updateChild(Pe(n,".priority"),i)),t}}function gp(n,e){return Dy(e,n)}function _k(n,e,t,i,r){S(i>n.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),n.allWrites.push({path:e,snap:t,writeId:i,visible:r}),r&&(n.visibleWrites=Ko(n.visibleWrites,e,t)),n.lastWriteId=i}function vk(n,e,t,i){S(i>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:i,visible:!0}),n.visibleWrites=Ff(n.visibleWrites,e,t),n.lastWriteId=i}function yk(n,e){for(let t=0;t<n.allWrites.length;t++){let i=n.allWrites[t];if(i.writeId===e)return i}return null}function bk(n,e){let t=n.allWrites.findIndex(a=>a.writeId===e);S(t>=0,"removeWrite called with nonexistent writeId.");let i=n.allWrites[t];n.allWrites.splice(t,1);let r=i.visible,s=!1,o=n.allWrites.length-1;for(;r&&o>=0;){let a=n.allWrites[o];a.visible&&(o>=t&&xk(a,i.path)?r=!1:Wt(i.path,a.path)&&(s=!0)),o--}if(r){if(s)return Ck(n),!0;if(i.snap)n.visibleWrites=zv(n.visibleWrites,i.path);else{let a=i.children;Qe(a,c=>{n.visibleWrites=zv(n.visibleWrites,Pe(i.path,c))})}return!0}else return!1}function xk(n,e){if(n.snap)return Wt(n.path,e);for(let t in n.children)if(n.children.hasOwnProperty(t)&&Wt(Pe(n.path,t),e))return!0;return!1}function Ck(n){n.visibleWrites=Py(n.allWrites,wk,ie()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function wk(n){return n.visible}function Py(n,e,t){let i=nn.empty();for(let r=0;r<n.length;++r){let s=n[r];if(e(s)){let o=s.path,a;if(s.snap)Wt(t,o)?(a=St(t,o),i=Ko(i,a,s.snap)):Wt(o,t)&&(a=St(o,t),i=Ko(i,ie(),s.snap.getChild(a)));else if(s.children){if(Wt(t,o))a=St(t,o),i=Ff(i,a,s.children);else if(Wt(o,t))if(a=St(o,t),J(a))i=Ff(i,ie(),s.children);else{let c=Oi(s.children,Y(a));if(c){let l=c.getChild(pe(a));i=Ko(i,ie(),l)}}}else throw Pi("WriteRecord should have .snap or .children")}}return i}function Oy(n,e,t,i,r){if(!i&&!r){let s=Xi(n.visibleWrites,e);if(s!=null)return s;{let o=ii(n.visibleWrites,e);if(Uf(o))return t;if(t==null&&!Vf(o,ie()))return null;{let a=t||W.EMPTY_NODE;return ns(o,a)}}}else{let s=ii(n.visibleWrites,e);if(!r&&Uf(s))return t;if(!r&&t==null&&!Vf(s,ie()))return null;{let o=function(l){return(l.visible||r)&&(!i||!~i.indexOf(l.writeId))&&(Wt(l.path,e)||Wt(e,l.path))},a=Py(n.allWrites,o,e),c=t||W.EMPTY_NODE;return ns(a,c)}}}function Sk(n,e,t){let i=W.EMPTY_NODE,r=Xi(n.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(Oe,(s,o)=>{i=i.updateImmediateChild(s,o)}),i;if(t){let s=ii(n.visibleWrites,e);return t.forEachChild(Oe,(o,a)=>{let c=ns(ii(s,new oe(o)),a);i=i.updateImmediateChild(o,c)}),jv(s).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}else{let s=ii(n.visibleWrites,e);return jv(s).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}}function Ek(n,e,t,i,r){S(i||r,"Either existingEventSnap or existingServerSnap must exist");let s=Pe(e,t);if(Vf(n.visibleWrites,s))return null;{let o=ii(n.visibleWrites,s);return Uf(o)?r.getChild(t):ns(o,r.getChild(t))}}function Ik(n,e,t,i){let r=Pe(e,t),s=Xi(n.visibleWrites,r);if(s!=null)return s;if(i.isCompleteForChild(t)){let o=ii(n.visibleWrites,r);return ns(o,i.getNode().getImmediateChild(t))}else return null}function Tk(n,e){return Xi(n.visibleWrites,e)}function Ak(n,e,t,i,r,s,o){let a,c=ii(n.visibleWrites,e),l=Xi(c,ie());if(l!=null)a=l;else if(t!=null)a=ns(c,t);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){let u=[],d=o.getCompare(),h=s?a.getReverseIteratorFrom(i,o):a.getIteratorFrom(i,o),f=h.getNext();for(;f&&u.length<r;)d(f,i)!==0&&u.push(f),f=h.getNext();return u}else return[]}function Mk(){return{visibleWrites:nn.empty(),allWrites:[],lastWriteId:-1}}function ol(n,e,t,i){return Oy(n.writeTree,n.treePath,e,t,i)}function _p(n,e){return Sk(n.writeTree,n.treePath,e)}function Bv(n,e,t,i){return Ek(n.writeTree,n.treePath,e,t,i)}function al(n,e){return Tk(n.writeTree,Pe(n.treePath,e))}function Pk(n,e,t,i,r,s){return Ak(n.writeTree,n.treePath,e,t,i,r,s)}function vp(n,e,t){return Ik(n.writeTree,n.treePath,e,t)}function ky(n,e){return Dy(Pe(n.treePath,e),n.writeTree)}function Dy(n,e){return{treePath:n,writeTree:e}}var zf=class{constructor(){this.changeMap=new Map}trackChildChange(e){let t=e.type,i=e.childName;S(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),S(i!==".priority","Only non-priority child changes can be tracked.");let r=this.changeMap.get(i);if(r){let s=r.type;if(t==="child_added"&&s==="child_removed")this.changeMap.set(i,Zo(i,e.snapshotNode,r.snapshotNode));else if(t==="child_removed"&&s==="child_added")this.changeMap.delete(i);else if(t==="child_removed"&&s==="child_changed")this.changeMap.set(i,Jo(i,r.oldSnap));else if(t==="child_changed"&&s==="child_added")this.changeMap.set(i,es(i,e.snapshotNode));else if(t==="child_changed"&&s==="child_changed")this.changeMap.set(i,Zo(i,e.snapshotNode,r.oldSnap));else throw Pi("Illegal combination of changes: "+e+" occurred after "+r)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}};var jf=class{getCompleteChild(e){return null}getChildAfterChild(e,t,i){return null}},Ry=new jf,na=class{constructor(e,t,i=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=i}getCompleteChild(e){let t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{let i=this.optCompleteServerCache_!=null?new kn(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return vp(this.writes_,e,i)}}getChildAfterChild(e,t,i){let r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:qi(this.viewCache_),s=Pk(this.writes_,r,t,1,i,e);return s.length===0?null:s[0]}};function Ok(n){return{filter:n}}function kk(n,e){S(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),S(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function Dk(n,e,t,i,r){let s=new zf,o,a;if(t.type===pn.OVERWRITE){let l=t;l.source.fromUser?o=Bf(n,e,l.path,l.snap,i,r,s):(S(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!J(l.path),o=cl(n,e,l.path,l.snap,i,r,a,s))}else if(t.type===pn.MERGE){let l=t;l.source.fromUser?o=Nk(n,e,l.path,l.children,i,r,s):(S(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),o=Wf(n,e,l.path,l.children,i,r,a,s))}else if(t.type===pn.ACK_USER_WRITE){let l=t;l.revert?o=Vk(n,e,l.path,i,r,s):o=Lk(n,e,l.path,l.affectedTree,i,r,s)}else if(t.type===pn.LISTEN_COMPLETE)o=Fk(n,e,t.path,i,s);else throw Pi("Unknown operation type: "+t.type);let c=s.getChanges();return Rk(e,o,c),{viewCache:o,changes:c}}function Rk(n,e,t){let i=e.eventCache;if(i.isFullyInitialized()){let r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=Lf(n);(t.length>0||!n.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&t.push(Iy(Lf(e)))}}function Ny(n,e,t,i,r,s){let o=e.eventCache;if(al(i,t)!=null)return e;{let a,c;if(J(t))if(S(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let l=qi(e),u=l instanceof W?l:W.EMPTY_NODE,d=_p(i,u);a=n.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{let l=ol(i,qi(e));a=n.filter.updateFullNode(e.eventCache.getNode(),l,s)}else{let l=Y(t);if(l===".priority"){S(ri(t)===1,"Can't have a priority with additional path components");let u=o.getNode();c=e.serverCache.getNode();let d=Bv(i,t,u,c);d!=null?a=n.filter.updatePriority(u,d):a=o.getNode()}else{let u=pe(t),d;if(o.isCompleteForChild(l)){c=e.serverCache.getNode();let h=Bv(i,t,o.getNode(),c);h!=null?d=o.getNode().getImmediateChild(l).updateChild(u,h):d=o.getNode().getImmediateChild(l)}else d=vp(i,l,e.serverCache);d!=null?a=n.filter.updateChild(o.getNode(),l,d,u,r,s):a=o.getNode()}}return Yo(e,a,o.isFullyInitialized()||J(t),n.filter.filtersNodes())}}function cl(n,e,t,i,r,s,o,a){let c=e.serverCache,l,u=o?n.filter:n.filter.getIndexedFilter();if(J(t))l=u.updateFullNode(c.getNode(),i,null);else if(u.filtersNodes()&&!c.isFiltered()){let f=c.getNode().updateChild(t,i);l=u.updateFullNode(c.getNode(),f,null)}else{let f=Y(t);if(!c.isCompleteForPath(t)&&ri(t)>1)return e;let p=pe(t),v=c.getNode().getImmediateChild(f).updateChild(p,i);f===".priority"?l=u.updatePriority(c.getNode(),v):l=u.updateChild(c.getNode(),f,v,p,Ry,null)}let d=Ay(e,l,c.isFullyInitialized()||J(t),u.filtersNodes()),h=new na(r,d,s);return Ny(n,d,t,r,h,a)}function Bf(n,e,t,i,r,s,o){let a=e.eventCache,c,l,u=new na(r,e,s);if(J(t))l=n.filter.updateFullNode(e.eventCache.getNode(),i,o),c=Yo(e,l,!0,n.filter.filtersNodes());else{let d=Y(t);if(d===".priority")l=n.filter.updatePriority(e.eventCache.getNode(),i),c=Yo(e,l,a.isFullyInitialized(),a.isFiltered());else{let h=pe(t),f=a.getNode().getImmediateChild(d),p;if(J(h))p=i;else{let _=u.getCompleteChild(d);_!=null?lp(h)===".priority"&&_.getChild(by(h)).isEmpty()?p=_:p=_.updateChild(h,i):p=W.EMPTY_NODE}if(f.equals(p))c=e;else{let _=n.filter.updateChild(a.getNode(),d,p,h,u,o);c=Yo(e,_,a.isFullyInitialized(),n.filter.filtersNodes())}}}return c}function Wv(n,e){return n.eventCache.isCompleteForChild(e)}function Nk(n,e,t,i,r,s,o){let a=e;return i.foreach((c,l)=>{let u=Pe(t,c);Wv(e,Y(u))&&(a=Bf(n,a,u,l,r,s,o))}),i.foreach((c,l)=>{let u=Pe(t,c);Wv(e,Y(u))||(a=Bf(n,a,u,l,r,s,o))}),a}function Hv(n,e,t){return t.foreach((i,r)=>{e=e.updateChild(i,r)}),e}function Wf(n,e,t,i,r,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;J(t)?l=i:l=new pt(null).setTree(t,i);let u=e.serverCache.getNode();return l.children.inorderTraversal((d,h)=>{if(u.hasChild(d)){let f=e.serverCache.getNode().getImmediateChild(d),p=Hv(n,f,h);c=cl(n,c,new oe(d),p,r,s,o,a)}}),l.children.inorderTraversal((d,h)=>{let f=!e.serverCache.isCompleteForChild(d)&&h.value===null;if(!u.hasChild(d)&&!f){let p=e.serverCache.getNode().getImmediateChild(d),_=Hv(n,p,h);c=cl(n,c,new oe(d),_,r,s,o,a)}}),c}function Lk(n,e,t,i,r,s,o){if(al(r,t)!=null)return e;let a=e.serverCache.isFiltered(),c=e.serverCache;if(i.value!=null){if(J(t)&&c.isFullyInitialized()||c.isCompleteForPath(t))return cl(n,e,t,c.getNode().getChild(t),r,s,a,o);if(J(t)){let l=new pt(null);return c.getNode().forEachChild(Yr,(u,d)=>{l=l.set(new oe(u),d)}),Wf(n,e,t,l,r,s,a,o)}else return e}else{let l=new pt(null);return i.foreach((u,d)=>{let h=Pe(t,u);c.isCompleteForPath(h)&&(l=l.set(u,c.getNode().getChild(h)))}),Wf(n,e,t,l,r,s,a,o)}}function Fk(n,e,t,i,r){let s=e.serverCache,o=Ay(e,s.getNode(),s.isFullyInitialized()||J(t),s.isFiltered());return Ny(n,o,t,i,Ry,r)}function Vk(n,e,t,i,r,s){let o;if(al(i,t)!=null)return e;{let a=new na(i,e,r),c=e.eventCache.getNode(),l;if(J(t)||Y(t)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=ol(i,qi(e));else{let d=e.serverCache.getNode();S(d instanceof W,"serverChildren would be complete if leaf node"),u=_p(i,d)}u=u,l=n.filter.updateFullNode(c,u,s)}else{let u=Y(t),d=vp(i,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=c.getImmediateChild(u)),d!=null?l=n.filter.updateChild(c,u,d,pe(t),a,s):e.eventCache.getNode().hasChild(u)?l=n.filter.updateChild(c,u,W.EMPTY_NODE,pe(t),a,s):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=ol(i,qi(e)),o.isLeafNode()&&(l=n.filter.updateFullNode(l,o,s)))}return o=e.serverCache.isFullyInitialized()||al(i,ie())!=null,Yo(e,l,o,n.filter.filtersNodes())}}var Hf=class{constructor(e,t){this.query_=e,this.eventRegistrations_=[];let i=this.query_._queryParams,r=new ea(i.getIndex()),s=lk(i);this.processor_=Ok(s);let o=t.serverCache,a=t.eventCache,c=r.updateFullNode(W.EMPTY_NODE,o.getNode(),null),l=s.updateFullNode(W.EMPTY_NODE,a.getNode(),null),u=new kn(c,o.isFullyInitialized(),r.filtersNodes()),d=new kn(l,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=gl(d,u),this.eventGenerator_=new Nf(this.query_)}get query(){return this.query_}};function Uk(n){return n.viewCache_.serverCache.getNode()}function zk(n,e){let t=qi(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!J(e)&&!t.getImmediateChild(Y(e)).isEmpty())?t.getChild(e):null}function $v(n){return n.eventRegistrations_.length===0}function jk(n,e){n.eventRegistrations_.push(e)}function Gv(n,e,t){let i=[];if(t){S(e==null,"A cancel should cancel all event registrations.");let r=n.query._path;n.eventRegistrations_.forEach(s=>{let o=s.createCancelEvent(t,r);o&&i.push(o)})}if(e){let r=[];for(let s=0;s<n.eventRegistrations_.length;++s){let o=n.eventRegistrations_[s];if(!o.matches(e))r.push(o);else if(e.hasAnyCallback()){r=r.concat(n.eventRegistrations_.slice(s+1));break}}n.eventRegistrations_=r}else n.eventRegistrations_=[];return i}function qv(n,e,t,i){e.type===pn.MERGE&&e.source.queryId!==null&&(S(qi(n.viewCache_),"We should always have a full cache before handling merges"),S(Lf(n.viewCache_),"Missing event cache, even though we have a server cache"));let r=n.viewCache_,s=Dk(n.processor_,r,e,t,i);return kk(n.processor_,s.viewCache),S(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,Ly(n,s.changes,s.viewCache.eventCache.getNode(),null)}function Bk(n,e){let t=n.viewCache_.eventCache,i=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Oe,(s,o)=>{i.push(es(s,o))}),t.isFullyInitialized()&&i.push(Iy(t.getNode())),Ly(n,i,t.getNode(),e)}function Ly(n,e,t,i){let r=i?[i]:n.eventRegistrations_;return fk(n.eventGenerator_,e,t,r)}var ll,$f=class{constructor(){this.views=new Map}};function Wk(n){S(!ll,"__referenceConstructor has already been defined"),ll=n}function Hk(){return S(ll,"Reference.ts has not been loaded"),ll}function $k(n){return n.views.size===0}function yp(n,e,t,i){let r=e.source.queryId;if(r!==null){let s=n.views.get(r);return S(s!=null,"SyncTree gave us an op for an invalid query."),qv(s,e,t,i)}else{let s=[];for(let o of n.views.values())s=s.concat(qv(o,e,t,i));return s}}function Gk(n,e,t,i,r){let s=e._queryIdentifier,o=n.views.get(s);if(!o){let a=ol(t,r?i:null),c=!1;a?c=!0:i instanceof W?(a=_p(t,i),c=!1):(a=W.EMPTY_NODE,c=!1);let l=gl(new kn(a,c,!1),new kn(i,r,!1));return new Hf(e,l)}return o}function qk(n,e,t,i,r,s){let o=Gk(n,e,i,r,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,o),jk(o,t),Bk(o,t)}function Yk(n,e,t,i){let r=e._queryIdentifier,s=[],o=[],a=si(n);if(r==="default")for(let[c,l]of n.views.entries())o=o.concat(Gv(l,t,i)),$v(l)&&(n.views.delete(c),l.query._queryParams.loadsAllData()||s.push(l.query));else{let c=n.views.get(r);c&&(o=o.concat(Gv(c,t,i)),$v(c)&&(n.views.delete(r),c.query._queryParams.loadsAllData()||s.push(c.query)))}return a&&!si(n)&&s.push(new(Hk())(e._repo,e._path)),{removed:s,events:o}}function Fy(n){let e=[];for(let t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Kr(n,e){let t=null;for(let i of n.views.values())t=t||zk(i,e);return t}function Vy(n,e){if(e._queryParams.loadsAllData())return _l(n);{let i=e._queryIdentifier;return n.views.get(i)}}function Uy(n,e){return Vy(n,e)!=null}function si(n){return _l(n)!=null}function _l(n){for(let e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}var ul;function Kk(n){S(!ul,"__referenceConstructor has already been defined"),ul=n}function Xk(){return S(ul,"Reference.ts has not been loaded"),ul}var Qk=1,dl=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new pt(null),this.pendingWriteTree_=Mk(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function zy(n,e,t,i,r){return _k(n.pendingWriteTree_,e,t,i,r),r?ss(n,new ts(fp(),e,t)):[]}function Jk(n,e,t,i){vk(n.pendingWriteTree_,e,t,i);let r=pt.fromObject(t);return ss(n,new ta(fp(),e,r))}function ni(n,e,t=!1){let i=yk(n.pendingWriteTree_,e);if(bk(n.pendingWriteTree_,e)){let s=new pt(null);return i.snap!=null?s=s.set(ie(),!0):Qe(i.children,o=>{s=s.set(new oe(o),!0)}),ss(n,new Rf(i.path,s,t))}else return[]}function vl(n,e,t){return ss(n,new ts(pp(),e,t))}function Zk(n,e,t){let i=pt.fromObject(t);return ss(n,new ta(pp(),e,i))}function e1(n,e){return ss(n,new sl(pp(),e))}function t1(n,e,t){let i=xp(n,t);if(i){let r=Cp(i),s=r.path,o=r.queryId,a=St(s,e),c=new sl(mp(o),a);return wp(n,s,c)}else return[]}function Gf(n,e,t,i,r=!1){let s=e._path,o=n.syncPointTree_.get(s),a=[];if(o&&(e._queryIdentifier==="default"||Uy(o,e))){let c=Yk(o,e,t,i);$k(o)&&(n.syncPointTree_=n.syncPointTree_.remove(s));let l=c.removed;if(a=c.events,!r){let u=l.findIndex(h=>h._queryParams.loadsAllData())!==-1,d=n.syncPointTree_.findOnPath(s,(h,f)=>si(f));if(u&&!d){let h=n.syncPointTree_.subtree(s);if(!h.isEmpty()){let f=r1(h);for(let p=0;p<f.length;++p){let _=f[p],v=_.query,x=Wy(n,_);n.listenProvider_.startListening(Xo(v),hl(n,v),x.hashFn,x.onComplete)}}}!d&&l.length>0&&!i&&(u?n.listenProvider_.stopListening(Xo(e),null):l.forEach(h=>{let f=n.queryToTagMap.get(yl(h));n.listenProvider_.stopListening(Xo(h),f)}))}s1(n,l)}return a}function n1(n,e,t,i){let r=xp(n,i);if(r!=null){let s=Cp(r),o=s.path,a=s.queryId,c=St(o,e),l=new ts(mp(a),c,t);return wp(n,o,l)}else return[]}function i1(n,e,t,i){let r=xp(n,i);if(r){let s=Cp(r),o=s.path,a=s.queryId,c=St(o,e),l=pt.fromObject(t),u=new ta(mp(a),c,l);return wp(n,o,u)}else return[]}function Yv(n,e,t,i=!1){let r=e._path,s=null,o=!1;n.syncPointTree_.foreachOnPath(r,(h,f)=>{let p=St(h,r);s=s||Kr(f,p),o=o||si(f)});let a=n.syncPointTree_.get(r);a?(o=o||si(a),s=s||Kr(a,ie())):(a=new $f,n.syncPointTree_=n.syncPointTree_.set(r,a));let c;s!=null?c=!0:(c=!1,s=W.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((f,p)=>{let _=Kr(p,ie());_&&(s=s.updateImmediateChild(f,_))}));let l=Uy(a,e);if(!l&&!e._queryParams.loadsAllData()){let h=yl(e);S(!n.queryToTagMap.has(h),"View does not exist, but we have a tag");let f=o1();n.queryToTagMap.set(h,f),n.tagToQueryMap.set(f,h)}let u=gp(n.pendingWriteTree_,r),d=qk(a,e,t,u,s,c);if(!l&&!o&&!i){let h=Vy(a,e);d=d.concat(a1(n,e,h))}return d}function bp(n,e,t){let r=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(o,a)=>{let c=St(o,e),l=Kr(a,c);if(l)return l});return Oy(r,e,s,t,!0)}function ss(n,e){return jy(e,n.syncPointTree_,null,gp(n.pendingWriteTree_,ie()))}function jy(n,e,t,i){if(J(n.path))return By(n,e,t,i);{let r=e.get(ie());t==null&&r!=null&&(t=Kr(r,ie()));let s=[],o=Y(n.path),a=n.operationForChild(o),c=e.children.get(o);if(c&&a){let l=t?t.getImmediateChild(o):null,u=ky(i,o);s=s.concat(jy(a,c,l,u))}return r&&(s=s.concat(yp(r,n,i,t))),s}}function By(n,e,t,i){let r=e.get(ie());t==null&&r!=null&&(t=Kr(r,ie()));let s=[];return e.children.inorderTraversal((o,a)=>{let c=t?t.getImmediateChild(o):null,l=ky(i,o),u=n.operationForChild(o);u&&(s=s.concat(By(u,a,c,l)))}),r&&(s=s.concat(yp(r,n,i,t))),s}function Wy(n,e){let t=e.query,i=hl(n,t);return{hashFn:()=>(Uk(e)||W.EMPTY_NODE).hash(),onComplete:r=>{if(r==="ok")return i?t1(n,t._path,i):e1(n,t._path);{let s=yO(r,t);return Gf(n,t,null,s)}}}}function hl(n,e){let t=yl(e);return n.queryToTagMap.get(t)}function yl(n){return n._path.toString()+"$"+n._queryIdentifier}function xp(n,e){return n.tagToQueryMap.get(e)}function Cp(n){let e=n.indexOf("$");return S(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new oe(n.substr(0,e))}}function wp(n,e,t){let i=n.syncPointTree_.get(e);S(i,"Missing sync point for query tag that we're tracking");let r=gp(n.pendingWriteTree_,e);return yp(i,t,r,null)}function r1(n){return n.fold((e,t,i)=>{if(t&&si(t))return[_l(t)];{let r=[];return t&&(r=Fy(t)),Qe(i,(s,o)=>{r=r.concat(o)}),r}})}function Xo(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(Xk())(n._repo,n._path):n}function s1(n,e){for(let t=0;t<e.length;++t){let i=e[t];if(!i._queryParams.loadsAllData()){let r=yl(i),s=n.queryToTagMap.get(r);n.queryToTagMap.delete(r),n.tagToQueryMap.delete(s)}}}function o1(){return Qk++}function a1(n,e,t){let i=e._path,r=hl(n,e),s=Wy(n,t),o=n.listenProvider_.startListening(Xo(e),r,s.hashFn,s.onComplete),a=n.syncPointTree_.subtree(i);if(r)S(!si(a.value),"If we're adding a query, it shouldn't be shadowed");else{let c=a.fold((l,u,d)=>{if(!J(l)&&u&&si(u))return[_l(u).query];{let h=[];return u&&(h=h.concat(Fy(u).map(f=>f.query))),Qe(d,(f,p)=>{h=h.concat(p)}),h}});for(let l=0;l<c.length;++l){let u=c[l];n.listenProvider_.stopListening(Xo(u),hl(n,u))}}return o}var qf=class n{constructor(e){this.node_=e}getImmediateChild(e){let t=this.node_.getImmediateChild(e);return new n(t)}node(){return this.node_}},Yf=class n{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){let t=Pe(this.path_,e);return new n(this.syncTree_,t)}node(){return bp(this.syncTree_,this.path_)}},c1=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},Kv=function(n,e,t){if(!n||typeof n!="object")return n;if(S(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return l1(n[".sv"],e,t);if(typeof n[".sv"]=="object")return u1(n[".sv"],e);S(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},l1=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:S(!1,"Unexpected server value: "+n)}},u1=function(n,e,t){n.hasOwnProperty("increment")||S(!1,"Unexpected server value: "+JSON.stringify(n,null,2));let i=n.increment;typeof i!="number"&&S(!1,"Unexpected increment value: "+i);let r=e.node();if(S(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;let o=r.getValue();return typeof o!="number"?i:o+i},Hy=function(n,e,t,i){return Sp(e,new Yf(t,n),i)},$y=function(n,e,t){return Sp(n,new qf(e),t)};function Sp(n,e,t){let i=n.getPriority().val(),r=Kv(i,e.getImmediateChild(".priority"),t),s;if(n.isLeafNode()){let o=n,a=Kv(o.getValue(),e,t);return a!==o.getValue()||r!==o.getPriority().val()?new Jr(a,He(r)):n}else{let o=n;return s=o,r!==o.getPriority().val()&&(s=s.updatePriority(new Jr(r))),o.forEachChild(Oe,(a,c)=>{let l=Sp(c,e.getImmediateChild(a),t);l!==c&&(s=s.updateImmediateChild(a,l))}),s}}var ia=class{constructor(e="",t=null,i={children:{},childCount:0}){this.name=e,this.parent=t,this.node=i}};function Ep(n,e){let t=e instanceof oe?e:new oe(e),i=n,r=Y(t);for(;r!==null;){let s=Oi(i.node.children,r)||{children:{},childCount:0};i=new ia(r,i,s),t=pe(t),r=Y(t)}return i}function os(n){return n.node.value}function Gy(n,e){n.node.value=e,Kf(n)}function qy(n){return n.node.childCount>0}function d1(n){return os(n)===void 0&&!qy(n)}function bl(n,e){Qe(n.node.children,(t,i)=>{e(new ia(t,n,i))})}function Yy(n,e,t,i){t&&!i&&e(n),bl(n,r=>{Yy(r,e,!0,i)}),t&&i&&e(n)}function h1(n,e,t){let i=t?n:n.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function aa(n){return new oe(n.parent===null?n.name:aa(n.parent)+"/"+n.name)}function Kf(n){n.parent!==null&&f1(n.parent,n.name,n)}function f1(n,e,t){let i=d1(t),r=Zt(n.node.children,e);i&&r?(delete n.node.children[e],n.node.childCount--,Kf(n)):!i&&!r&&(n.node.children[e]=t.node,n.node.childCount++,Kf(n))}var p1=/[\[\].#$\/\u0000-\u001F\u007F]/,m1=/[\[\].#$\u0000-\u001F\u007F]/,rf=10*1024*1024,Ip=function(n){return typeof n=="string"&&n.length!==0&&!p1.test(n)},Ky=function(n){return typeof n=="string"&&n.length!==0&&!m1.test(n)},g1=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Ky(n)},_1=function(n){return n===null||typeof n=="string"||typeof n=="number"&&!op(n)||n&&typeof n=="object"&&Zt(n,".sv")},Xy=function(n,e,t,i){i&&e===void 0||xl(Eo(n,"value"),e,t)},xl=function(n,e,t){let i=t instanceof oe?new vf(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+Wi(i));if(typeof e=="function")throw new Error(n+"contains a function "+Wi(i)+" with contents = "+e.toString());if(op(e))throw new Error(n+"contains "+e.toString()+" "+Wi(i));if(typeof e=="string"&&e.length>rf/3&&Io(e)>rf)throw new Error(n+"contains a string greater than "+rf+" utf8 bytes "+Wi(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let r=!1,s=!1;if(Qe(e,(o,a)=>{if(o===".value")r=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!Ip(o)))throw new Error(n+" contains an invalid key ("+o+") "+Wi(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);KO(i,o),xl(n,a,i),XO(i)}),r&&s)throw new Error(n+' contains ".value" child '+Wi(i)+" in addition to actual children.")}},v1=function(n,e){let t,i;for(t=0;t<e.length;t++){i=e[t];let s=Qo(i);for(let o=0;o<s.length;o++)if(!(s[o]===".priority"&&o===s.length-1)){if(!Ip(s[o]))throw new Error(n+"contains an invalid key ("+s[o]+") in path "+i.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(YO);let r=null;for(t=0;t<e.length;t++){if(i=e[t],r!==null&&Wt(r,i))throw new Error(n+"contains a path "+r.toString()+" that is ancestor of another path "+i.toString());r=i}},y1=function(n,e,t,i){if(i&&e===void 0)return;let r=Eo(n,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(r+" must be an object containing the children to replace.");let s=[];Qe(e,(o,a)=>{let c=new oe(o);if(xl(r,a,Pe(t,c)),lp(c)===".priority"&&!_1(a))throw new Error(r+"contains an invalid value for '"+c.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(c)}),v1(r,s)};var Qy=function(n,e,t,i){if(!(i&&t===void 0)&&!Ky(t))throw new Error(Eo(n,e)+'was an invalid path = "'+t+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},b1=function(n,e,t,i){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Qy(n,e,t,i)},Tp=function(n,e){if(Y(e)===".info")throw new Error(n+" failed = Can't modify data under /.info/")},x1=function(n,e){let t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Ip(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!g1(t))throw new Error(Eo(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var Xf=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function Cl(n,e){let t=null;for(let i=0;i<e.length;i++){let r=e[i],s=r.getPath();t!==null&&!up(s,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:s}),t.events.push(r)}t&&n.eventLists_.push(t)}function Jy(n,e,t){Cl(n,t),Zy(n,i=>up(i,e))}function rn(n,e,t){Cl(n,t),Zy(n,i=>Wt(i,e)||Wt(e,i))}function Zy(n,e){n.recursionDepth_++;let t=!0;for(let i=0;i<n.eventLists_.length;i++){let r=n.eventLists_[i];if(r){let s=r.path;e(s)?(C1(n.eventLists_[i]),n.eventLists_[i]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function C1(n){for(let e=0;e<n.events.length;e++){let t=n.events[e];if(t!==null){n.events[e]=null;let i=t.getEventRunner();$i&&Xe("event: "+t.toString()),rs(i)}}}var w1="repo_interrupt",S1=25,Qf=class{constructor(e,t,i,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Xf,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=rl(),this.transactionQueueTree_=new ia,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function E1(n,e,t){if(n.stats_=cp(n.repoInfo_),n.forceRestClient_||wO())n.server_=new Mf(n.repoInfo_,(i,r,s,o)=>{Xv(n,i,r,s,o)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>Qv(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Fe(t)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new dp(n.repoInfo_,e,(i,r,s,o)=>{Xv(n,i,r,s,o)},i=>{Qv(n,i)},i=>{I1(n,i)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=EO(n.repoInfo_,()=>new Df(n.stats_,n.server_)),n.infoData_=new Pf,n.infoSyncTree_=new dl({startListening:(i,r,s,o)=>{let a=[],c=n.infoData_.getNode(i._path);return c.isEmpty()||(a=vl(n.infoSyncTree_,i._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),Ap(n,"connected",!1),n.serverSyncTree_=new dl({startListening:(i,r,s,o)=>(n.server_.listen(i,s,r,(a,c)=>{let l=o(a,c);rn(n.eventQueue_,i._path,l)}),[]),stopListening:(i,r)=>{n.server_.unlisten(i,r)}})}function eb(n){let t=n.infoData_.getNode(new oe(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function wl(n){return c1({timestamp:eb(n)})}function Xv(n,e,t,i,r){n.dataUpdateCount++;let s=new oe(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let o=[];if(r)if(i){let c=So(t,l=>He(l));o=i1(n.serverSyncTree_,s,c,r)}else{let c=He(t);o=n1(n.serverSyncTree_,s,c,r)}else if(i){let c=So(t,l=>He(l));o=Zk(n.serverSyncTree_,s,c)}else{let c=He(t);o=vl(n.serverSyncTree_,s,c)}let a=s;o.length>0&&(a=is(n,s)),rn(n.eventQueue_,a,o)}function Qv(n,e){Ap(n,"connected",e),e===!1&&M1(n)}function I1(n,e){Qe(e,(t,i)=>{Ap(n,t,i)})}function Ap(n,e,t){let i=new oe("/.info/"+e),r=He(t);n.infoData_.updateSnapshot(i,r);let s=vl(n.infoSyncTree_,i,r);rn(n.eventQueue_,i,s)}function Mp(n){return n.nextWriteId_++}function T1(n,e,t,i,r){Sl(n,"set",{path:e.toString(),value:t,priority:i});let s=wl(n),o=He(t,i),a=bp(n.serverSyncTree_,e),c=$y(o,a,s),l=Mp(n),u=zy(n.serverSyncTree_,e,c,l,!0);Cl(n.eventQueue_,u),n.server_.put(e.toString(),o.val(!0),(h,f)=>{let p=h==="ok";p||ft("set at "+e+" failed: "+h);let _=ni(n.serverSyncTree_,l,!p);rn(n.eventQueue_,e,_),Jf(n,r,h,f)});let d=Op(n,e);is(n,d),rn(n.eventQueue_,d,[])}function A1(n,e,t,i){Sl(n,"update",{path:e.toString(),value:t});let r=!0,s=wl(n),o={};if(Qe(t,(a,c)=>{r=!1,o[a]=Hy(Pe(e,a),He(c),n.serverSyncTree_,s)}),r)Xe("update() called with empty data.  Don't do anything."),Jf(n,i,"ok",void 0);else{let a=Mp(n),c=Jk(n.serverSyncTree_,e,o,a);Cl(n.eventQueue_,c),n.server_.merge(e.toString(),t,(l,u)=>{let d=l==="ok";d||ft("update at "+e+" failed: "+l);let h=ni(n.serverSyncTree_,a,!d),f=h.length>0?is(n,e):e;rn(n.eventQueue_,f,h),Jf(n,i,l,u)}),Qe(t,l=>{let u=Op(n,Pe(e,l));is(n,u)}),rn(n.eventQueue_,e,[])}}function M1(n){Sl(n,"onDisconnectEvents");let e=wl(n),t=rl();Of(n.onDisconnect_,ie(),(r,s)=>{let o=Hy(r,s,n.serverSyncTree_,e);Ty(t,r,o)});let i=[];Of(t,ie(),(r,s)=>{i=i.concat(vl(n.serverSyncTree_,r,s));let o=Op(n,r);is(n,o)}),n.onDisconnect_=rl(),rn(n.eventQueue_,ie(),i)}function P1(n,e,t){let i;Y(e._path)===".info"?i=Yv(n.infoSyncTree_,e,t):i=Yv(n.serverSyncTree_,e,t),Jy(n.eventQueue_,e._path,i)}function Jv(n,e,t){let i;Y(e._path)===".info"?i=Gf(n.infoSyncTree_,e,t):i=Gf(n.serverSyncTree_,e,t),Jy(n.eventQueue_,e._path,i)}function O1(n){n.persistentConnection_&&n.persistentConnection_.interrupt(w1)}function Sl(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Xe(t,...e)}function Jf(n,e,t,i){e&&rs(()=>{if(t==="ok")e(null);else{let r=(t||"error").toUpperCase(),s=r;i&&(s+=": "+i);let o=new Error(s);o.code=r,e(o)}})}function tb(n,e,t){return bp(n.serverSyncTree_,e,t)||W.EMPTY_NODE}function Pp(n,e=n.transactionQueueTree_){if(e||El(n,e),os(e)){let t=ib(n,e);S(t.length>0,"Sending zero length transaction queue"),t.every(r=>r.status===0)&&k1(n,aa(e),t)}else qy(e)&&bl(e,t=>{Pp(n,t)})}function k1(n,e,t){let i=t.map(l=>l.currentWriteId),r=tb(n,e,i),s=r,o=r.hash();for(let l=0;l<t.length;l++){let u=t[l];S(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;let d=St(e,u.path);s=s.updateChild(d,u.currentOutputSnapshotRaw)}let a=s.val(!0),c=e;n.server_.put(c.toString(),a,l=>{Sl(n,"transaction put response",{path:c.toString(),status:l});let u=[];if(l==="ok"){let d=[];for(let h=0;h<t.length;h++)t[h].status=2,u=u.concat(ni(n.serverSyncTree_,t[h].currentWriteId)),t[h].onComplete&&d.push(()=>t[h].onComplete(null,!0,t[h].currentOutputSnapshotResolved)),t[h].unwatcher();El(n,Ep(n.transactionQueueTree_,e)),Pp(n,n.transactionQueueTree_),rn(n.eventQueue_,e,u);for(let h=0;h<d.length;h++)rs(d[h])}else{if(l==="datastale")for(let d=0;d<t.length;d++)t[d].status===3?t[d].status=4:t[d].status=0;else{ft("transaction at "+c.toString()+" failed: "+l);for(let d=0;d<t.length;d++)t[d].status=4,t[d].abortReason=l}is(n,e)}},o)}function is(n,e){let t=nb(n,e),i=aa(t),r=ib(n,t);return D1(n,r,i),i}function D1(n,e,t){if(e.length===0)return;let i=[],r=[],o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let c=e[a],l=St(t,c.path),u=!1,d;if(S(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)u=!0,d=c.abortReason,r=r.concat(ni(n.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=S1)u=!0,d="maxretry",r=r.concat(ni(n.serverSyncTree_,c.currentWriteId,!0));else{let h=tb(n,c.path,o);c.currentInputSnapshot=h;let f=e[a].update(h.val());if(f!==void 0){xl("transaction failed: Data returned ",f,c.path);let p=He(f);typeof f=="object"&&f!=null&&Zt(f,".priority")||(p=p.updatePriority(h.getPriority()));let v=c.currentWriteId,x=wl(n),w=$y(p,h,x);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=w,c.currentWriteId=Mp(n),o.splice(o.indexOf(v),1),r=r.concat(zy(n.serverSyncTree_,c.path,w,c.currentWriteId,c.applyLocally)),r=r.concat(ni(n.serverSyncTree_,v,!0))}else u=!0,d="nodata",r=r.concat(ni(n.serverSyncTree_,c.currentWriteId,!0))}rn(n.eventQueue_,t,r),r=[],u&&(e[a].status=2,function(h){setTimeout(h,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?i.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):i.push(()=>e[a].onComplete(new Error(d),!1,null))))}El(n,n.transactionQueueTree_);for(let a=0;a<i.length;a++)rs(i[a]);Pp(n,n.transactionQueueTree_)}function nb(n,e){let t,i=n.transactionQueueTree_;for(t=Y(e);t!==null&&os(i)===void 0;)i=Ep(i,t),e=pe(e),t=Y(e);return i}function ib(n,e){let t=[];return rb(n,e,t),t.sort((i,r)=>i.order-r.order),t}function rb(n,e,t){let i=os(e);if(i)for(let r=0;r<i.length;r++)t.push(i[r]);bl(e,r=>{rb(n,r,t)})}function El(n,e){let t=os(e);if(t){let i=0;for(let r=0;r<t.length;r++)t[r].status!==2&&(t[i]=t[r],i++);t.length=i,Gy(e,t.length>0?t:void 0)}bl(e,i=>{El(n,i)})}function Op(n,e){let t=aa(nb(n,e)),i=Ep(n.transactionQueueTree_,e);return h1(i,r=>{sf(n,r)}),sf(n,i),Yy(i,r=>{sf(n,r)}),t}function sf(n,e){let t=os(e);if(t){let i=[],r=[],s=-1;for(let o=0;o<t.length;o++)t[o].status===3||(t[o].status===1?(S(s===o-1,"All SENT items should be at beginning of queue."),s=o,t[o].status=3,t[o].abortReason="set"):(S(t[o].status===0,"Unexpected transaction status in abort"),t[o].unwatcher(),r=r.concat(ni(n.serverSyncTree_,t[o].currentWriteId,!0)),t[o].onComplete&&i.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?Gy(e,void 0):t.length=s+1,rn(n.eventQueue_,aa(e),r);for(let o=0;o<i.length;o++)rs(i[o])}}function R1(n){let e="",t=n.split("/");for(let i=0;i<t.length;i++)if(t[i].length>0){let r=t[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}function N1(n){let e={};n.charAt(0)==="?"&&(n=n.substring(1));for(let t of n.split("&")){if(t.length===0)continue;let i=t.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):ft(`Invalid query segment '${t}' in query '${n}'`)}return e}var Zv=function(n,e){let t=L1(n),i=t.namespace;t.domain==="firebase.com"&&On(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&t.domain!=="localhost"&&On("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||pO();let r=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new Xc(t.host,t.secure,i,r,e,"",i!==t.subdomain),path:new oe(t.pathString)}},L1=function(n){let e="",t="",i="",r="",s="",o=!0,a="https",c=443;if(typeof n=="string"){let l=n.indexOf("//");l>=0&&(a=n.substring(0,l-1),n=n.substring(l+2));let u=n.indexOf("/");u===-1&&(u=n.length);let d=n.indexOf("?");d===-1&&(d=n.length),e=n.substring(0,Math.min(u,d)),u<d&&(r=R1(n.substring(u,d)));let h=N1(n.substring(Math.min(n.length,d)));l=e.indexOf(":"),l>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;let f=e.slice(0,l);if(f.toLowerCase()==="localhost")t="localhost";else if(f.split(".").length<=2)t=f;else{let p=e.indexOf(".");i=e.substring(0,p).toLowerCase(),t=e.substring(p+1),s=i}"ns"in h&&(s=h.ns)}return{host:e,port:c,domain:t,subdomain:i,secure:o,scheme:a,pathString:r,namespace:s}};var ey="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",F1=function(){let n=0,e=[];return function(t){let i=t===n;n=t;let r,s=new Array(8);for(r=7;r>=0;r--)s[r]=ey.charAt(t%64),t=Math.floor(t/64);S(t===0,"Cannot push at time == 0");let o=s.join("");if(i){for(r=11;r>=0&&e[r]===63;r--)e[r]=0;e[r]++}else for(r=0;r<12;r++)e[r]=Math.floor(Math.random()*64);for(r=0;r<12;r++)o+=ey.charAt(e[r]);return S(o.length===20,"nextPushId: Length should be 20."),o}}();var fl=class{constructor(e,t,i,r){this.eventType=e,this.eventRegistration=t,this.snapshot=i,this.prevName=r}getPath(){let e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Fe(this.snapshot.exportVal())}},pl=class{constructor(e,t,i){this.eventRegistration=e,this.error=t,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var Zf=class{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return S(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}};var ep=class n{constructor(e,t,i,r){this._repo=e,this._path=t,this._queryParams=i,this._orderByCalled=r}get key(){return J(this._path)?null:lp(this._path)}get ref(){return new Dn(this._repo,this._path)}get _queryIdentifier(){let e=Vv(this._queryParams),t=ap(e);return t==="{}"?"default":t}get _queryObject(){return Vv(this._queryParams)}isEqual(e){if(e=et(e),!(e instanceof n))return!1;let t=this._repo===e._repo,i=up(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return t&&i&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+qO(this._path)}};var Dn=class n extends ep{constructor(e,t){super(e,t,new Af,!1)}get parent(){let e=by(this._path);return e===null?null:new n(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}},ml=class n{constructor(e,t,i){this._node=e,this.ref=t,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){let t=new oe(e),i=Yi(this.ref,e);return new n(this._node.getChild(t),i,Oe)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,r)=>e(new n(r,Yi(this.ref,i),Oe)))}hasChild(e){let t=new oe(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function sb(n,e){return n=et(n),n._checkNotDeleted("ref"),e!==void 0?Yi(n._root,e):n._root}function Yi(n,e){return n=et(n),Y(n._path)===null?b1("child","path",e,!1):Qy("child","path",e,!1),new Dn(n._repo,Pe(n._path,e))}function ob(n,e){n=et(n),Tp("push",n._path),Xy("push",e,n._path,!0);let t=eb(n._repo),i=F1(t),r=Yi(n,i),s=Yi(n,i),o;return e!=null?o=Il(s,e).then(()=>s):o=Promise.resolve(s),r.then=o.then.bind(o),r.catch=o.then.bind(o,void 0),r}function ab(n){return Tp("remove",n._path),Il(n,null)}function Il(n,e){n=et(n),Tp("set",n._path),Xy("set",e,n._path,!1);let t=new En;return T1(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function cb(n,e){y1("update",e,n._path,!1);let t=new En;return A1(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}var tp=class n{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,t){let i=t._queryParams.getIndex();return new fl("value",this,new ml(e.snapshotNode,new Dn(t._repo,t._path),i))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new pl(this,e,t):null}matches(e){return e instanceof n?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},np=class n{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t=e==="children_added"?"child_added":e;return t=t==="children_removed"?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new pl(this,e,t):null}createEvent(e,t){S(e.childName!=null,"Child events should have a childName.");let i=Yi(new Dn(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new fl(e.type,this,new ml(e.snapshotNode,i,r),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof n?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function V1(n,e,t,i,r){let s;if(typeof i=="object"&&(s=void 0,r=i),typeof i=="function"&&(s=i),r&&r.onlyOnce){let c=t,l=(u,d)=>{Jv(n._repo,n,a),c(u,d)};l.userCallback=t.userCallback,l.context=t.context,t=l}let o=new Zf(t,s||void 0),a=e==="value"?new tp(o):new np(e,o);return P1(n._repo,n,a),()=>Jv(n._repo,n,a)}function lb(n,e,t,i){return V1(n,"value",e,t,i)}Wk(Dn);Kk(Dn);var U1="FIREBASE_DATABASE_EMULATOR_HOST",ip={},z1=!1;function j1(n,e,t,i){n.repoInfo_=new Xc(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),i&&(n.authTokenProvider_=i)}function B1(n,e,t,i,r){let s=i||n.options.databaseURL;s===void 0&&(n.options.projectId||On("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Xe("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let o=Zv(s,r),a=o.repoInfo,c,l;typeof process<"u"&&process.env&&(l=process.env[U1]),l?(c=!0,s=`http://${l}?ns=${a.namespace}`,o=Zv(s,r),a=o.repoInfo):c=!o.repoInfo.secure;let u=r&&c?new qo(qo.OWNER):new df(n.name,n.options,e);x1("Invalid Firebase Database URL",o),J(o.path)||On("Database URL must point to the root of a Firebase Database (not including a child path).");let d=H1(a,n,u,new uf(n.name,t));return new rp(d,n)}function W1(n,e){let t=ip[e];(!t||t[n.key]!==n)&&On(`Database ${e}(${n.repoInfo_}) has already been deleted.`),O1(n),delete t[n.key]}function H1(n,e,t,i){let r=ip[e.name];r||(r={},ip[e.name]=r);let s=r[n.toURLString()];return s&&On("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new Qf(n,z1,t,i),r[n.toURLString()]=s,s}var rp=class{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(E1(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Dn(this._repo,ie())),this._rootInternal}_delete(){return this._rootInternal!==null&&(W1(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&On("Cannot call "+e+" on a deleted database.")}};function ub(n=Ur(),e){let t=Po(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){let i=Y_("database");i&&db(t,...i)}return t}function db(n,e,t,i={}){n=et(n),n._checkNotDeleted("useEmulator"),n._instanceStarted&&On("Cannot call useEmulator() after instance has already been initialized.");let r=n._repoInternal,s;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&On('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new qo(qo.OWNER);else if(i.mockUserToken){let o=typeof i.mockUserToken=="string"?i.mockUserToken:K_(i.mockUserToken,n.app.options.projectId);s=new qo(o)}j1(r,e,t,s)}function $1(n){dO(Qn),Xn(new Bt("database",(e,{instanceIdentifier:t})=>{let i=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return B1(i,r,s,t)},"PUBLIC").setMultipleInstances(!0)),Ve(xv,Cv,n),Ve(xv,Cv,"esm2017")}dp.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};dp.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};$1();var Qi=class{constructor(e){return e}},hb="database",kp=class{constructor(){return Oo(hb)}};var Dp=new de("angularfire2.database-instances");function G1(n,e){let t=Ic(hb,n,e);return t&&new Qi(t)}function q1(n){return(e,t)=>{let i=e.runOutsideAngular(()=>n(t));return new Qi(i)}}var Y1={provide:kp,deps:[[new mt,Dp]]},K1={provide:Qi,useFactory:G1,deps:[[new mt,Dp],Tn]};function fb(n,...e){return Ve("angularfire",Li.full,"rtdb"),Kt([K1,Y1,{provide:Dp,useFactory:q1(n),multi:!0,deps:[Be,xn,Br,Fi,[new mt,zo],[new mt,jr],...e]}])}var pb=ht(ub,!0);var mb=ht(lb,!0);var Rp=ht(ob,!0);var Ie=ht(sb,!0);var Np=ht(ab,!0);var Ji=ht(Il,!0);var Lp=ht(cb,!0);var gb=(()=>{class n{data={accounts:{main:[{name:"Savings",balance:0},{name:"Budget",balance:0},{name:"Goal",balance:0,target:0}],income:[],expense:[]},transactions:{transfer:[],income:[],expense:[]},theme:"light"};db=I(Qi);dataSubject=new ze(this.data);constructor(){let t=localStorage.getItem("uid");t!==null&&this.fetchData(t)}getUserRef(t){return Ie(this.db,t)}createUserData(t){return Ji(this.getUserRef(t),this.data)}convertToIndexedArray(t){return Object.keys(t).map(i=>R({key:i},t[i]))}fetchData(t){mb(this.getUserRef(t),i=>{let r=i.val(),s={accounts:{main:r.accounts.main,income:this.convertToIndexedArray(r.accounts?.income??[]),expense:this.convertToIndexedArray(r.accounts?.expense??[])},transactions:{transfer:this.convertToIndexedArray(r.transactions?.transfer??[]),income:this.convertToIndexedArray(r.transactions?.income??[]),expense:this.convertToIndexedArray(r.transactions?.expense??[])},theme:r.theme};this.dataSubject.next(s)})}getData(){return this.dataSubject.asObservable()}onSetTheme(t){let i=localStorage.getItem("uid"),r=Ie(this.db,`${i}/`);Lp(r,{theme:t}),this.fetchData(i)}onCreateAccount(t,i){let r=localStorage.getItem("uid"),s;t==="income"?s=Ie(this.db,`${r}/accounts/income`):s=Ie(this.db,`${r}/accounts/expense`),Rp(s,i),this.fetchData(r)}convertToFireData(t){let i=[];return t.forEach(r=>{i[r.key]=r}),i}onEditAccount(t,i,r){let s=localStorage.getItem("uid"),o,a,c=this.dataSubject.value,l=this.dataSubject.value,u="",d="";t==="main"?o=Ie(this.db,`${s}/accounts/main/${i}`):t==="income"?(d=c.accounts.income[i].key,o=Ie(this.db,`${s}/accounts/income/${d}`),u=c.accounts.income[i].name,u!==r.name&&(l.transactions.income.map(h=>{h.source===u&&(h.source=r.name)}),a=Ie(this.db,`${s}/transactions/income`),Ji(a,this.convertToFireData(l.transactions.income)))):(d=c.accounts.expense[i].key,o=Ie(this.db,`${s}/accounts/expense/${d}`),u=c.accounts.expense[i].name,u!==r.name&&(l.transactions.expense.map(h=>{h.receiver===u&&(h.receiver=r.name)}),a=Ie(this.db,`${s}/transactions/expense`),Ji(a,this.convertToFireData(l.transactions.expense)))),Ji(o,r),this.fetchData(s)}onDeleteAccount(t,i){let r=localStorage.getItem("uid"),s,o,a=this.dataSubject.value,c=this.dataSubject.value,l="",u="";t==="income"?(u=a.accounts.income[i].key,s=Ie(this.db,`${r}/accounts/income/${u}`),l=a.accounts.income[i].name,c.transactions.income.some(d=>d.source===l)&&(c.transactions.income=c.transactions.income.filter(d=>d.source!==l),o=Ie(this.db,`${r}/transactions/income`),Ji(o,this.convertToFireData(c.transactions.income)))):(u=a.accounts.expense[i].key,s=Ie(this.db,`${r}/accounts/expense/${u}`),l=a.accounts.expense[i].name,c.transactions.expense.some(d=>d.receiver===l)&&(c.transactions.expense=c.transactions.expense.filter(d=>d.receiver!==l),o=Ie(this.db,`${r}/transactions/expense`),Ji(o,this.convertToFireData(c.transactions.expense)))),Np(s),this.fetchData(r)}onEditBalance(t,i,r){let s=localStorage.getItem("uid"),o,a=this.dataSubject.value.accounts,c="";t==="main"?o=Ie(this.db,`${s}/accounts/main/${i}`):t==="income"?(c=a.income[i].key,o=Ie(this.db,`${s}/accounts/income/${c}`)):(c=a.expense[i].key,o=Ie(this.db,`${s}/accounts/expense/${c}`)),Lp(o,{balance:r}),this.fetchData(s)}onCreateTransaction(t,i){let r=localStorage.getItem("uid"),s;t==="transfer"?s=Ie(this.db,`${r}/transactions/transfer`):t==="income"?s=Ie(this.db,`${r}/transactions/income`):s=Ie(this.db,`${r}/transactions/expense`),Rp(s,i),this.fetchData(r)}onDeleteTransaction(t,i){let r=localStorage.getItem("uid"),s,o=this.dataSubject.value.transactions,a="";t==="transfer"?(a=o.transfer[i].key,s=Ie(this.db,`${r}/transactions/transfer/${a}`)):t==="income"?(a=o.income[i].key,s=Ie(this.db,`${r}/transactions/income/${a}`)):(a=o.expense[i].key,s=Ie(this.db,`${r}/transactions/expense/${a}`)),Np(s),this.fetchData(r)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var $e=(()=>{class n{demoService=I(bv);dbService=I(gb);demoMode=!0;constructor(){localStorage.getItem("uid")!==null&&(this.demoMode=!1)}onSetMode(){this.demoMode=!this.demoMode}getData(){return this.demoMode?this.demoService.getData():this.dbService.getData()}createUserData(t){return this.dbService.createUserData(t)}fetchData(t){this.dbService.fetchData(t)}onGetTheme(){return new Promise(t=>{this.dbService.getData().subscribe(()=>{t()})})}onSetTheme(t){this.dbService.onSetTheme(t)}onCreateAccount(t,i){this.demoMode?this.demoService.onCreateAccount(t,i):this.dbService.onCreateAccount(t,i)}onEditAccount(t,i,r){this.demoMode?this.demoService.onEditAccount(t,i,r):this.dbService.onEditAccount(t,i,r)}onDeleteAccount(t,i){this.demoMode?this.demoService.onDeleteAccount(t,i):this.dbService.onDeleteAccount(t,i)}onEditBalance(t,i,r){this.demoMode?this.demoService.onEditBalance(t,i,r):this.dbService.onEditBalance(t,i,r)}onCreateTransaction(t,i){this.demoMode?this.demoService.onCreateTransaction(t,i):this.dbService.onCreateTransaction(t,i)}onDeleteTransaction(t,i){this.demoMode?this.demoService.onDeleteTransaction(t,i):this.dbService.onDeleteTransaction(t,i)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function X1(n,e){if(n&1){let t=$();g(0,"div",12)(1,"div",13)(2,"i",14),M("click",function(){O(t);let r=E();return k(r.onAlert())})("keydown",function(r){O(t);let s=E();return k(s.handleAlert(r))}),m(),g(3,"p",15),y(4),m(),g(5,"p",16),y(6),m()()()}if(n&2){let t=E();C(4),st(" ",t.alertType==="exist"?"Existing account":"Incorrect credentials"," "),C(2),st(" ",t.alertType==="exist"?"An account with this email already exists. Please choose a different email or sign in with the existing account.":"The provided credentials are incorrect. Please enter the correct info to proceed to your account."," ")}}var _b=(()=>{class n{isSignUp=!0;isAlert=!1;alertType="";authService=I(qc);dataService=I($e);router=I(Me);onChangeForm(){this.isSignUp=!this.isSignUp}handleChangeForm(t){t.key==="Enter"&&(this.isSignUp=!this.isSignUp)}onAlert(){this.isAlert=!this.isAlert}handleAlert(t){t.key==="Enter"&&this.onAlert()}onSubmit(t){this.isSignUp?this.authService.signUp(t.value.email,t.value.password).subscribe({next:i=>{let r=i.user.uid;localStorage.setItem("uid",r),this.dataService.createUserData(r).then(()=>{this.dataService.fetchData(r),this.dataService.onSetMode()}),this.router.navigate(["/dashboard"])},error:i=>{this.alertType="exist",this.onAlert()}}):this.authService.signIn(t.value.email,t.value.password).subscribe({next:i=>{let r=i.user.uid;localStorage.setItem("uid",r),this.dataService.fetchData(r),this.dataService.onSetMode(),this.router.navigate(["/dashboard"])},error:i=>{this.alertType="incorrect",this.onAlert()}})}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=Ce({type:n,selectors:[["app-auth-form"]],standalone:!0,features:[we],decls:19,vars:6,consts:[["form","ngForm"],[1,"form-container"],[3,"ngSubmit"],[1,"nunito-sans-bold"],[1,"inputs-container"],["for","email",1,"nunito-sans-semibold"],["type","text","id","email","placeholder","example@gmail.com","ngModel","","name","email","email","","required","",1,"nunito-sans-regular"],["for","password",1,"nunito-sans-semibold"],["type","text","id","password","placeholder","password2024","minlength","6","ngModel","","name","password","required","",1,"nunito-sans-regular"],["type","submit",1,"nunito-sans-bold",3,"disabled"],[1,"nunito-sans-regular","bottom-text"],["tabindex","0",1,"nunito-sans-bold",3,"click","keydown"],[1,"alert-container"],[1,"alert"],["tabindex","1",1,"fa-solid","fa-xmark",3,"click","keydown"],[1,"nunito-sans-bold","alert-name"],[1,"nunito-sans-regular","alert-msg"]],template:function(i,r){if(i&1){let s=$();g(0,"div",1)(1,"form",2,0),M("ngSubmit",function(){O(s);let a=Re(2);return k(r.onSubmit(a))}),g(3,"h1",3),y(4),m(),g(5,"div",4)(6,"label",5),y(7,"Email"),m(),N(8,"input",6),g(9,"label",7),y(10,"Password"),m(),N(11,"input",8),m(),g(12,"button",9),y(13),m(),g(14,"p",10),y(15),g(16,"span",11),M("click",function(){return O(s),k(r.onChangeForm())})("keydown",function(a){return O(s),k(r.handleChangeForm(a))}),y(17),m()()()(),ne(18,X1,7,2,"div",12)}if(i&2){let s=Re(2);C(4),ee(r.isSignUp?"Sign Up":"Sign In"),C(8),me("disabled",!s.valid),C(),st(" ",r.isSignUp?"Sign Up":"Sign In"," "),C(2),st(" ",r.isSignUp?"Already":"Don't"," have an account? "),C(2),st(" ",r.isSignUp?"Sign In":"Sign Up"," "),C(),H(r.isAlert?18:-1)}},dependencies:[wt,Ct,Ze,bt,xt,dt,jd,zd,ut,lt],styles:[".form-container[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:120px 30px 30px;width:700px;height:fit-content;padding:60px;border:3px solid var(--main);border-radius:15px;box-shadow:0 0 5px #00000040}h1[_ngcontent-%COMP%]{margin-bottom:60px;text-align:center;font-size:45px;color:var(--secondary)}.inputs-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:30px}label[_ngcontent-%COMP%]{margin-bottom:10px;font-size:35px;color:var(--secondary)}input[_ngcontent-%COMP%]{margin-bottom:30px;height:70px;padding-left:20px;font-size:30px;border:none;border-radius:5px;background-color:var(--secondary);color:var(--primary);box-shadow:0 0 5px #00000040}input[_ngcontent-%COMP%]::placeholder{color:var(--primary)}button[_ngcontent-%COMP%]{margin-bottom:30px;height:80px;font-size:35px;background-color:var(--main);color:#f7f9fc;border:none;border-radius:10px;box-shadow:0 0 5px #00000040;cursor:pointer}button[_ngcontent-%COMP%]:disabled{opacity:50%}.bottom-text[_ngcontent-%COMP%]{text-align:center;font-size:25px;color:var(--secondary)}span[_ngcontent-%COMP%]{text-decoration:underline;cursor:pointer}.alert-container[_ngcontent-%COMP%]{position:fixed;inset:0;width:100%;padding-left:250px;display:flex;justify-content:center;align-items:center;background-color:#0000007f;z-index:10}.alert[_ngcontent-%COMP%]{width:700px;height:fit-content;margin:30px;padding:60px;background-color:var(--primary);box-shadow:0 0 5px #00000040;border:3px solid var(--main);border-radius:15px;position:relative}i[_ngcontent-%COMP%]{position:absolute;top:15px;right:15px;font-size:50px;color:var(--secondary);cursor:pointer}.alert-name[_ngcontent-%COMP%]{margin-bottom:10px;font-size:35px;color:var(--secondary)}.alert-msg[_ngcontent-%COMP%]{font-size:30px;color:var(--secondary)}@media (width <= 1479px){.alert-container[_ngcontent-%COMP%]{padding-left:200px}}@media (width <= 1279px){form[_ngcontent-%COMP%]{width:500px;padding:30px;margin-top:60px}h1[_ngcontent-%COMP%]{margin-bottom:30px;font-size:40px}label[_ngcontent-%COMP%]{font-size:30px}input[_ngcontent-%COMP%]{height:60px;font-size:25px}button[_ngcontent-%COMP%]{height:70px;font-size:30px}.bottom-text[_ngcontent-%COMP%]{font-size:20px}.alert-container[_ngcontent-%COMP%]{padding-left:0}.alert[_ngcontent-%COMP%]{width:500px;padding:60px 30px 30px}i[_ngcontent-%COMP%]{font-size:50px}.alert-name[_ngcontent-%COMP%]{font-size:30px}.alert-msg[_ngcontent-%COMP%]{font-size:25px}}"]})}return n})();function ua(n){return n+.5|0}var oi=(n,e,t)=>Math.max(Math.min(n,t),e);function ca(n){return oi(ua(n*2.55),0,255)}function ai(n){return oi(ua(n*255),0,255)}function Rn(n){return oi(ua(n/2.55)/100,0,1)}function vb(n){return oi(ua(n*100),0,100)}var $t={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Vp=[..."0123456789ABCDEF"],Q1=n=>Vp[n&15],J1=n=>Vp[(n&240)>>4]+Vp[n&15],Tl=n=>(n&240)>>4===(n&15),Z1=n=>Tl(n.r)&&Tl(n.g)&&Tl(n.b)&&Tl(n.a);function eD(n){var e=n.length,t;return n[0]==="#"&&(e===4||e===5?t={r:255&$t[n[1]]*17,g:255&$t[n[2]]*17,b:255&$t[n[3]]*17,a:e===5?$t[n[4]]*17:255}:(e===7||e===9)&&(t={r:$t[n[1]]<<4|$t[n[2]],g:$t[n[3]]<<4|$t[n[4]],b:$t[n[5]]<<4|$t[n[6]],a:e===9?$t[n[7]]<<4|$t[n[8]]:255})),t}var tD=(n,e)=>n<255?e(n):"";function nD(n){var e=Z1(n)?Q1:J1;return n?"#"+e(n.r)+e(n.g)+e(n.b)+tD(n.a,e):void 0}var iD=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Cb(n,e,t){let i=e*Math.min(t,1-t),r=(s,o=(s+n/30)%12)=>t-i*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function rD(n,e,t){let i=(r,s=(r+n/60)%6)=>t-t*e*Math.max(Math.min(s,4-s,1),0);return[i(5),i(3),i(1)]}function sD(n,e,t){let i=Cb(n,1,.5),r;for(e+t>1&&(r=1/(e+t),e*=r,t*=r),r=0;r<3;r++)i[r]*=1-e-t,i[r]+=e;return i}function oD(n,e,t,i,r){return n===r?(e-t)/i+(e<t?6:0):e===r?(t-n)/i+2:(n-e)/i+4}function Up(n){let t=n.r/255,i=n.g/255,r=n.b/255,s=Math.max(t,i,r),o=Math.min(t,i,r),a=(s+o)/2,c,l,u;return s!==o&&(u=s-o,l=a>.5?u/(2-s-o):u/(s+o),c=oD(t,i,r,u,s),c=c*60+.5),[c|0,l||0,a]}function zp(n,e,t,i){return(Array.isArray(e)?n(e[0],e[1],e[2]):n(e,t,i)).map(ai)}function jp(n,e,t){return zp(Cb,n,e,t)}function aD(n,e,t){return zp(sD,n,e,t)}function cD(n,e,t){return zp(rD,n,e,t)}function wb(n){return(n%360+360)%360}function lD(n){let e=iD.exec(n),t=255,i;if(!e)return;e[5]!==i&&(t=e[6]?ca(+e[5]):ai(+e[5]));let r=wb(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?i=aD(r,s,o):e[1]==="hsv"?i=cD(r,s,o):i=jp(r,s,o),{r:i[0],g:i[1],b:i[2],a:t}}function uD(n,e){var t=Up(n);t[0]=wb(t[0]+e),t=jp(t),n.r=t[0],n.g=t[1],n.b=t[2]}function dD(n){if(!n)return;let e=Up(n),t=e[0],i=vb(e[1]),r=vb(e[2]);return n.a<255?`hsla(${t}, ${i}%, ${r}%, ${Rn(n.a)})`:`hsl(${t}, ${i}%, ${r}%)`}var yb={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},bb={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function hD(){let n={},e=Object.keys(bb),t=Object.keys(yb),i,r,s,o,a;for(i=0;i<e.length;i++){for(o=a=e[i],r=0;r<t.length;r++)s=t[r],a=a.replace(s,yb[s]);s=parseInt(bb[o],16),n[a]=[s>>16&255,s>>8&255,s&255]}return n}var Al;function fD(n){Al||(Al=hD(),Al.transparent=[0,0,0,0]);let e=Al[n.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}var pD=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function mD(n){let e=pD.exec(n),t=255,i,r,s;if(e){if(e[7]!==i){let o=+e[7];t=e[8]?ca(o):oi(o*255,0,255)}return i=+e[1],r=+e[3],s=+e[5],i=255&(e[2]?ca(i):oi(i,0,255)),r=255&(e[4]?ca(r):oi(r,0,255)),s=255&(e[6]?ca(s):oi(s,0,255)),{r:i,g:r,b:s,a:t}}}function gD(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${Rn(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}var Fp=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,as=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function _D(n,e,t){let i=as(Rn(n.r)),r=as(Rn(n.g)),s=as(Rn(n.b));return{r:ai(Fp(i+t*(as(Rn(e.r))-i))),g:ai(Fp(r+t*(as(Rn(e.g))-r))),b:ai(Fp(s+t*(as(Rn(e.b))-s))),a:n.a+t*(e.a-n.a)}}function Ml(n,e,t){if(n){let i=Up(n);i[e]=Math.max(0,Math.min(i[e]+i[e]*t,e===0?360:1)),i=jp(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function Sb(n,e){return n&&Object.assign(e||{},n)}function xb(n){var e={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(e={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(e.a=ai(n[3]))):(e=Sb(n,{r:0,g:0,b:0,a:1}),e.a=ai(e.a)),e}function vD(n){return n.charAt(0)==="r"?mD(n):lD(n)}var la=class n{constructor(e){if(e instanceof n)return e;let t=typeof e,i;t==="object"?i=xb(e):t==="string"&&(i=eD(e)||fD(e)||vD(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=Sb(this._rgb);return e&&(e.a=Rn(e.a)),e}set rgb(e){this._rgb=xb(e)}rgbString(){return this._valid?gD(this._rgb):void 0}hexString(){return this._valid?nD(this._rgb):void 0}hslString(){return this._valid?dD(this._rgb):void 0}mix(e,t){if(e){let i=this.rgb,r=e.rgb,s,o=t===s?.5:t,a=2*o-1,c=i.a-r.a,l=((a*c===-1?a:(a+c)/(1+a*c))+1)/2;s=1-l,i.r=255&l*i.r+s*r.r+.5,i.g=255&l*i.g+s*r.g+.5,i.b=255&l*i.b+s*r.b+.5,i.a=o*i.a+(1-o)*r.a,this.rgb=i}return this}interpolate(e,t){return e&&(this._rgb=_D(this._rgb,e._rgb,t)),this}clone(){return new n(this.rgb)}alpha(e){return this._rgb.a=ai(e),this}clearer(e){let t=this._rgb;return t.a*=1-e,this}greyscale(){let e=this._rgb,t=ua(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){let t=this._rgb;return t.a*=1+e,this}negate(){let e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Ml(this._rgb,2,e),this}darken(e){return Ml(this._rgb,2,-e),this}saturate(e){return Ml(this._rgb,1,e),this}desaturate(e){return Ml(this._rgb,1,-e),this}rotate(e){return uD(this._rgb,e),this}};function mn(){}var kb=(()=>{let n=0;return()=>n++})();function Ee(n){return n===null||typeof n>"u"}function Te(n){if(Array.isArray&&Array.isArray(n))return!0;let e=Object.prototype.toString.call(n);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function te(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function Ue(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function Et(n,e){return Ue(n)?n:e}function re(n,e){return typeof n>"u"?e:n}var Db=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/e,$p=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*e:+n;function he(n,e,t){if(n&&typeof n.call=="function")return n.apply(t,e)}function ae(n,e,t,i){let r,s,o;if(Te(n))if(s=n.length,i)for(r=s-1;r>=0;r--)e.call(t,n[r],r);else for(r=0;r<s;r++)e.call(t,n[r],r);else if(te(n))for(o=Object.keys(n),s=o.length,r=0;r<s;r++)e.call(t,n[o[r]],o[r])}function fa(n,e){let t,i,r,s;if(!n||!e||n.length!==e.length)return!1;for(t=0,i=n.length;t<i;++t)if(r=n[t],s=e[t],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function kl(n){if(Te(n))return n.map(kl);if(te(n)){let e=Object.create(null),t=Object.keys(n),i=t.length,r=0;for(;r<i;++r)e[t[r]]=kl(n[t[r]]);return e}return n}function Rb(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function yD(n,e,t,i){if(!Rb(n))return;let r=e[n],s=t[n];te(r)&&te(s)?ls(r,s,i):e[n]=kl(s)}function ls(n,e,t){let i=Te(e)?e:[e],r=i.length;if(!te(n))return n;t=t||{};let s=t.merger||yD,o;for(let a=0;a<r;++a){if(o=i[a],!te(o))continue;let c=Object.keys(o);for(let l=0,u=c.length;l<u;++l)s(c[l],n,o,t)}return n}function us(n,e){return ls(n,e,{merger:bD})}function bD(n,e,t){if(!Rb(n))return;let i=e[n],r=t[n];te(i)&&te(r)?us(i,r):Object.prototype.hasOwnProperty.call(e,n)||(e[n]=kl(r))}var Eb={"":n=>n,x:n=>n.x,y:n=>n.y};function xD(n){let e=n.split("."),t=[],i="";for(let r of e)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(t.push(i),i="");return t}function CD(n){let e=xD(n);return t=>{for(let i of e){if(i==="")break;t=t&&t[i]}return t}}function nr(n,e){return(Eb[e]||(Eb[e]=CD(e)))(n)}function Nl(n){return n.charAt(0).toUpperCase()+n.slice(1)}var pa=n=>typeof n<"u",Nn=n=>typeof n=="function",Gp=(n,e)=>{if(n.size!==e.size)return!1;for(let t of n)if(!e.has(t))return!1;return!0};function Nb(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}var Ae=Math.PI,Se=2*Ae,UW=Se+Ae,Dl=Number.POSITIVE_INFINITY,wD=Ae/180,ke=Ae/2,Zi=Ae/4,Ib=Ae*2/3,Ln=Math.log10,ma=Math.sign;function ga(n,e,t){return Math.abs(n-e)<t}function qp(n){let e=Math.round(n);n=ga(n,e,n/1e3)?e:n;let t=Math.pow(10,Math.floor(Ln(n))),i=n/t;return(i<=1?1:i<=2?2:i<=5?5:10)*t}function Lb(n){let e=[],t=Math.sqrt(n),i;for(i=1;i<t;i++)n%i===0&&(e.push(i),e.push(n/i));return t===(t|0)&&e.push(t),e.sort((r,s)=>r-s).pop(),e}function _a(n){return!isNaN(parseFloat(n))&&isFinite(n)}function Fb(n,e){let t=Math.round(n);return t-e<=n&&t+e>=n}function Yp(n,e,t){let i,r,s;for(i=0,r=n.length;i<r;i++)s=n[i][t],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function Gt(n){return n*(Ae/180)}function Ll(n){return n*(180/Ae)}function Kp(n){if(!Ue(n))return;let e=1,t=0;for(;Math.round(n*e)/e!==n;)e*=10,t++;return t}function Xp(n,e){let t=e.x-n.x,i=e.y-n.y,r=Math.sqrt(t*t+i*i),s=Math.atan2(i,t);return s<-.5*Ae&&(s+=Se),{angle:s,distance:r}}function Vb(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function sn(n){return(n%Se+Se)%Se}function va(n,e,t,i){let r=sn(n),s=sn(e),o=sn(t),a=sn(s-r),c=sn(o-r),l=sn(r-s),u=sn(r-o);return r===s||r===o||i&&s===o||a>c&&l<u}function Vt(n,e,t){return Math.max(e,Math.min(t,n))}function Ub(n){return Vt(n,-32768,32767)}function ds(n,e,t,i=1e-6){return n>=Math.min(e,t)-i&&n<=Math.max(e,t)+i}function Fl(n,e,t){t=t||(o=>n[o]<e);let i=n.length-1,r=0,s;for(;i-r>1;)s=r+i>>1,t(s)?r=s:i=s;return{lo:r,hi:i}}var Vl=(n,e,t,i)=>Fl(n,t,i?r=>{let s=n[r][e];return s<t||s===t&&n[r+1][e]===t}:r=>n[r][e]<t),zb=(n,e,t)=>Fl(n,t,i=>n[i][e]>=t);function jb(n,e,t){let i=0,r=n.length;for(;i<r&&n[i]<e;)i++;for(;r>i&&n[r-1]>t;)r--;return i>0||r<n.length?n.slice(i,r):n}var Bb=["push","pop","shift","splice","unshift"];function Wb(n,e){if(n._chartjs){n._chartjs.listeners.push(e);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),Bb.forEach(t=>{let i="_onData"+Nl(t),r=n[t];Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value(...s){let o=r.apply(this,s);return n._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...s)}),o}})})}function Qp(n,e){let t=n._chartjs;if(!t)return;let i=t.listeners,r=i.indexOf(e);r!==-1&&i.splice(r,1),!(i.length>0)&&(Bb.forEach(s=>{delete n[s]}),delete n._chartjs)}function Hb(n){let e=new Set(n);return e.size===n.length?n:Array.from(e)}var Jp=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function Zp(n,e){let t=[],i=!1;return function(...r){t=r,i||(i=!0,Jp.call(window,()=>{i=!1,n.apply(e,t)}))}}function $b(n,e){let t;return function(...i){return e?(clearTimeout(t),t=setTimeout(n,e,i)):n.apply(this,i),e}}var em=n=>n==="start"?"left":n==="end"?"right":"center",It=(n,e,t)=>n==="start"?e:n==="end"?t:(e+t)/2,Gb=(n,e,t,i)=>n===(i?"left":"right")?t:n==="center"?(e+t)/2:e;var Pl=n=>n===0||n===1,Tb=(n,e,t)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-e)*Se/t)),Ab=(n,e,t)=>Math.pow(2,-10*n)*Math.sin((n-e)*Se/t)+1,cs={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*ke)+1,easeOutSine:n=>Math.sin(n*ke),easeInOutSine:n=>-.5*(Math.cos(Ae*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>Pl(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>Pl(n)?n:Tb(n,.075,.3),easeOutElastic:n=>Pl(n)?n:Ab(n,.075,.3),easeInOutElastic(n){return Pl(n)?n:n<.5?.5*Tb(n*2,.1125,.45):.5+.5*Ab(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let e=1.70158;return(n/=.5)<1?.5*(n*n*(((e*=1.525)+1)*n-e)):.5*((n-=2)*n*(((e*=1.525)+1)*n+e)+2)},easeInBounce:n=>1-cs.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?cs.easeInBounce(n*2)*.5:cs.easeOutBounce(n*2-1)*.5+.5};function qb(n){if(n&&typeof n=="object"){let e=n.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function tm(n){return qb(n)?n:new la(n)}function Bp(n){return qb(n)?n:new la(n).saturate(.5).darken(.1).hexString()}var SD=["x","y","borderWidth","radius","tension"],ED=["color","borderColor","backgroundColor"];function ID(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),n.set("animations",{colors:{type:"color",properties:ED},numbers:{type:"number",properties:SD}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function TD(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}var Mb=new Map;function AD(n,e){e=e||{};let t=n+JSON.stringify(e),i=Mb.get(t);return i||(i=new Intl.NumberFormat(n,e),Mb.set(t,i)),i}function hs(n,e,t){return AD(e,t).format(n)}var Yb={values(n){return Te(n)?n:""+n},numeric(n,e,t){if(n===0)return"0";let i=this.chart.options.locale,r,s=n;if(t.length>1){let l=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(l<1e-4||l>1e15)&&(r="scientific"),s=MD(n,t)}let o=Ln(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),c={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(c,this.options.ticks.format),hs(n,i,c)},logarithmic(n,e,t){if(n===0)return"0";let i=t[e].significand||n/Math.pow(10,Math.floor(Ln(n)));return[1,2,3,5,10,15].includes(i)||e>.8*t.length?Yb.numeric.call(this,n,e,t):""}};function MD(n,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&n!==Math.floor(n)&&(t=n-Math.floor(n)),t}var ya={formatters:Yb};function PD(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:ya.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}var ci=Object.create(null),Ul=Object.create(null);function da(n,e){if(!e)return n;let t=e.split(".");for(let i=0,r=t.length;i<r;++i){let s=t[i];n=n[s]||(n[s]=Object.create(null))}return n}function Wp(n,e,t){return typeof e=="string"?ls(da(n,e),t):ls(da(n,""),e)}var Hp=class{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>Bp(r.backgroundColor),this.hoverBorderColor=(i,r)=>Bp(r.borderColor),this.hoverColor=(i,r)=>Bp(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return Wp(this,e,t)}get(e){return da(this,e)}describe(e,t){return Wp(Ul,e,t)}override(e,t){return Wp(ci,e,t)}route(e,t,i,r){let s=da(this,e),o=da(this,i),a="_"+t;Object.defineProperties(s,{[a]:{value:s[t],writable:!0},[t]:{enumerable:!0,get(){let c=this[a],l=o[r];return te(c)?Object.assign({},l,c):re(c,l)},set(c){this[a]=c}}})}apply(e){e.forEach(t=>t(this))}},ge=new Hp({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[ID,TD,PD]);function OD(n){return!n||Ee(n.size)||Ee(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function ha(n,e,t,i,r){let s=e[r];return s||(s=e[r]=n.measureText(r).width,t.push(r)),s>i&&(i=s),i}function Kb(n,e,t,i){i=i||{};let r=i.data=i.data||{},s=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(r=i.data={},s=i.garbageCollect=[],i.font=e),n.save(),n.font=e;let o=0,a=t.length,c,l,u,d,h;for(c=0;c<a;c++)if(d=t[c],d!=null&&!Te(d))o=ha(n,r,s,o,d);else if(Te(d))for(l=0,u=d.length;l<u;l++)h=d[l],h!=null&&!Te(h)&&(o=ha(n,r,s,o,h));n.restore();let f=s.length/2;if(f>t.length){for(c=0;c<f;c++)delete r[s[c]];s.splice(0,f)}return o}function li(n,e,t){let i=n.currentDevicePixelRatio,r=t!==0?Math.max(t/2,.5):0;return Math.round((e-r)*i)/i+r}function nm(n,e){!e&&!n||(e=e||n.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,n.width,n.height),e.restore())}function im(n,e,t,i){rm(n,e,t,i,null)}function rm(n,e,t,i,r){let s,o,a,c,l,u,d,h,f=e.pointStyle,p=e.rotation,_=e.radius,v=(p||0)*wD;if(f&&typeof f=="object"&&(s=f.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){n.save(),n.translate(t,i),n.rotate(v),n.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),n.restore();return}if(!(isNaN(_)||_<=0)){switch(n.beginPath(),f){default:r?n.ellipse(t,i,r/2,_,0,0,Se):n.arc(t,i,_,0,Se),n.closePath();break;case"triangle":u=r?r/2:_,n.moveTo(t+Math.sin(v)*u,i-Math.cos(v)*_),v+=Ib,n.lineTo(t+Math.sin(v)*u,i-Math.cos(v)*_),v+=Ib,n.lineTo(t+Math.sin(v)*u,i-Math.cos(v)*_),n.closePath();break;case"rectRounded":l=_*.516,c=_-l,o=Math.cos(v+Zi)*c,d=Math.cos(v+Zi)*(r?r/2-l:c),a=Math.sin(v+Zi)*c,h=Math.sin(v+Zi)*(r?r/2-l:c),n.arc(t-d,i-a,l,v-Ae,v-ke),n.arc(t+h,i-o,l,v-ke,v),n.arc(t+d,i+a,l,v,v+ke),n.arc(t-h,i+o,l,v+ke,v+Ae),n.closePath();break;case"rect":if(!p){c=Math.SQRT1_2*_,u=r?r/2:c,n.rect(t-u,i-c,2*u,2*c);break}v+=Zi;case"rectRot":d=Math.cos(v)*(r?r/2:_),o=Math.cos(v)*_,a=Math.sin(v)*_,h=Math.sin(v)*(r?r/2:_),n.moveTo(t-d,i-a),n.lineTo(t+h,i-o),n.lineTo(t+d,i+a),n.lineTo(t-h,i+o),n.closePath();break;case"crossRot":v+=Zi;case"cross":d=Math.cos(v)*(r?r/2:_),o=Math.cos(v)*_,a=Math.sin(v)*_,h=Math.sin(v)*(r?r/2:_),n.moveTo(t-d,i-a),n.lineTo(t+d,i+a),n.moveTo(t+h,i-o),n.lineTo(t-h,i+o);break;case"star":d=Math.cos(v)*(r?r/2:_),o=Math.cos(v)*_,a=Math.sin(v)*_,h=Math.sin(v)*(r?r/2:_),n.moveTo(t-d,i-a),n.lineTo(t+d,i+a),n.moveTo(t+h,i-o),n.lineTo(t-h,i+o),v+=Zi,d=Math.cos(v)*(r?r/2:_),o=Math.cos(v)*_,a=Math.sin(v)*_,h=Math.sin(v)*(r?r/2:_),n.moveTo(t-d,i-a),n.lineTo(t+d,i+a),n.moveTo(t+h,i-o),n.lineTo(t-h,i+o);break;case"line":o=r?r/2:Math.cos(v)*_,a=Math.sin(v)*_,n.moveTo(t-o,i-a),n.lineTo(t+o,i+a);break;case"dash":n.moveTo(t,i),n.lineTo(t+Math.cos(v)*(r?r/2:_),i+Math.sin(v)*_);break;case!1:n.closePath();break}n.fill(),e.borderWidth>0&&n.stroke()}}function ir(n,e,t){return t=t||.5,!e||n&&n.x>e.left-t&&n.x<e.right+t&&n.y>e.top-t&&n.y<e.bottom+t}function zl(n,e){n.save(),n.beginPath(),n.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),n.clip()}function jl(n){n.restore()}function kD(n,e){e.translation&&n.translate(e.translation[0],e.translation[1]),Ee(e.rotation)||n.rotate(e.rotation),e.color&&(n.fillStyle=e.color),e.textAlign&&(n.textAlign=e.textAlign),e.textBaseline&&(n.textBaseline=e.textBaseline)}function DD(n,e,t,i,r){if(r.strikethrough||r.underline){let s=n.measureText(i),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,c=t-s.actualBoundingBoxAscent,l=t+s.actualBoundingBoxDescent,u=r.strikethrough?(c+l)/2:l;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=r.decorationWidth||2,n.moveTo(o,u),n.lineTo(a,u),n.stroke()}}function RD(n,e){let t=n.fillStyle;n.fillStyle=e.color,n.fillRect(e.left,e.top,e.width,e.height),n.fillStyle=t}function rr(n,e,t,i,r,s={}){let o=Te(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="",c,l;for(n.save(),n.font=r.string,kD(n,s),c=0;c<o.length;++c)l=o[c],s.backdrop&&RD(n,s.backdrop),a&&(s.strokeColor&&(n.strokeStyle=s.strokeColor),Ee(s.strokeWidth)||(n.lineWidth=s.strokeWidth),n.strokeText(l,t,i,s.maxWidth)),n.fillText(l,t,i,s.maxWidth),DD(n,t,i,l,s),i+=Number(r.lineHeight);n.restore()}function ba(n,e){let{x:t,y:i,w:r,h:s,radius:o}=e;n.arc(t+o.topLeft,i+o.topLeft,o.topLeft,1.5*Ae,Ae,!0),n.lineTo(t,i+s-o.bottomLeft),n.arc(t+o.bottomLeft,i+s-o.bottomLeft,o.bottomLeft,Ae,ke,!0),n.lineTo(t+r-o.bottomRight,i+s),n.arc(t+r-o.bottomRight,i+s-o.bottomRight,o.bottomRight,ke,0,!0),n.lineTo(t+r,i+o.topRight),n.arc(t+r-o.topRight,i+o.topRight,o.topRight,0,-ke,!0),n.lineTo(t+o.topLeft,i)}var ND=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,LD=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function FD(n,e){let t=(""+n).match(ND);if(!t||t[1]==="normal")return e*1.2;switch(n=+t[2],t[3]){case"px":return n;case"%":n/=100;break}return e*n}var VD=n=>+n||0;function Bl(n,e){let t={},i=te(e),r=i?Object.keys(e):e,s=te(n)?i?o=>re(n[o],n[e[o]]):o=>n[o]:()=>n;for(let o of r)t[o]=VD(s(o));return t}function Xb(n){return Bl(n,{top:"y",right:"x",bottom:"y",left:"x"})}function sr(n){return Bl(n,["topLeft","topRight","bottomLeft","bottomRight"])}function tt(n){let e=Xb(n);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Ge(n,e){n=n||{},e=e||ge.font;let t=re(n.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let i=re(n.style,e.style);i&&!(""+i).match(LD)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);let r={family:re(n.family,e.family),lineHeight:FD(re(n.lineHeight,e.lineHeight),t),size:t,style:i,weight:re(n.weight,e.weight),string:""};return r.string=OD(r),r}function xa(n,e,t,i){let r=!0,s,o,a;for(s=0,o=n.length;s<o;++s)if(a=n[s],a!==void 0&&(e!==void 0&&typeof a=="function"&&(a=a(e),r=!1),t!==void 0&&Te(a)&&(a=a[t%a.length],r=!1),a!==void 0))return i&&!r&&(i.cacheable=!1),a}function Qb(n,e,t){let{min:i,max:r}=n,s=$p(e,(r-i)/2),o=(a,c)=>t&&a===0?0:a+c;return{min:o(i,-Math.abs(s)),max:o(r,s)}}function ui(n,e){return Object.assign(Object.create(n),e)}function Wl(n,e=[""],t,i,r=()=>n[0]){let s=t||n;typeof i>"u"&&(i=ex("_fallback",n));let o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:s,_fallback:i,_getTarget:r,override:a=>Wl([a,...n],e,s,i)};return new Proxy(o,{deleteProperty(a,c){return delete a[c],delete a._keys,delete n[0][c],!0},get(a,c){return Jb(a,c,()=>GD(c,e,n,a))},getOwnPropertyDescriptor(a,c){return Reflect.getOwnPropertyDescriptor(a._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(a,c){return Ob(a).includes(c)},ownKeys(a){return Ob(a)},set(a,c,l){let u=a._storage||(a._storage=r());return a[c]=u[c]=l,delete a._keys,!0}})}function tr(n,e,t,i){let r={_cacheable:!1,_proxy:n,_context:e,_subProxy:t,_stack:new Set,_descriptors:sm(n,i),setContext:s=>tr(n,s,t,i),override:s=>tr(n.override(s),e,t,i)};return new Proxy(r,{deleteProperty(s,o){return delete s[o],delete n[o],!0},get(s,o,a){return Jb(s,o,()=>zD(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(n,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,o)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(s,o){return Reflect.has(n,o)},ownKeys(){return Reflect.ownKeys(n)},set(s,o,a){return n[o]=a,delete s[o],!0}})}function sm(n,e={scriptable:!0,indexable:!0}){let{_scriptable:t=e.scriptable,_indexable:i=e.indexable,_allKeys:r=e.allKeys}=n;return{allKeys:r,scriptable:t,indexable:i,isScriptable:Nn(t)?t:()=>t,isIndexable:Nn(i)?i:()=>i}}var UD=(n,e)=>n?n+Nl(e):e,om=(n,e)=>te(e)&&n!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function Jb(n,e,t){if(Object.prototype.hasOwnProperty.call(n,e)||e==="constructor")return n[e];let i=t();return n[e]=i,i}function zD(n,e,t){let{_proxy:i,_context:r,_subProxy:s,_descriptors:o}=n,a=i[e];return Nn(a)&&o.isScriptable(e)&&(a=jD(e,a,n,t)),Te(a)&&a.length&&(a=BD(e,a,n,o.isIndexable)),om(e,a)&&(a=tr(a,r,s&&s[e],o)),a}function jD(n,e,t,i){let{_proxy:r,_context:s,_subProxy:o,_stack:a}=t;if(a.has(n))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+n);a.add(n);let c=e(s,o||i);return a.delete(n),om(n,c)&&(c=am(r._scopes,r,n,c)),c}function BD(n,e,t,i){let{_proxy:r,_context:s,_subProxy:o,_descriptors:a}=t;if(typeof s.index<"u"&&i(n))return e[s.index%e.length];if(te(e[0])){let c=e,l=r._scopes.filter(u=>u!==c);e=[];for(let u of c){let d=am(l,r,n,u);e.push(tr(d,s,o&&o[n],a))}}return e}function Zb(n,e,t){return Nn(n)?n(e,t):n}var WD=(n,e)=>n===!0?e:typeof n=="string"?nr(e,n):void 0;function HD(n,e,t,i,r){for(let s of e){let o=WD(t,s);if(o){n.add(o);let a=Zb(o._fallback,t,r);if(typeof a<"u"&&a!==t&&a!==i)return a}else if(o===!1&&typeof i<"u"&&t!==i)return null}return!1}function am(n,e,t,i){let r=e._rootScopes,s=Zb(e._fallback,t,i),o=[...n,...r],a=new Set;a.add(i);let c=Pb(a,o,t,s||t,i);return c===null||typeof s<"u"&&s!==t&&(c=Pb(a,o,s,c,i),c===null)?!1:Wl(Array.from(a),[""],r,s,()=>$D(e,t,i))}function Pb(n,e,t,i,r){for(;t;)t=HD(n,e,t,i,r);return t}function $D(n,e,t){let i=n._getTarget();e in i||(i[e]={});let r=i[e];return Te(r)&&te(t)?t:r||{}}function GD(n,e,t,i){let r;for(let s of e)if(r=ex(UD(s,n),t),typeof r<"u")return om(n,r)?am(t,i,n,r):r}function ex(n,e){for(let t of e){if(!t)continue;let i=t[n];if(typeof i<"u")return i}}function Ob(n){let e=n._keys;return e||(e=n._keys=qD(n._scopes)),e}function qD(n){let e=new Set;for(let t of n)for(let i of Object.keys(t).filter(r=>!r.startsWith("_")))e.add(i);return Array.from(e)}function tx(n,e,t,i){let{iScale:r}=n,{key:s="r"}=this._parsing,o=new Array(i),a,c,l,u;for(a=0,c=i;a<c;++a)l=a+t,u=e[l],o[a]={r:r.parse(nr(u,s),l)};return o}var zW=Number.EPSILON||1e-14;function Hl(){return typeof window<"u"&&typeof document<"u"}function $l(n){let e=n.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Rl(n,e,t){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*e.parentNode[t])):i=n,i}var Gl=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function YD(n,e){return Gl(n).getPropertyValue(e)}var KD=["top","right","bottom","left"];function er(n,e,t){let i={};t=t?"-"+t:"";for(let r=0;r<4;r++){let s=KD[r];i[s]=parseFloat(n[e+"-"+s+t])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}var XD=(n,e,t)=>(n>0||e>0)&&(!t||!t.shadowRoot);function QD(n,e){let t=n.touches,i=t&&t.length?t[0]:n,{offsetX:r,offsetY:s}=i,o=!1,a,c;if(XD(r,s,n.target))a=r,c=s;else{let l=e.getBoundingClientRect();a=i.clientX-l.left,c=i.clientY-l.top,o=!0}return{x:a,y:c,box:o}}function di(n,e){if("native"in n)return n;let{canvas:t,currentDevicePixelRatio:i}=e,r=Gl(t),s=r.boxSizing==="border-box",o=er(r,"padding"),a=er(r,"border","width"),{x:c,y:l,box:u}=QD(n,t),d=o.left+(u&&a.left),h=o.top+(u&&a.top),{width:f,height:p}=e;return s&&(f-=o.width+a.width,p-=o.height+a.height),{x:Math.round((c-d)/f*t.width/i),y:Math.round((l-h)/p*t.height/i)}}function JD(n,e,t){let i,r;if(e===void 0||t===void 0){let s=n&&$l(n);if(!s)e=n.clientWidth,t=n.clientHeight;else{let o=s.getBoundingClientRect(),a=Gl(s),c=er(a,"border","width"),l=er(a,"padding");e=o.width-l.width-c.width,t=o.height-l.height-c.height,i=Rl(a.maxWidth,s,"clientWidth"),r=Rl(a.maxHeight,s,"clientHeight")}}return{width:e,height:t,maxWidth:i||Dl,maxHeight:r||Dl}}var Ol=n=>Math.round(n*10)/10;function nx(n,e,t,i){let r=Gl(n),s=er(r,"margin"),o=Rl(r.maxWidth,n,"clientWidth")||Dl,a=Rl(r.maxHeight,n,"clientHeight")||Dl,c=JD(n,e,t),{width:l,height:u}=c;if(r.boxSizing==="content-box"){let h=er(r,"border","width"),f=er(r,"padding");l-=f.width+h.width,u-=f.height+h.height}return l=Math.max(0,l-s.width),u=Math.max(0,i?l/i:u-s.height),l=Ol(Math.min(l,o,c.maxWidth)),u=Ol(Math.min(u,a,c.maxHeight)),l&&!u&&(u=Ol(l/2)),(e!==void 0||t!==void 0)&&i&&c.height&&u>c.height&&(u=c.height,l=Ol(Math.floor(u*i))),{width:l,height:u}}function cm(n,e,t){let i=e||1,r=Math.floor(n.height*i),s=Math.floor(n.width*i);n.height=Math.floor(n.height),n.width=Math.floor(n.width);let o=n.canvas;return o.style&&(t||!o.style.height&&!o.style.width)&&(o.style.height=`${n.height}px`,o.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||o.height!==r||o.width!==s?(n.currentDevicePixelRatio=i,o.height=r,o.width=s,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}var ix=function(){let n=!1;try{let e={get passive(){return n=!0,!1}};Hl()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return n}();function lm(n,e){let t=YD(n,e),i=t&&t.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}var ZD=function(n,e){return{x(t){return n+n+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,i){return t-i},leftForLtr(t,i){return t-i}}},eR=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,e){return n+e},leftForLtr(n,e){return n}}};function or(n,e,t){return n?ZD(e,t):eR()}function um(n,e){let t,i;(e==="ltr"||e==="rtl")&&(t=n.canvas.style,i=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),n.prevTextDirection=i)}function dm(n,e){e!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",e[0],e[1]))}var _m=class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,i,r){let s=t.listeners[r],o=t.duration;s.forEach(a=>a({chart:e,initial:t.initial,numSteps:o,currentStep:Math.min(i-t.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=Jp.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;let s=i.items,o=s.length-1,a=!1,c;for(;o>=0;--o)c=s[o],c._active?(c._total>i.duration&&(i.duration=c._total),c.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(r.draw(),this._notify(r,i,e,"progress")),s.length||(i.running=!1,this._notify(r,i,e,"complete"),i.initial=!1),t+=s.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){let t=this._charts,i=t.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,i)),i}listen(e,t,i){this._getAnims(e).listeners[t].push(i)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){let t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;let t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){let t=this._charts.get(e);if(!t||!t.items.length)return;let i=t.items,r=i.length-1;for(;r>=0;--r)i[r].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}},Fn=new _m,rx="transparent",tR={boolean(n,e,t){return t>.5?e:n},color(n,e,t){let i=tm(n||rx),r=i.valid&&tm(e||rx);return r&&r.valid?r.mix(i,t).hexString():e},number(n,e,t){return n+(e-n)*t}},vm=class{constructor(e,t,i,r){let s=t[i];r=xa([e.to,r,s,e.from]);let o=xa([e.from,s,r]);this._active=!0,this._fn=e.fn||tR[e.type||typeof o],this._easing=cs[e.easing]||cs.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=i,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(e,t,i){if(this._active){this._notify(!1);let r=this._target[this._prop],s=i-this._start,o=this._duration-s;this._start=i,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=xa([e.to,t,r,e.from]),this._from=xa([e.from,r,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){let t=e-this._start,i=this._duration,r=this._prop,s=this._from,o=this._loop,a=this._to,c;if(this._active=s!==a&&(o||t<i),!this._active){this._target[r]=a,this._notify(!0);return}if(t<0){this._target[r]=s;return}c=t/i%2,c=o&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[r]=this._fn(s,a,c)}wait(){let e=this._promises||(this._promises=[]);return new Promise((t,i)=>{e.push({res:t,rej:i})})}_notify(e){let t=e?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][t]()}},tu=class{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!te(e))return;let t=Object.keys(ge.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{let s=e[r];if(!te(s))return;let o={};for(let a of t)o[a]=s[a];(Te(s.properties)&&s.properties||[r]).forEach(a=>{(a===r||!i.has(a))&&i.set(a,o)})})}_animateOptions(e,t){let i=t.options,r=iR(e,i);if(!r)return[];let s=this._createAnimations(r,i);return i.$shared&&nR(e.options.$animations,i).then(()=>{e.options=i},()=>{}),s}_createAnimations(e,t){let i=this._properties,r=[],s=e.$animations||(e.$animations={}),o=Object.keys(t),a=Date.now(),c;for(c=o.length-1;c>=0;--c){let l=o[c];if(l.charAt(0)==="$")continue;if(l==="options"){r.push(...this._animateOptions(e,t));continue}let u=t[l],d=s[l],h=i.get(l);if(d)if(h&&d.active()){d.update(h,u,a);continue}else d.cancel();if(!h||!h.duration){e[l]=u;continue}s[l]=d=new vm(h,e,l,u),r.push(d)}return r}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}let i=this._createAnimations(e,t);if(i.length)return Fn.add(this._chart,i),!0}};function nR(n,e){let t=[],i=Object.keys(e);for(let r=0;r<i.length;r++){let s=n[i[r]];s&&s.active()&&t.push(s.wait())}return Promise.all(t)}function iR(n,e){if(!e)return;let t=n.options;if(!t){n.options=e;return}return t.$shared&&(n.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function sx(n,e){let t=n&&n.options||{},i=t.reverse,r=t.min===void 0?e:0,s=t.max===void 0?e:0;return{start:i?s:r,end:i?r:s}}function rR(n,e,t){if(t===!1)return!1;let i=sx(n,t),r=sx(e,t);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function sR(n){let e,t,i,r;return te(n)?(e=n.top,t=n.right,i=n.bottom,r=n.left):e=t=i=r=n,{top:e,right:t,bottom:i,left:r,disabled:n===!1}}function Zx(n,e){let t=[],i=n._getSortedDatasetMetas(e),r,s;for(r=0,s=i.length;r<s;++r)t.push(i[r].index);return t}function ox(n,e,t,i={}){let r=n.keys,s=i.mode==="single",o,a,c,l;if(e!==null){for(o=0,a=r.length;o<a;++o){if(c=+r[o],c===t){if(i.all)continue;break}l=n.values[c],Ue(l)&&(s||e===0||ma(e)===ma(l))&&(e+=l)}return e}}function oR(n,e){let{iScale:t,vScale:i}=e,r=t.axis==="x"?"x":"y",s=i.axis==="x"?"x":"y",o=Object.keys(n),a=new Array(o.length),c,l,u;for(c=0,l=o.length;c<l;++c)u=o[c],a[c]={[r]:u,[s]:n[u]};return a}function ax(n,e){let t=n&&n.options.stacked;return t||t===void 0&&e.stack!==void 0}function aR(n,e,t){return`${n.id}.${e.id}.${t.stack||t.type}`}function cR(n){let{min:e,max:t,minDefined:i,maxDefined:r}=n.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:r?t:Number.POSITIVE_INFINITY}}function lR(n,e,t){let i=n[e]||(n[e]={});return i[t]||(i[t]={})}function cx(n,e,t,i){for(let r of e.getMatchingVisibleMetas(i).reverse()){let s=n[r.index];if(t&&s>0||!t&&s<0)return r.index}return null}function lx(n,e){let{chart:t,_cachedMeta:i}=n,r=t._stacks||(t._stacks={}),{iScale:s,vScale:o,index:a}=i,c=s.axis,l=o.axis,u=aR(s,o,i),d=e.length,h;for(let f=0;f<d;++f){let p=e[f],{[c]:_,[l]:v}=p,x=p._stacks||(p._stacks={});h=x[l]=lR(r,u,_),h[a]=v,h._top=cx(h,o,!0,i.type),h._bottom=cx(h,o,!1,i.type);let w=h._visualValues||(h._visualValues={});w[a]=v}}function hm(n,e){let t=n.scales;return Object.keys(t).filter(i=>t[i].axis===e).shift()}function uR(n,e){return ui(n,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function dR(n,e,t){return ui(n,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function Ca(n,e){let t=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){e=e||n._parsed;for(let r of e){let s=r._stacks;if(!s||s[i]===void 0||s[i][t]===void 0)return;delete s[i][t],s[i]._visualValues!==void 0&&s[i]._visualValues[t]!==void 0&&delete s[i]._visualValues[t]}}}var fm=n=>n==="reset"||n==="none",ux=(n,e)=>e?n:Object.assign({},n),hR=(n,e,t)=>n&&!e.hidden&&e._stacked&&{keys:Zx(t,!0),values:null},Mm=(()=>{class n{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,i){this.chart=t,this._ctx=t.ctx,this.index=i,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){let t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=ax(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Ca(this._cachedMeta),this.index=t}linkScales(){let t=this.chart,i=this._cachedMeta,r=this.getDataset(),s=(h,f,p,_)=>h==="x"?f:h==="r"?_:p,o=i.xAxisID=re(r.xAxisID,hm(t,"x")),a=i.yAxisID=re(r.yAxisID,hm(t,"y")),c=i.rAxisID=re(r.rAxisID,hm(t,"r")),l=i.indexAxis,u=i.iAxisID=s(l,o,a,c),d=i.vAxisID=s(l,a,o,c);i.xScale=this.getScaleForId(o),i.yScale=this.getScaleForId(a),i.rScale=this.getScaleForId(c),i.iScale=this.getScaleForId(u),i.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){let i=this._cachedMeta;return t===i.iScale?i.vScale:i.iScale}reset(){this._update("reset")}_destroy(){let t=this._cachedMeta;this._data&&Qp(this._data,this),t._stacked&&Ca(t)}_dataCheck(){let t=this.getDataset(),i=t.data||(t.data=[]),r=this._data;if(te(i)){let s=this._cachedMeta;this._data=oR(i,s)}else if(r!==i){if(r){Qp(r,this);let s=this._cachedMeta;Ca(s),s._parsed=[]}i&&Object.isExtensible(i)&&Wb(i,this),this._syncList=[],this._data=i}}addElements(){let t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){let i=this._cachedMeta,r=this.getDataset(),s=!1;this._dataCheck();let o=i._stacked;i._stacked=ax(i.vScale,i),i.stack!==r.stack&&(s=!0,Ca(i),i.stack=r.stack),this._resyncElements(t),(s||o!==i._stacked)&&lx(this,i._parsed)}configure(){let t=this.chart.config,i=t.datasetScopeKeys(this._type),r=t.getOptionScopes(this.getDataset(),i,!0);this.options=t.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,i){let{_cachedMeta:r,_data:s}=this,{iScale:o,_stacked:a}=r,c=o.axis,l=t===0&&i===s.length?!0:r._sorted,u=t>0&&r._parsed[t-1],d,h,f;if(this._parsing===!1)r._parsed=s,r._sorted=!0,f=s;else{Te(s[t])?f=this.parseArrayData(r,s,t,i):te(s[t])?f=this.parseObjectData(r,s,t,i):f=this.parsePrimitiveData(r,s,t,i);let p=()=>h[c]===null||u&&h[c]<u[c];for(d=0;d<i;++d)r._parsed[d+t]=h=f[d],l&&(p()&&(l=!1),u=h);r._sorted=l}a&&lx(this,f)}parsePrimitiveData(t,i,r,s){let{iScale:o,vScale:a}=t,c=o.axis,l=a.axis,u=o.getLabels(),d=o===a,h=new Array(s),f,p,_;for(f=0,p=s;f<p;++f)_=f+r,h[f]={[c]:d||o.parse(u[_],_),[l]:a.parse(i[_],_)};return h}parseArrayData(t,i,r,s){let{xScale:o,yScale:a}=t,c=new Array(s),l,u,d,h;for(l=0,u=s;l<u;++l)d=l+r,h=i[d],c[l]={x:o.parse(h[0],d),y:a.parse(h[1],d)};return c}parseObjectData(t,i,r,s){let{xScale:o,yScale:a}=t,{xAxisKey:c="x",yAxisKey:l="y"}=this._parsing,u=new Array(s),d,h,f,p;for(d=0,h=s;d<h;++d)f=d+r,p=i[f],u[d]={x:o.parse(nr(p,c),f),y:a.parse(nr(p,l),f)};return u}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,i,r){let s=this.chart,o=this._cachedMeta,a=i[t.axis],c={keys:Zx(s,!0),values:i._stacks[t.axis]._visualValues};return ox(c,a,o.index,{mode:r})}updateRangeFromParsed(t,i,r,s){let o=r[i.axis],a=o===null?NaN:o,c=s&&r._stacks[i.axis];s&&c&&(s.values=c,a=ox(s,o,this._cachedMeta.index)),t.min=Math.min(t.min,a),t.max=Math.max(t.max,a)}getMinMax(t,i){let r=this._cachedMeta,s=r._parsed,o=r._sorted&&t===r.iScale,a=s.length,c=this._getOtherScale(t),l=hR(i,r,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:h}=cR(c),f,p;function _(){p=s[f];let v=p[c.axis];return!Ue(p[t.axis])||d>v||h<v}for(f=0;f<a&&!(!_()&&(this.updateRangeFromParsed(u,t,p,l),o));++f);if(o){for(f=a-1;f>=0;--f)if(!_()){this.updateRangeFromParsed(u,t,p,l);break}}return u}getAllParsedValues(t){let i=this._cachedMeta._parsed,r=[],s,o,a;for(s=0,o=i.length;s<o;++s)a=i[s][t.axis],Ue(a)&&r.push(a);return r}getMaxOverflow(){return!1}getLabelAndValue(t){let i=this._cachedMeta,r=i.iScale,s=i.vScale,o=this.getParsed(t);return{label:r?""+r.getLabelForValue(o[r.axis]):"",value:s?""+s.getLabelForValue(o[s.axis]):""}}_update(t){let i=this._cachedMeta;this.update(t||"default"),i._clip=sR(re(this.options.clip,rR(i.xScale,i.yScale,this.getMaxOverflow())))}update(t){}draw(){let t=this._ctx,i=this.chart,r=this._cachedMeta,s=r.data||[],o=i.chartArea,a=[],c=this._drawStart||0,l=this._drawCount||s.length-c,u=this.options.drawActiveElementsOnTop,d;for(r.dataset&&r.dataset.draw(t,o,c,l),d=c;d<c+l;++d){let h=s[d];h.hidden||(h.active&&u?a.push(h):h.draw(t,o))}for(d=0;d<a.length;++d)a[d].draw(t,o)}getStyle(t,i){let r=i?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(t||0,r)}getContext(t,i,r){let s=this.getDataset(),o;if(t>=0&&t<this._cachedMeta.data.length){let a=this._cachedMeta.data[t];o=a.$context||(a.$context=dR(this.getContext(),t,a)),o.parsed=this.getParsed(t),o.raw=s.data[t],o.index=o.dataIndex=t}else o=this.$context||(this.$context=uR(this.chart.getContext(),this.index)),o.dataset=s,o.index=o.datasetIndex=this.index;return o.active=!!i,o.mode=r,o}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,i){return this._resolveElementOptions(this.dataElementType.id,i,t)}_resolveElementOptions(t,i="default",r){let s=i==="active",o=this._cachedDataOpts,a=t+"-"+i,c=o[a],l=this.enableOptionSharing&&pa(r);if(c)return ux(c,l);let u=this.chart.config,d=u.datasetElementScopeKeys(this._type,t),h=s?[`${t}Hover`,"hover",t,""]:[t,""],f=u.getOptionScopes(this.getDataset(),d),p=Object.keys(ge.elements[t]),_=()=>this.getContext(r,s,i),v=u.resolveNamedOptions(f,p,_,h);return v.$shared&&(v.$shared=l,o[a]=Object.freeze(ux(v,l))),v}_resolveAnimations(t,i,r){let s=this.chart,o=this._cachedDataOpts,a=`animation-${i}`,c=o[a];if(c)return c;let l;if(s.options.animation!==!1){let d=this.chart.config,h=d.datasetAnimationScopeKeys(this._type,i),f=d.getOptionScopes(this.getDataset(),h);l=d.createResolver(f,this.getContext(t,r,i))}let u=new tu(s,l&&l.animations);return l&&l._cacheable&&(o[a]=Object.freeze(u)),u}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,i){return!i||fm(t)||this.chart._animationsDisabled}_getSharedOptions(t,i){let r=this.resolveDataElementOptions(t,i),s=this._sharedOptions,o=this.getSharedOptions(r),a=this.includeOptions(i,o)||o!==s;return this.updateSharedOptions(o,i,r),{sharedOptions:o,includeOptions:a}}updateElement(t,i,r,s){fm(s)?Object.assign(t,r):this._resolveAnimations(i,s).update(t,r)}updateSharedOptions(t,i,r){t&&!fm(i)&&this._resolveAnimations(void 0,i).update(t,r)}_setStyle(t,i,r,s){t.active=s;let o=this.getStyle(i,s);this._resolveAnimations(i,r,s).update(t,{options:!s&&this.getSharedOptions(o)||o})}removeHoverStyle(t,i,r){this._setStyle(t,r,"active",!1)}setHoverStyle(t,i,r){this._setStyle(t,r,"active",!0)}_removeDatasetHoverStyle(){let t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){let t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){let i=this._data,r=this._cachedMeta.data;for(let[c,l,u]of this._syncList)this[c](l,u);this._syncList=[];let s=r.length,o=i.length,a=Math.min(o,s);a&&this.parse(0,a),o>s?this._insertElements(s,o-s,t):o<s&&this._removeElements(o,s-o)}_insertElements(t,i,r=!0){let s=this._cachedMeta,o=s.data,a=t+i,c,l=u=>{for(u.length+=i,c=u.length-1;c>=a;c--)u[c]=u[c-i]};for(l(o),c=t;c<a;++c)o[c]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(t,i),r&&this.updateElements(o,t,i,"reset")}updateElements(t,i,r,s){}_removeElements(t,i){let r=this._cachedMeta;if(this._parsing){let s=r._parsed.splice(t,i);r._stacked&&Ca(r,s)}r.data.splice(t,i)}_sync(t){if(this._parsing)this._syncList.push(t);else{let[i,r,s]=t;this[i](r,s)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){let t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,i){i&&this._sync(["_removeElements",t,i]);let r=arguments.length-2;r&&this._sync(["_insertElements",t,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}return n})();function fR(n,e,t){let i=1,r=1,s=0,o=0;if(e<Se){let a=n,c=a+e,l=Math.cos(a),u=Math.sin(a),d=Math.cos(c),h=Math.sin(c),f=(T,P,A)=>va(T,a,c,!0)?1:Math.max(P,P*t,A,A*t),p=(T,P,A)=>va(T,a,c,!0)?-1:Math.min(P,P*t,A,A*t),_=f(0,l,d),v=f(ke,u,h),x=p(Ae,l,d),w=p(Ae+ke,u,h);i=(_-x)/2,r=(v-w)/2,s=-(_+x)/2,o=-(v+w)/2}return{ratioX:i,ratioY:r,offsetX:s,offsetY:o}}var eC=(()=>{class n extends Mm{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){let i=t.data;if(i.labels.length&&i.datasets.length){let{labels:{pointStyle:r,color:s}}=t.legend.options;return i.labels.map((o,a)=>{let l=t.getDatasetMeta(0).controller.getStyle(a);return{text:o,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:s,lineWidth:l.borderWidth,pointStyle:r,hidden:!t.getDataVisibility(a),index:a}})}return[]}},onClick(t,i,r){r.chart.toggleDataVisibility(i.index),r.chart.update()}}}};constructor(t,i){super(t,i),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,i){let r=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=r;else{let o=l=>+r[l];if(te(r[t])){let{key:l="value"}=this._parsing;o=u=>+nr(r[u],l)}let a,c;for(a=t,c=t+i;a<c;++a)s._parsed[a]=o(a)}}_getRotation(){return Gt(this.options.rotation-90)}_getCircumference(){return Gt(this.options.circumference)}_getRotationExtents(){let t=Se,i=-Se;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){let s=this.chart.getDatasetMeta(r).controller,o=s._getRotation(),a=s._getCircumference();t=Math.min(t,o),i=Math.max(i,o+a)}return{rotation:t,circumference:i-t}}update(t){let i=this.chart,{chartArea:r}=i,s=this._cachedMeta,o=s.data,a=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,c=Math.max((Math.min(r.width,r.height)-a)/2,0),l=Math.min(Db(this.options.cutout,c),1),u=this._getRingWeight(this.index),{circumference:d,rotation:h}=this._getRotationExtents(),{ratioX:f,ratioY:p,offsetX:_,offsetY:v}=fR(h,d,l),x=(r.width-a)/f,w=(r.height-a)/p,T=Math.max(Math.min(x,w)/2,0),P=$p(this.options.radius,T),A=Math.max(P*l,0),D=(P-A)/this._getVisibleDatasetWeightTotal();this.offsetX=_*P,this.offsetY=v*P,s.total=this.calculateTotal(),this.outerRadius=P-D*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-D*u,0),this.updateElements(o,0,o.length,t)}_circumference(t,i){let r=this.options,s=this._cachedMeta,o=this._getCircumference();return i&&r.animation.animateRotate||!this.chart.getDataVisibility(t)||s._parsed[t]===null||s.data[t].hidden?0:this.calculateCircumference(s._parsed[t]*o/Se)}updateElements(t,i,r,s){let o=s==="reset",a=this.chart,c=a.chartArea,u=a.options.animation,d=(c.left+c.right)/2,h=(c.top+c.bottom)/2,f=o&&u.animateScale,p=f?0:this.innerRadius,_=f?0:this.outerRadius,{sharedOptions:v,includeOptions:x}=this._getSharedOptions(i,s),w=this._getRotation(),T;for(T=0;T<i;++T)w+=this._circumference(T,o);for(T=i;T<i+r;++T){let P=this._circumference(T,o),A=t[T],D={x:d+this.offsetX,y:h+this.offsetY,startAngle:w,endAngle:w+P,circumference:P,outerRadius:_,innerRadius:p};x&&(D.options=v||this.resolveDataElementOptions(T,A.active?"active":s)),w+=P,this.updateElement(A,T,D,s)}}calculateTotal(){let t=this._cachedMeta,i=t.data,r=0,s;for(s=0;s<i.length;s++){let o=t._parsed[s];o!==null&&!isNaN(o)&&this.chart.getDataVisibility(s)&&!i[s].hidden&&(r+=Math.abs(o))}return r}calculateCircumference(t){let i=this._cachedMeta.total;return i>0&&!isNaN(t)?Se*(Math.abs(t)/i):0}getLabelAndValue(t){let i=this._cachedMeta,r=this.chart,s=r.data.labels||[],o=hs(i._parsed[t],r.options.locale);return{label:s[t]||"",value:o}}getMaxBorderWidth(t){let i=0,r=this.chart,s,o,a,c,l;if(!t){for(s=0,o=r.data.datasets.length;s<o;++s)if(r.isDatasetVisible(s)){a=r.getDatasetMeta(s),t=a.data,c=a.controller;break}}if(!t)return 0;for(s=0,o=t.length;s<o;++s)l=c.resolveDataElementOptions(s),l.borderAlign!=="inner"&&(i=Math.max(i,l.borderWidth||0,l.hoverBorderWidth||0));return i}getMaxOffset(t){let i=0;for(let r=0,s=t.length;r<s;++r){let o=this.resolveDataElementOptions(r);i=Math.max(i,o.offset||0,o.hoverOffset||0)}return i}_getRingWeightOffset(t){let i=0;for(let r=0;r<t;++r)this.chart.isDatasetVisible(r)&&(i+=this._getRingWeight(r));return i}_getRingWeight(t){return Math.max(re(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}return n})();var pR=(()=>{class n extends Mm{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){let i=t.data;if(i.labels.length&&i.datasets.length){let{labels:{pointStyle:r,color:s}}=t.legend.options;return i.labels.map((o,a)=>{let l=t.getDatasetMeta(0).controller.getStyle(a);return{text:o,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:s,lineWidth:l.borderWidth,pointStyle:r,hidden:!t.getDataVisibility(a),index:a}})}return[]}},onClick(t,i,r){r.chart.toggleDataVisibility(i.index),r.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(t,i){super(t,i),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){let i=this._cachedMeta,r=this.chart,s=r.data.labels||[],o=hs(i._parsed[t].r,r.options.locale);return{label:s[t]||"",value:o}}parseObjectData(t,i,r,s){return tx.bind(this)(t,i,r,s)}update(t){let i=this._cachedMeta.data;this._updateRadius(),this.updateElements(i,0,i.length,t)}getMinMax(){let t=this._cachedMeta,i={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((r,s)=>{let o=this.getParsed(s).r;!isNaN(o)&&this.chart.getDataVisibility(s)&&(o<i.min&&(i.min=o),o>i.max&&(i.max=o))}),i}_updateRadius(){let t=this.chart,i=t.chartArea,r=t.options,s=Math.min(i.right-i.left,i.bottom-i.top),o=Math.max(s/2,0),a=Math.max(r.cutoutPercentage?o/100*r.cutoutPercentage:1,0),c=(o-a)/t.getVisibleDatasetCount();this.outerRadius=o-c*this.index,this.innerRadius=this.outerRadius-c}updateElements(t,i,r,s){let o=s==="reset",a=this.chart,l=a.options.animation,u=this._cachedMeta.rScale,d=u.xCenter,h=u.yCenter,f=u.getIndexAngle(0)-.5*Ae,p=f,_,v=360/this.countVisibleElements();for(_=0;_<i;++_)p+=this._computeAngle(_,s,v);for(_=i;_<i+r;_++){let x=t[_],w=p,T=p+this._computeAngle(_,s,v),P=a.getDataVisibility(_)?u.getDistanceFromCenterForValue(this.getParsed(_).r):0;p=T,o&&(l.animateScale&&(P=0),l.animateRotate&&(w=T=f));let A={x:d,y:h,innerRadius:0,outerRadius:P,startAngle:w,endAngle:T,options:this.resolveDataElementOptions(_,x.active?"active":s)};this.updateElement(x,_,A,s)}}countVisibleElements(){let t=this._cachedMeta,i=0;return t.data.forEach((r,s)=>{!isNaN(this.getParsed(s).r)&&this.chart.getDataVisibility(s)&&i++}),i}_computeAngle(t,i,r){return this.chart.getDataVisibility(t)?Gt(this.resolveDataElementOptions(t,i).angle||r):0}}return n})(),tC=(()=>{class n extends eC{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}return n})();function ar(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var ym=class n{static override(e){Object.assign(n.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return ar()}parse(){return ar()}format(){return ar()}add(){return ar()}diff(){return ar()}startOf(){return ar()}endOf(){return ar()}},mR={_date:ym};function gR(n,e,t,i){let{controller:r,data:s,_sorted:o}=n,a=r._cachedMeta.iScale;if(a&&e===a.axis&&e!=="r"&&o&&s.length){let c=a._reversePixels?zb:Vl;if(i){if(r._sharedOptions){let l=s[0],u=typeof l.getRange=="function"&&l.getRange(e);if(u){let d=c(s,e,t-u),h=c(s,e,t+u);return{lo:d.lo,hi:h.hi}}}}else return c(s,e,t)}return{lo:0,hi:s.length-1}}function Oa(n,e,t,i,r){let s=n.getSortedVisibleDatasetMetas(),o=t[e];for(let a=0,c=s.length;a<c;++a){let{index:l,data:u}=s[a],{lo:d,hi:h}=gR(s[a],e,o,r);for(let f=d;f<=h;++f){let p=u[f];p.skip||i(p,l,f)}}}function _R(n){let e=n.indexOf("x")!==-1,t=n.indexOf("y")!==-1;return function(i,r){let s=e?Math.abs(i.x-r.x):0,o=t?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function pm(n,e,t,i,r){let s=[];return!r&&!n.isPointInArea(e)||Oa(n,t,e,function(a,c,l){!r&&!ir(a,n.chartArea,0)||a.inRange(e.x,e.y,i)&&s.push({element:a,datasetIndex:c,index:l})},!0),s}function vR(n,e,t,i){let r=[];function s(o,a,c){let{startAngle:l,endAngle:u}=o.getProps(["startAngle","endAngle"],i),{angle:d}=Xp(o,{x:e.x,y:e.y});va(d,l,u)&&r.push({element:o,datasetIndex:a,index:c})}return Oa(n,t,e,s),r}function yR(n,e,t,i,r,s){let o=[],a=_R(t),c=Number.POSITIVE_INFINITY;function l(u,d,h){let f=u.inRange(e.x,e.y,r);if(i&&!f)return;let p=u.getCenterPoint(r);if(!(!!s||n.isPointInArea(p))&&!f)return;let v=a(e,p);v<c?(o=[{element:u,datasetIndex:d,index:h}],c=v):v===c&&o.push({element:u,datasetIndex:d,index:h})}return Oa(n,t,e,l),o}function mm(n,e,t,i,r,s){return!s&&!n.isPointInArea(e)?[]:t==="r"&&!i?vR(n,e,t,r):yR(n,e,t,i,r,s)}function dx(n,e,t,i,r){let s=[],o=t==="x"?"inXRange":"inYRange",a=!1;return Oa(n,t,e,(c,l,u)=>{c[o](e[t],r)&&(s.push({element:c,datasetIndex:l,index:u}),a=a||c.inRange(e.x,e.y,r))}),i&&!a?[]:s}var bR={evaluateInteractionItems:Oa,modes:{index(n,e,t,i){let r=di(e,n),s=t.axis||"x",o=t.includeInvisible||!1,a=t.intersect?pm(n,r,s,i,o):mm(n,r,s,!1,i,o),c=[];return a.length?(n.getSortedVisibleDatasetMetas().forEach(l=>{let u=a[0].index,d=l.data[u];d&&!d.skip&&c.push({element:d,datasetIndex:l.index,index:u})}),c):[]},dataset(n,e,t,i){let r=di(e,n),s=t.axis||"xy",o=t.includeInvisible||!1,a=t.intersect?pm(n,r,s,i,o):mm(n,r,s,!1,i,o);if(a.length>0){let c=a[0].datasetIndex,l=n.getDatasetMeta(c).data;a=[];for(let u=0;u<l.length;++u)a.push({element:l[u],datasetIndex:c,index:u})}return a},point(n,e,t,i){let r=di(e,n),s=t.axis||"xy",o=t.includeInvisible||!1;return pm(n,r,s,i,o)},nearest(n,e,t,i){let r=di(e,n),s=t.axis||"xy",o=t.includeInvisible||!1;return mm(n,r,s,t.intersect,i,o)},x(n,e,t,i){let r=di(e,n);return dx(n,r,"x",t.intersect,i)},y(n,e,t,i){let r=di(e,n);return dx(n,r,"y",t.intersect,i)}}},nC=["left","top","right","bottom"];function wa(n,e){return n.filter(t=>t.pos===e)}function hx(n,e){return n.filter(t=>nC.indexOf(t.pos)===-1&&t.box.axis===e)}function Sa(n,e){return n.sort((t,i)=>{let r=e?i:t,s=e?t:i;return r.weight===s.weight?r.index-s.index:r.weight-s.weight})}function xR(n){let e=[],t,i,r,s,o,a;for(t=0,i=(n||[]).length;t<i;++t)r=n[t],{position:s,options:{stack:o,stackWeight:a=1}}=r,e.push({index:t,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&s+o,stackWeight:a});return e}function CR(n){let e={};for(let t of n){let{stack:i,pos:r,stackWeight:s}=t;if(!i||!nC.includes(r))continue;let o=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function wR(n,e){let t=CR(n),{vBoxMaxWidth:i,hBoxMaxHeight:r}=e,s,o,a;for(s=0,o=n.length;s<o;++s){a=n[s];let{fullSize:c}=a.box,l=t[a.stack],u=l&&a.stackWeight/l.weight;a.horizontal?(a.width=u?u*i:c&&e.availableWidth,a.height=r):(a.width=i,a.height=u?u*r:c&&e.availableHeight)}return t}function SR(n){let e=xR(n),t=Sa(e.filter(l=>l.box.fullSize),!0),i=Sa(wa(e,"left"),!0),r=Sa(wa(e,"right")),s=Sa(wa(e,"top"),!0),o=Sa(wa(e,"bottom")),a=hx(e,"x"),c=hx(e,"y");return{fullSize:t,leftAndTop:i.concat(s),rightAndBottom:r.concat(c).concat(o).concat(a),chartArea:wa(e,"chartArea"),vertical:i.concat(r).concat(c),horizontal:s.concat(o).concat(a)}}function fx(n,e,t,i){return Math.max(n[t],e[t])+Math.max(n[i],e[i])}function iC(n,e){n.top=Math.max(n.top,e.top),n.left=Math.max(n.left,e.left),n.bottom=Math.max(n.bottom,e.bottom),n.right=Math.max(n.right,e.right)}function ER(n,e,t,i){let{pos:r,box:s}=t,o=n.maxPadding;if(!te(r)){t.size&&(n[r]-=t.size);let d=i[t.stack]||{size:0,count:1};d.size=Math.max(d.size,t.horizontal?s.height:s.width),t.size=d.size/d.count,n[r]+=t.size}s.getPadding&&iC(o,s.getPadding());let a=Math.max(0,e.outerWidth-fx(o,n,"left","right")),c=Math.max(0,e.outerHeight-fx(o,n,"top","bottom")),l=a!==n.w,u=c!==n.h;return n.w=a,n.h=c,t.horizontal?{same:l,other:u}:{same:u,other:l}}function IR(n){let e=n.maxPadding;function t(i){let r=Math.max(e[i]-n[i],0);return n[i]+=r,r}n.y+=t("top"),n.x+=t("left"),t("right"),t("bottom")}function TR(n,e){let t=e.maxPadding;function i(r){let s={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{s[o]=Math.max(e[o],t[o])}),s}return i(n?["left","right"]:["top","bottom"])}function Ta(n,e,t,i){let r=[],s,o,a,c,l,u;for(s=0,o=n.length,l=0;s<o;++s){a=n[s],c=a.box,c.update(a.width||e.w,a.height||e.h,TR(a.horizontal,e));let{same:d,other:h}=ER(e,t,a,i);l|=d&&r.length,u=u||h,c.fullSize||r.push(a)}return l&&Ta(r,e,t,i)||u}function ql(n,e,t,i,r){n.top=t,n.left=e,n.right=e+i,n.bottom=t+r,n.width=i,n.height=r}function px(n,e,t,i){let r=t.padding,{x:s,y:o}=e;for(let a of n){let c=a.box,l=i[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/l.weight||1;if(a.horizontal){let d=e.w*u,h=l.size||c.height;pa(l.start)&&(o=l.start),c.fullSize?ql(c,r.left,o,t.outerWidth-r.right-r.left,h):ql(c,e.left+l.placed,o,d,h),l.start=o,l.placed+=d,o=c.bottom}else{let d=e.h*u,h=l.size||c.width;pa(l.start)&&(s=l.start),c.fullSize?ql(c,s,r.top,h,t.outerHeight-r.bottom-r.top):ql(c,s,e.top+l.placed,h,d),l.start=s,l.placed+=d,s=c.right}}e.x=s,e.y=o}var hi={addBox(n,e){n.boxes||(n.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},n.boxes.push(e)},removeBox(n,e){let t=n.boxes?n.boxes.indexOf(e):-1;t!==-1&&n.boxes.splice(t,1)},configure(n,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(n,e,t,i){if(!n)return;let r=tt(n.options.layout.padding),s=Math.max(e-r.width,0),o=Math.max(t-r.height,0),a=SR(n.boxes),c=a.vertical,l=a.horizontal;ae(n.boxes,_=>{typeof _.beforeLayout=="function"&&_.beforeLayout()});let u=c.reduce((_,v)=>v.box.options&&v.box.options.display===!1?_:_+1,0)||1,d=Object.freeze({outerWidth:e,outerHeight:t,padding:r,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/u,hBoxMaxHeight:o/2}),h=Object.assign({},r);iC(h,tt(i));let f=Object.assign({maxPadding:h,w:s,h:o,x:r.left,y:r.top},r),p=wR(c.concat(l),d);Ta(a.fullSize,f,d,p),Ta(c,f,d,p),Ta(l,f,d,p)&&Ta(c,f,d,p),IR(f),px(a.leftAndTop,f,d,p),f.x+=f.w,f.y+=f.h,px(a.rightAndBottom,f,d,p),n.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},ae(a.chartArea,_=>{let v=_.box;Object.assign(v,n.chartArea),v.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}},nu=class{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,i){}removeEventListener(e,t,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,i,r){return t=Math.max(0,t||e.width),i=i||e.height,{width:t,height:Math.max(0,r?Math.floor(t/r):i)}}isAttached(e){return!0}updateConfig(e){}},bm=class extends nu{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}},Zl="$chartjs",AR={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},mx=n=>n===null||n==="";function MR(n,e){let t=n.style,i=n.getAttribute("height"),r=n.getAttribute("width");if(n[Zl]={initial:{height:i,width:r,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",mx(r)){let s=lm(n,"width");s!==void 0&&(n.width=s)}if(mx(i))if(n.style.height==="")n.height=n.width/(e||2);else{let s=lm(n,"height");s!==void 0&&(n.height=s)}return n}var rC=ix?{passive:!0}:!1;function PR(n,e,t){n&&n.addEventListener(e,t,rC)}function OR(n,e,t){n&&n.canvas&&n.canvas.removeEventListener(e,t,rC)}function kR(n,e){let t=AR[n.type]||n.type,{x:i,y:r}=di(n,e);return{type:t,chart:e,native:n,x:i!==void 0?i:null,y:r!==void 0?r:null}}function iu(n,e){for(let t of n)if(t===e||t.contains(e))return!0}function DR(n,e,t){let i=n.canvas,r=new MutationObserver(s=>{let o=!1;for(let a of s)o=o||iu(a.addedNodes,i),o=o&&!iu(a.removedNodes,i);o&&t()});return r.observe(document,{childList:!0,subtree:!0}),r}function RR(n,e,t){let i=n.canvas,r=new MutationObserver(s=>{let o=!1;for(let a of s)o=o||iu(a.removedNodes,i),o=o&&!iu(a.addedNodes,i);o&&t()});return r.observe(document,{childList:!0,subtree:!0}),r}var Ma=new Map,gx=0;function sC(){let n=window.devicePixelRatio;n!==gx&&(gx=n,Ma.forEach((e,t)=>{t.currentDevicePixelRatio!==n&&e()}))}function NR(n,e){Ma.size||window.addEventListener("resize",sC),Ma.set(n,e)}function LR(n){Ma.delete(n),Ma.size||window.removeEventListener("resize",sC)}function FR(n,e,t){let i=n.canvas,r=i&&$l(i);if(!r)return;let s=Zp((a,c)=>{let l=r.clientWidth;t(a,c),l<r.clientWidth&&t()},window),o=new ResizeObserver(a=>{let c=a[0],l=c.contentRect.width,u=c.contentRect.height;l===0&&u===0||s(l,u)});return o.observe(r),NR(n,s),o}function gm(n,e,t){t&&t.disconnect(),e==="resize"&&LR(n)}function VR(n,e,t){let i=n.canvas,r=Zp(s=>{n.ctx!==null&&t(kR(s,n))},n);return PR(i,e,r),r}var xm=class extends nu{acquireContext(e,t){let i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(MR(e,t),i):null}releaseContext(e){let t=e.canvas;if(!t[Zl])return!1;let i=t[Zl].initial;["height","width"].forEach(s=>{let o=i[s];Ee(o)?t.removeAttribute(s):t.setAttribute(s,o)});let r=i.style||{};return Object.keys(r).forEach(s=>{t.style[s]=r[s]}),t.width=t.width,delete t[Zl],!0}addEventListener(e,t,i){this.removeEventListener(e,t);let r=e.$proxies||(e.$proxies={}),o={attach:DR,detach:RR,resize:FR}[t]||VR;r[t]=o(e,t,i)}removeEventListener(e,t){let i=e.$proxies||(e.$proxies={}),r=i[t];if(!r)return;({attach:gm,detach:gm,resize:gm}[t]||OR)(e,t,r),i[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,i,r){return nx(e,t,i,r)}isAttached(e){let t=e&&$l(e);return!!(t&&t.isConnected)}};function UR(n){return!Hl()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?bm:xm}var lr=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){let{x:t,y:i}=this.getProps(["x","y"],e);return{x:t,y:i}}hasValue(){return _a(this.x)&&_a(this.y)}getProps(e,t){let i=this.$animations;if(!t||!i)return this;let r={};return e.forEach(s=>{r[s]=i[s]&&i[s].active()?i[s]._to:this[s]}),r}};function zR(n,e){let t=n.options.ticks,i=jR(n),r=Math.min(t.maxTicksLimit||i,i),s=t.major.enabled?WR(e):[],o=s.length,a=s[0],c=s[o-1],l=[];if(o>r)return HR(e,l,s,o/r),l;let u=BR(s,e,r);if(o>0){let d,h,f=o>1?Math.round((c-a)/(o-1)):null;for(Yl(e,l,u,Ee(f)?0:a-f,a),d=0,h=o-1;d<h;d++)Yl(e,l,u,s[d],s[d+1]);return Yl(e,l,u,c,Ee(f)?e.length:c+f),l}return Yl(e,l,u),l}function jR(n){let e=n.options.offset,t=n._tickSize(),i=n._length/t+(e?0:1),r=n._maxLength/t;return Math.floor(Math.min(i,r))}function BR(n,e,t){let i=$R(n),r=e.length/t;if(!i)return Math.max(r,1);let s=Lb(i);for(let o=0,a=s.length-1;o<a;o++){let c=s[o];if(c>r)return c}return Math.max(r,1)}function WR(n){let e=[],t,i;for(t=0,i=n.length;t<i;t++)n[t].major&&e.push(t);return e}function HR(n,e,t,i){let r=0,s=t[0],o;for(i=Math.ceil(i),o=0;o<n.length;o++)o===s&&(e.push(n[o]),r++,s=t[r*i])}function Yl(n,e,t,i,r){let s=re(i,0),o=Math.min(re(r,n.length),n.length),a=0,c,l,u;for(t=Math.ceil(t),r&&(c=r-i,t=c/Math.floor(c/t)),u=s;u<0;)a++,u=Math.round(s+a*t);for(l=Math.max(s,0);l<o;l++)l===u&&(e.push(n[l]),a++,u=Math.round(s+a*t))}function $R(n){let e=n.length,t,i;if(e<2)return!1;for(i=n[0],t=1;t<e;++t)if(n[t]-n[t-1]!==i)return!1;return i}var GR=n=>n==="left"?"right":n==="right"?"left":n,_x=(n,e,t)=>e==="top"||e==="left"?n[e]+t:n[e]-t,vx=(n,e)=>Math.min(e||n,n);function yx(n,e){let t=[],i=n.length/e,r=n.length,s=0;for(;s<r;s+=i)t.push(n[Math.floor(s)]);return t}function qR(n,e,t){let i=n.ticks.length,r=Math.min(e,i-1),s=n._startPixel,o=n._endPixel,a=1e-6,c=n.getPixelForTick(r),l;if(!(t&&(i===1?l=Math.max(c-s,o-c):e===0?l=(n.getPixelForTick(1)-c)/2:l=(c-n.getPixelForTick(r-1))/2,c+=r<e?l:-l,c<s-a||c>o+a)))return c}function YR(n,e){ae(n,t=>{let i=t.gc,r=i.length/2,s;if(r>e){for(s=0;s<r;++s)delete t.data[i[s]];i.splice(0,r)}})}function Ea(n){return n.drawTicks?n.tickLength:0}function bx(n,e){if(!n.display)return 0;let t=Ge(n.font,e),i=tt(n.padding);return(Te(n.text)?n.text.length:1)*t.lineHeight+i.height}function KR(n,e){return ui(n,{scale:e,type:"scale"})}function XR(n,e,t){return ui(n,{tick:t,index:e,type:"tick"})}function QR(n,e,t){let i=em(n);return(t&&e!=="right"||!t&&e==="right")&&(i=GR(i)),i}function JR(n,e,t,i){let{top:r,left:s,bottom:o,right:a,chart:c}=n,{chartArea:l,scales:u}=c,d=0,h,f,p,_=o-r,v=a-s;if(n.isHorizontal()){if(f=It(i,s,a),te(t)){let x=Object.keys(t)[0],w=t[x];p=u[x].getPixelForValue(w)+_-e}else t==="center"?p=(l.bottom+l.top)/2+_-e:p=_x(n,t,e);h=a-s}else{if(te(t)){let x=Object.keys(t)[0],w=t[x];f=u[x].getPixelForValue(w)-v+e}else t==="center"?f=(l.left+l.right)/2-v+e:f=_x(n,t,e);p=It(i,o,r),d=t==="left"?-ke:ke}return{titleX:f,titleY:p,maxWidth:h,rotation:d}}var ms=class n extends lr{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:i,_suggestedMax:r}=this;return e=Et(e,Number.POSITIVE_INFINITY),t=Et(t,Number.NEGATIVE_INFINITY),i=Et(i,Number.POSITIVE_INFINITY),r=Et(r,Number.NEGATIVE_INFINITY),{min:Et(e,i),max:Et(t,r),minDefined:Ue(e),maxDefined:Ue(t)}}getMinMax(e){let{min:t,max:i,minDefined:r,maxDefined:s}=this.getUserBounds(),o;if(r&&s)return{min:t,max:i};let a=this.getMatchingVisibleMetas();for(let c=0,l=a.length;c<l;++c)o=a[c].controller.getMinMax(this,e),r||(t=Math.min(t,o.min)),s||(i=Math.max(i,o.max));return t=s&&t>i?i:t,i=r&&t>i?t:i,{min:Et(t,Et(i,t)),max:Et(i,Et(t,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){let e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){he(this.options.beforeUpdate,[this])}update(e,t,i){let{beginAtZero:r,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Qb(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();let c=a<this.ticks.length;this._convertTicksToLabels(c?yx(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=zR(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,i;this.isHorizontal()?(t=this.left,i=this.right):(t=this.top,i=this.bottom,e=!e),this._startPixel=t,this._endPixel=i,this._reversePixels=e,this._length=i-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){he(this.options.afterUpdate,[this])}beforeSetDimensions(){he(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){he(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),he(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){he(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){let t=this.options.ticks,i,r,s;for(i=0,r=e.length;i<r;i++)s=e[i],s.label=he(t.callback,[s.value,i,e],this)}afterTickToLabelConversion(){he(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){he(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){let e=this.options,t=e.ticks,i=vx(this.ticks.length,e.ticks.maxTicksLimit),r=t.minRotation||0,s=t.maxRotation,o=r,a,c,l;if(!this._isVisible()||!t.display||r>=s||i<=1||!this.isHorizontal()){this.labelRotation=r;return}let u=this._getLabelSizes(),d=u.widest.width,h=u.highest.height,f=Vt(this.chart.width-d,0,this.maxWidth);a=e.offset?this.maxWidth/i:f/(i-1),d+6>a&&(a=f/(i-(e.offset?.5:1)),c=this.maxHeight-Ea(e.grid)-t.padding-bx(e.title,this.chart.options.font),l=Math.sqrt(d*d+h*h),o=Ll(Math.min(Math.asin(Vt((u.highest.height+6)/a,-1,1)),Math.asin(Vt(c/l,-1,1))-Math.asin(Vt(h/l,-1,1)))),o=Math.max(r,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){he(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){he(this.options.beforeFit,[this])}fit(){let e={width:0,height:0},{chart:t,options:{ticks:i,title:r,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){let c=bx(r,t.options.font);if(a?(e.width=this.maxWidth,e.height=Ea(s)+c):(e.height=this.maxHeight,e.width=Ea(s)+c),i.display&&this.ticks.length){let{first:l,last:u,widest:d,highest:h}=this._getLabelSizes(),f=i.padding*2,p=Gt(this.labelRotation),_=Math.cos(p),v=Math.sin(p);if(a){let x=i.mirror?0:v*d.width+_*h.height;e.height=Math.min(this.maxHeight,e.height+x+f)}else{let x=i.mirror?0:_*d.width+v*h.height;e.width=Math.min(this.maxWidth,e.width+x+f)}this._calculatePadding(l,u,v,_)}}this._handleMargins(),a?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,i,r){let{ticks:{align:s,padding:o},position:a}=this.options,c=this.labelRotation!==0,l=a!=="top"&&this.axis==="x";if(this.isHorizontal()){let u=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1),h=0,f=0;c?l?(h=r*e.width,f=i*t.height):(h=i*e.height,f=r*t.width):s==="start"?f=t.width:s==="end"?h=e.width:s!=="inner"&&(h=e.width/2,f=t.width/2),this.paddingLeft=Math.max((h-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((f-d+o)*this.width/(this.width-d),0)}else{let u=t.height/2,d=e.height/2;s==="start"?(u=0,d=e.height):s==="end"&&(u=t.height,d=0),this.paddingTop=u+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){he(this.options.afterFit,[this])}isHorizontal(){let{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,i;for(t=0,i=e.length;t<i;t++)Ee(e[t].label)&&(e.splice(t,1),i--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){let t=this.options.ticks.sampleSize,i=this.ticks;t<i.length&&(i=yx(i,t)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,i){let{ctx:r,_longestTextCache:s}=this,o=[],a=[],c=Math.floor(t/vx(t,i)),l=0,u=0,d,h,f,p,_,v,x,w,T,P,A;for(d=0;d<t;d+=c){if(p=e[d].label,_=this._resolveTickFontOptions(d),r.font=v=_.string,x=s[v]=s[v]||{data:{},gc:[]},w=_.lineHeight,T=P=0,!Ee(p)&&!Te(p))T=ha(r,x.data,x.gc,T,p),P=w;else if(Te(p))for(h=0,f=p.length;h<f;++h)A=p[h],!Ee(A)&&!Te(A)&&(T=ha(r,x.data,x.gc,T,A),P+=w);o.push(T),a.push(P),l=Math.max(T,l),u=Math.max(P,u)}YR(s,t);let D=o.indexOf(l),L=a.indexOf(u),F=V=>({width:o[V]||0,height:a[V]||0});return{first:F(0),last:F(t-1),widest:F(D),highest:F(L),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){let t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);let t=this._startPixel+e*this._length;return Ub(this._alignToPixels?li(this.chart,t,0):t)}getDecimalForPixel(e){let t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){let{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){let t=this.ticks||[];if(e>=0&&e<t.length){let i=t[e];return i.$context||(i.$context=XR(this.getContext(),e,i))}return this.$context||(this.$context=KR(this.chart.getContext(),this))}_tickSize(){let e=this.options.ticks,t=Gt(this.labelRotation),i=Math.abs(Math.cos(t)),r=Math.abs(Math.sin(t)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,c=s?s.highest.height+o:0;return this.isHorizontal()?c*i>a*r?a/i:c/r:c*r<a*i?c/i:a/r}_isVisible(){let e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){let t=this.axis,i=this.chart,r=this.options,{grid:s,position:o,border:a}=r,c=s.offset,l=this.isHorizontal(),d=this.ticks.length+(c?1:0),h=Ea(s),f=[],p=a.setContext(this.getContext()),_=p.display?p.width:0,v=_/2,x=function(ve){return li(i,ve,_)},w,T,P,A,D,L,F,V,X,Q,Z,qe;if(o==="top")w=x(this.bottom),L=this.bottom-h,V=w-v,Q=x(e.top)+v,qe=e.bottom;else if(o==="bottom")w=x(this.top),Q=e.top,qe=x(e.bottom)-v,L=w+v,V=this.top+h;else if(o==="left")w=x(this.right),D=this.right-h,F=w-v,X=x(e.left)+v,Z=e.right;else if(o==="right")w=x(this.left),X=e.left,Z=x(e.right)-v,D=w+v,F=this.left+h;else if(t==="x"){if(o==="center")w=x((e.top+e.bottom)/2+.5);else if(te(o)){let ve=Object.keys(o)[0],De=o[ve];w=x(this.chart.scales[ve].getPixelForValue(De))}Q=e.top,qe=e.bottom,L=w+v,V=L+h}else if(t==="y"){if(o==="center")w=x((e.left+e.right)/2);else if(te(o)){let ve=Object.keys(o)[0],De=o[ve];w=x(this.chart.scales[ve].getPixelForValue(De))}D=w-v,F=D-h,X=e.left,Z=e.right}let Pt=re(r.ticks.maxTicksLimit,d),ue=Math.max(1,Math.ceil(d/Pt));for(T=0;T<d;T+=ue){let ve=this.getContext(T),De=s.setContext(ve),Yt=a.setContext(ve),Je=De.lineWidth,ur=De.color,Va=Yt.dash||[],dr=Yt.dashOffset,Ms=De.tickWidth,vi=De.tickColor,Ps=De.tickBorderDash||[],yi=De.tickBorderDashOffset;P=qR(this,T,c),P!==void 0&&(A=li(i,P,Je),l?D=F=X=Z=A:L=V=Q=qe=A,f.push({tx1:D,ty1:L,tx2:F,ty2:V,x1:X,y1:Q,x2:Z,y2:qe,width:Je,color:ur,borderDash:Va,borderDashOffset:dr,tickWidth:Ms,tickColor:vi,tickBorderDash:Ps,tickBorderDashOffset:yi}))}return this._ticksLength=d,this._borderValue=w,f}_computeLabelItems(e){let t=this.axis,i=this.options,{position:r,ticks:s}=i,o=this.isHorizontal(),a=this.ticks,{align:c,crossAlign:l,padding:u,mirror:d}=s,h=Ea(i.grid),f=h+u,p=d?-u:f,_=-Gt(this.labelRotation),v=[],x,w,T,P,A,D,L,F,V,X,Q,Z,qe="middle";if(r==="top")D=this.bottom-p,L=this._getXAxisLabelAlignment();else if(r==="bottom")D=this.top+p,L=this._getXAxisLabelAlignment();else if(r==="left"){let ue=this._getYAxisLabelAlignment(h);L=ue.textAlign,A=ue.x}else if(r==="right"){let ue=this._getYAxisLabelAlignment(h);L=ue.textAlign,A=ue.x}else if(t==="x"){if(r==="center")D=(e.top+e.bottom)/2+f;else if(te(r)){let ue=Object.keys(r)[0],ve=r[ue];D=this.chart.scales[ue].getPixelForValue(ve)+f}L=this._getXAxisLabelAlignment()}else if(t==="y"){if(r==="center")A=(e.left+e.right)/2-f;else if(te(r)){let ue=Object.keys(r)[0],ve=r[ue];A=this.chart.scales[ue].getPixelForValue(ve)}L=this._getYAxisLabelAlignment(h).textAlign}t==="y"&&(c==="start"?qe="top":c==="end"&&(qe="bottom"));let Pt=this._getLabelSizes();for(x=0,w=a.length;x<w;++x){T=a[x],P=T.label;let ue=s.setContext(this.getContext(x));F=this.getPixelForTick(x)+s.labelOffset,V=this._resolveTickFontOptions(x),X=V.lineHeight,Q=Te(P)?P.length:1;let ve=Q/2,De=ue.color,Yt=ue.textStrokeColor,Je=ue.textStrokeWidth,ur=L;o?(A=F,L==="inner"&&(x===w-1?ur=this.options.reverse?"left":"right":x===0?ur=this.options.reverse?"right":"left":ur="center"),r==="top"?l==="near"||_!==0?Z=-Q*X+X/2:l==="center"?Z=-Pt.highest.height/2-ve*X+X:Z=-Pt.highest.height+X/2:l==="near"||_!==0?Z=X/2:l==="center"?Z=Pt.highest.height/2-ve*X:Z=Pt.highest.height-Q*X,d&&(Z*=-1),_!==0&&!ue.showLabelBackdrop&&(A+=X/2*Math.sin(_))):(D=F,Z=(1-Q)*X/2);let Va;if(ue.showLabelBackdrop){let dr=tt(ue.backdropPadding),Ms=Pt.heights[x],vi=Pt.widths[x],Ps=Z-dr.top,yi=0-dr.left;switch(qe){case"middle":Ps-=Ms/2;break;case"bottom":Ps-=Ms;break}switch(L){case"center":yi-=vi/2;break;case"right":yi-=vi;break;case"inner":x===w-1?yi-=vi:x>0&&(yi-=vi/2);break}Va={left:yi,top:Ps,width:vi+dr.width,height:Ms+dr.height,color:ue.backdropColor}}v.push({label:P,font:V,textOffset:Z,options:{rotation:_,color:De,strokeColor:Yt,strokeWidth:Je,textAlign:ur,textBaseline:qe,translation:[A,D],backdrop:Va}})}return v}_getXAxisLabelAlignment(){let{position:e,ticks:t}=this.options;if(-Gt(this.labelRotation))return e==="top"?"left":"right";let r="center";return t.align==="start"?r="left":t.align==="end"?r="right":t.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){let{position:t,ticks:{crossAlign:i,mirror:r,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,c=o.widest.width,l,u;return t==="left"?r?(u=this.right+s,i==="near"?l="left":i==="center"?(l="center",u+=c/2):(l="right",u+=c)):(u=this.right-a,i==="near"?l="right":i==="center"?(l="center",u-=c/2):(l="left",u=this.left)):t==="right"?r?(u=this.left+s,i==="near"?l="right":i==="center"?(l="center",u-=c/2):(l="left",u-=c)):(u=this.left+a,i==="near"?l="left":i==="center"?(l="center",u+=c/2):(l="right",u=this.right)):l="right",{textAlign:l,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;let e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){let{ctx:e,options:{backgroundColor:t},left:i,top:r,width:s,height:o}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(i,r,s,o),e.restore())}getLineWidthForValue(e){let t=this.options.grid;if(!this._isVisible()||!t.display)return 0;let r=this.ticks.findIndex(s=>s.value===e);return r>=0?t.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){let t=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e)),s,o,a=(c,l,u)=>{!u.width||!u.color||(i.save(),i.lineWidth=u.width,i.strokeStyle=u.color,i.setLineDash(u.borderDash||[]),i.lineDashOffset=u.borderDashOffset,i.beginPath(),i.moveTo(c.x,c.y),i.lineTo(l.x,l.y),i.stroke(),i.restore())};if(t.display)for(s=0,o=r.length;s<o;++s){let c=r[s];t.drawOnChartArea&&a({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),t.drawTicks&&a({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){let{chart:e,ctx:t,options:{border:i,grid:r}}=this,s=i.setContext(this.getContext()),o=i.display?s.width:0;if(!o)return;let a=r.setContext(this.getContext(0)).lineWidth,c=this._borderValue,l,u,d,h;this.isHorizontal()?(l=li(e,this.left,o)-o/2,u=li(e,this.right,a)+a/2,d=h=c):(d=li(e,this.top,o)-o/2,h=li(e,this.bottom,a)+a/2,l=u=c),t.save(),t.lineWidth=s.width,t.strokeStyle=s.color,t.beginPath(),t.moveTo(l,d),t.lineTo(u,h),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;let i=this.ctx,r=this._computeLabelArea();r&&zl(i,r);let s=this.getLabelItems(e);for(let o of s){let a=o.options,c=o.font,l=o.label,u=o.textOffset;rr(i,l,0,u,c,a)}r&&jl(i)}drawTitle(){let{ctx:e,options:{position:t,title:i,reverse:r}}=this;if(!i.display)return;let s=Ge(i.font),o=tt(i.padding),a=i.align,c=s.lineHeight/2;t==="bottom"||t==="center"||te(t)?(c+=o.bottom,Te(i.text)&&(c+=s.lineHeight*(i.text.length-1))):c+=o.top;let{titleX:l,titleY:u,maxWidth:d,rotation:h}=JR(this,c,t,a);rr(e,i.text,0,0,s,{color:i.color,maxWidth:d,rotation:h,textAlign:QR(a,t,r),textBaseline:"middle",translation:[l,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){let e=this.options,t=e.ticks&&e.ticks.z||0,i=re(e.grid&&e.grid.z,-1),r=re(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==n.prototype.draw?[{z:t,draw:s=>{this.draw(s)}}]:[{z:i,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:t,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){let t=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[],s,o;for(s=0,o=t.length;s<o;++s){let a=t[s];a[i]===this.id&&(!e||a.type===e)&&r.push(a)}return r}_resolveTickFontOptions(e){let t=this.options.ticks.setContext(this.getContext(e));return Ge(t.font)}_maxDigits(){let e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}},ps=class{constructor(e,t,i){this.type=e,this.scope=t,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){let t=Object.getPrototypeOf(e),i;tN(t)&&(i=this.register(t));let r=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in r||(r[s]=e,ZR(e,o,i),this.override&&ge.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){let t=this.items,i=e.id,r=this.scope;i in t&&delete t[i],r&&i in ge[r]&&(delete ge[r][i],this.override&&delete ci[i])}};function ZR(n,e,t){let i=ls(Object.create(null),[t?ge.get(t):{},ge.get(e),n.defaults]);ge.set(e,i),n.defaultRoutes&&eN(e,n.defaultRoutes),n.descriptors&&ge.describe(e,n.descriptors)}function eN(n,e){Object.keys(e).forEach(t=>{let i=t.split("."),r=i.pop(),s=[n].concat(i).join("."),o=e[t].split("."),a=o.pop(),c=o.join(".");ge.route(s,r,c,a)})}function tN(n){return"id"in n&&"defaults"in n}var Cm=class{constructor(){this.controllers=new ps(Mm,"datasets",!0),this.elements=new ps(lr,"elements"),this.plugins=new ps(Object,"plugins"),this.scales=new ps(ms,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,i){[...t].forEach(r=>{let s=i||this._getRegistryForType(r);i||s.isForType(r)||s===this.plugins&&r.id?this._exec(e,s,r):ae(r,o=>{let a=i||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,t,i){let r=Nl(e);he(i["before"+r],[],i),t[e](i),he(i["after"+r],[],i)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){let i=this._typedRegistries[t];if(i.isForType(e))return i}return this.plugins}_get(e,t,i){let r=t.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return r}},_n=new Cm,wm=class{constructor(){this._init=[]}notify(e,t,i,r){t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));let s=r?this._descriptors(e).filter(r):this._descriptors(e),o=this._notify(s,e,t,i);return t==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,t,i,r){r=r||{};for(let s of e){let o=s.plugin,a=o[i],c=[t,r,s.options];if(he(a,c,o)===!1&&r.cancelable)return!1}return!0}invalidate(){Ee(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;let t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){let i=e&&e.config,r=re(i.options&&i.options.plugins,{}),s=nN(i);return r===!1&&!t?[]:rN(e,s,r,t)}_notifyStateChanges(e){let t=this._oldCache||[],i=this._cache,r=(s,o)=>s.filter(a=>!o.some(c=>a.plugin.id===c.plugin.id));this._notify(r(t,i),e,"stop"),this._notify(r(i,t),e,"start")}};function nN(n){let e={},t=[],i=Object.keys(_n.plugins.items);for(let s=0;s<i.length;s++)t.push(_n.getPlugin(i[s]));let r=n.plugins||[];for(let s=0;s<r.length;s++){let o=r[s];t.indexOf(o)===-1&&(t.push(o),e[o.id]=!0)}return{plugins:t,localIds:e}}function iN(n,e){return!e&&n===!1?null:n===!0?{}:n}function rN(n,{plugins:e,localIds:t},i,r){let s=[],o=n.getContext();for(let a of e){let c=a.id,l=iN(i[c],r);l!==null&&s.push({plugin:a,options:sN(n.config,{plugin:a,local:t[c]},l,o)})}return s}function sN(n,{plugin:e,local:t},i,r){let s=n.pluginScopeKeys(e),o=n.getOptionScopes(i,s);return t&&e.defaults&&o.push(e.defaults),n.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Sm(n,e){let t=ge.datasets[n]||{};return((e.datasets||{})[n]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function oN(n,e){let t=n;return n==="_index_"?t=e:n==="_value_"&&(t=e==="x"?"y":"x"),t}function aN(n,e){return n===e?"_index_":"_value_"}function xx(n){if(n==="x"||n==="y"||n==="r")return n}function cN(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function Em(n,...e){if(xx(n))return n;for(let t of e){let i=t.axis||cN(t.position)||n.length>1&&xx(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function Cx(n,e,t){if(t[e+"AxisID"]===n)return{axis:e}}function lN(n,e){if(e.data&&e.data.datasets){let t=e.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(t.length)return Cx(n,"x",t[0])||Cx(n,"y",t[0])}return{}}function uN(n,e){let t=ci[n.type]||{scales:{}},i=e.scales||{},r=Sm(n.type,e),s=Object.create(null);return Object.keys(i).forEach(o=>{let a=i[o];if(!te(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);let c=Em(o,a,lN(o,n),ge.scales[a.type]),l=aN(c,r),u=t.scales||{};s[o]=us(Object.create(null),[{axis:c},a,u[c],u[l]])}),n.data.datasets.forEach(o=>{let a=o.type||n.type,c=o.indexAxis||Sm(a,e),u=(ci[a]||{}).scales||{};Object.keys(u).forEach(d=>{let h=oN(d,c),f=o[h+"AxisID"]||h;s[f]=s[f]||Object.create(null),us(s[f],[{axis:h},i[f],u[d]])})}),Object.keys(s).forEach(o=>{let a=s[o];us(a,[ge.scales[a.type],ge.scale])}),s}function oC(n){let e=n.options||(n.options={});e.plugins=re(e.plugins,{}),e.scales=uN(n,e)}function aC(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function dN(n){return n=n||{},n.data=aC(n.data),oC(n),n}var wx=new Map,cC=new Set;function Kl(n,e){let t=wx.get(n);return t||(t=e(),wx.set(n,t),cC.add(t)),t}var Ia=(n,e,t)=>{let i=nr(e,t);i!==void 0&&n.add(i)},Im=class{constructor(e){this._config=dN(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=aC(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){let e=this._config;this.clearCache(),oC(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Kl(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return Kl(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return Kl(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){let t=e.id,i=this.type;return Kl(`${i}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){let i=this._scopeCache,r=i.get(e);return(!r||t)&&(r=new Map,i.set(e,r)),r}getOptionScopes(e,t,i){let{options:r,type:s}=this,o=this._cachedScopes(e,i),a=o.get(t);if(a)return a;let c=new Set;t.forEach(u=>{e&&(c.add(e),u.forEach(d=>Ia(c,e,d))),u.forEach(d=>Ia(c,r,d)),u.forEach(d=>Ia(c,ci[s]||{},d)),u.forEach(d=>Ia(c,ge,d)),u.forEach(d=>Ia(c,Ul,d))});let l=Array.from(c);return l.length===0&&l.push(Object.create(null)),cC.has(t)&&o.set(t,l),l}chartOptionScopes(){let{options:e,type:t}=this;return[e,ci[t]||{},ge.datasets[t]||{},{type:t},ge,Ul]}resolveNamedOptions(e,t,i,r=[""]){let s={$shared:!0},{resolver:o,subPrefixes:a}=Sx(this._resolverCache,e,r),c=o;if(fN(o,t)){s.$shared=!1,i=Nn(i)?i():i;let l=this.createResolver(e,i,a);c=tr(o,i,l)}for(let l of t)s[l]=c[l];return s}createResolver(e,t,i=[""],r){let{resolver:s}=Sx(this._resolverCache,e,i);return te(t)?tr(s,t,void 0,r):s}};function Sx(n,e,t){let i=n.get(e);i||(i=new Map,n.set(e,i));let r=t.join(),s=i.get(r);return s||(s={resolver:Wl(e,t),subPrefixes:t.filter(a=>!a.toLowerCase().includes("hover"))},i.set(r,s)),s}var hN=n=>te(n)&&Object.getOwnPropertyNames(n).some(e=>Nn(n[e]));function fN(n,e){let{isScriptable:t,isIndexable:i}=sm(n);for(let r of e){let s=t(r),o=i(r),a=(o||s)&&n[r];if(s&&(Nn(a)||hN(a))||o&&Te(a))return!0}return!1}var pN="4.4.3",mN=["top","bottom","left","right","chartArea"];function Ex(n,e){return n==="top"||n==="bottom"||mN.indexOf(n)===-1&&e==="x"}function Ix(n,e){return function(t,i){return t[n]===i[n]?t[e]-i[e]:t[n]-i[n]}}function Tx(n){let e=n.chart,t=e.options.animation;e.notifyPlugins("afterRender"),he(t&&t.onComplete,[n],e)}function gN(n){let e=n.chart,t=e.options.animation;he(t&&t.onProgress,[n],e)}function lC(n){return Hl()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}var eu={},Ax=n=>{let e=lC(n);return Object.values(eu).filter(t=>t.canvas===e).pop()};function _N(n,e,t){let i=Object.keys(n);for(let r of i){let s=+r;if(s>=e){let o=n[r];delete n[r],(t>0||s>e)&&(n[s+t]=o)}}}function vN(n,e,t,i){return!t||n.type==="mouseout"?null:i?e:n}function Xl(n,e,t){return n.options.clip?n[t]:e[t]}function yN(n,e){let{xScale:t,yScale:i}=n;return t&&i?{left:Xl(t,e,"left"),right:Xl(t,e,"right"),top:Xl(i,e,"top"),bottom:Xl(i,e,"bottom")}:e}var _s=(()=>{class n{static defaults=ge;static instances=eu;static overrides=ci;static registry=_n;static version=pN;static getChart=Ax;static register(...t){_n.add(...t),Mx()}static unregister(...t){_n.remove(...t),Mx()}constructor(t,i){let r=this.config=new Im(i),s=lC(t),o=Ax(s);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");let a=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||UR(s)),this.platform.updateConfig(r);let c=this.platform.acquireContext(s,a.aspectRatio),l=c&&c.canvas,u=l&&l.height,d=l&&l.width;if(this.id=kb(),this.ctx=c,this.canvas=l,this.width=d,this.height=u,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new wm,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=$b(h=>this.update(h),a.resizeDelay||0),this._dataChanges=[],eu[this.id]=this,!c||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Fn.listen(this,"complete",Tx),Fn.listen(this,"progress",gN),this._initialize(),this.attached&&this.update()}get aspectRatio(){let{options:{aspectRatio:t,maintainAspectRatio:i},width:r,height:s,_aspectRatio:o}=this;return Ee(t)?i&&o?o:s?r/s:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return _n}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():cm(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return nm(this.canvas,this.ctx),this}stop(){return Fn.stop(this),this}resize(t,i){Fn.running(this)?this._resizeBeforeDraw={width:t,height:i}:this._resize(t,i)}_resize(t,i){let r=this.options,s=this.canvas,o=r.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(s,t,i,o),c=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,cm(this,c,!0)&&(this.notifyPlugins("resize",{size:a}),he(r.onResize,[this,a],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){let i=this.options.scales||{};ae(i,(r,s)=>{r.id=s})}buildOrUpdateScales(){let t=this.options,i=t.scales,r=this.scales,s=Object.keys(r).reduce((a,c)=>(a[c]=!1,a),{}),o=[];i&&(o=o.concat(Object.keys(i).map(a=>{let c=i[a],l=Em(a,c),u=l==="r",d=l==="x";return{options:c,dposition:u?"chartArea":d?"bottom":"left",dtype:u?"radialLinear":d?"category":"linear"}}))),ae(o,a=>{let c=a.options,l=c.id,u=Em(l,c),d=re(c.type,a.dtype);(c.position===void 0||Ex(c.position,u)!==Ex(a.dposition))&&(c.position=a.dposition),s[l]=!0;let h=null;if(l in r&&r[l].type===d)h=r[l];else{let f=_n.getScale(d);h=new f({id:l,type:d,ctx:this.ctx,chart:this}),r[h.id]=h}h.init(c,t)}),ae(s,(a,c)=>{a||delete r[c]}),ae(r,a=>{hi.configure(this,a,a.options),hi.addBox(this,a)})}_updateMetasets(){let t=this._metasets,i=this.data.datasets.length,r=t.length;if(t.sort((s,o)=>s.index-o.index),r>i){for(let s=i;s<r;++s)this._destroyDatasetMeta(s);t.splice(i,r-i)}this._sortedMetasets=t.slice(0).sort(Ix("order","index"))}_removeUnreferencedMetasets(){let{_metasets:t,data:{datasets:i}}=this;t.length>i.length&&delete this._stacks,t.forEach((r,s)=>{i.filter(o=>o===r._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){let t=[],i=this.data.datasets,r,s;for(this._removeUnreferencedMetasets(),r=0,s=i.length;r<s;r++){let o=i[r],a=this.getDatasetMeta(r),c=o.type||this.config.type;if(a.type&&a.type!==c&&(this._destroyDatasetMeta(r),a=this.getDatasetMeta(r)),a.type=c,a.indexAxis=o.indexAxis||Sm(c,this.options),a.order=o.order||0,a.index=r,a.label=""+o.label,a.visible=this.isDatasetVisible(r),a.controller)a.controller.updateIndex(r),a.controller.linkScales();else{let l=_n.getController(c),{datasetElementType:u,dataElementType:d}=ge.datasets[c];Object.assign(l,{dataElementType:_n.getElement(d),datasetElementType:u&&_n.getElement(u)}),a.controller=new l(this,r),t.push(a.controller)}}return this._updateMetasets(),t}_resetElements(){ae(this.data.datasets,(t,i)=>{this.getDatasetMeta(i).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){let i=this.config;i.update();let r=this._options=i.createResolver(i.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;let o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let u=0,d=this.data.datasets.length;u<d;u++){let{controller:h}=this.getDatasetMeta(u),f=!s&&o.indexOf(h)===-1;h.buildOrUpdateElements(f),a=Math.max(+h.getMaxOverflow(),a)}a=this._minPadding=r.layout.autoPadding?a:0,this._updateLayout(a),s||ae(o,u=>{u.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(Ix("z","_idx"));let{_active:c,_lastEvent:l}=this;l?this._eventHandler(l,!0):c.length&&this._updateHoverStyles(c,c,!0),this.render()}_updateScales(){ae(this.scales,t=>{hi.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){let t=this.options,i=new Set(Object.keys(this._listeners)),r=new Set(t.events);(!Gp(i,r)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){let{_hiddenIndices:t}=this,i=this._getUniformDataChanges()||[];for(let{method:r,start:s,count:o}of i){let a=r==="_removeElements"?-o:o;_N(t,s,a)}}_getUniformDataChanges(){let t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];let i=this.data.datasets.length,r=o=>new Set(t.filter(a=>a[0]===o).map((a,c)=>c+","+a.splice(1).join(","))),s=r(0);for(let o=1;o<i;o++)if(!Gp(s,r(o)))return;return Array.from(s).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;hi.update(this,this.width,this.height,t);let i=this.chartArea,r=i.width<=0||i.height<=0;this._layers=[],ae(this.boxes,s=>{r&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,o)=>{s._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let i=0,r=this.data.datasets.length;i<r;++i)this.getDatasetMeta(i).controller.configure();for(let i=0,r=this.data.datasets.length;i<r;++i)this._updateDataset(i,Nn(t)?t({datasetIndex:i}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,i){let r=this.getDatasetMeta(t),s={meta:r,index:t,mode:i,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(r.controller._update(i),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Fn.has(this)?this.attached&&!Fn.running(this)&&Fn.start(this):(this.draw(),Tx({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){let{width:r,height:s}=this._resizeBeforeDraw;this._resize(r,s),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;let i=this._layers;for(t=0;t<i.length&&i[t].z<=0;++t)i[t].draw(this.chartArea);for(this._drawDatasets();t<i.length;++t)i[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){let i=this._sortedMetasets,r=[],s,o;for(s=0,o=i.length;s<o;++s){let a=i[s];(!t||a.visible)&&r.push(a)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;let t=this.getSortedVisibleDatasetMetas();for(let i=t.length-1;i>=0;--i)this._drawDataset(t[i]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){let i=this.ctx,r=t._clip,s=!r.disabled,o=yN(t,this.chartArea),a={meta:t,index:t.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",a)!==!1&&(s&&zl(i,{left:r.left===!1?0:o.left-r.left,right:r.right===!1?this.width:o.right+r.right,top:r.top===!1?0:o.top-r.top,bottom:r.bottom===!1?this.height:o.bottom+r.bottom}),t.controller.draw(),s&&jl(i),a.cancelable=!1,this.notifyPlugins("afterDatasetDraw",a))}isPointInArea(t){return ir(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,i,r,s){let o=bR.modes[i];return typeof o=="function"?o(this,t,r,s):[]}getDatasetMeta(t){let i=this.data.datasets[t],r=this._metasets,s=r.filter(o=>o&&o._dataset===i).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:i&&i.order||0,index:t,_dataset:i,_parsed:[],_sorted:!1},r.push(s)),s}getContext(){return this.$context||(this.$context=ui(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){let i=this.data.datasets[t];if(!i)return!1;let r=this.getDatasetMeta(t);return typeof r.hidden=="boolean"?!r.hidden:!i.hidden}setDatasetVisibility(t,i){let r=this.getDatasetMeta(t);r.hidden=!i}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,i,r){let s=r?"show":"hide",o=this.getDatasetMeta(t),a=o.controller._resolveAnimations(void 0,s);pa(i)?(o.data[i].hidden=!r,this.update()):(this.setDatasetVisibility(t,r),a.update(o,{visible:r}),this.update(c=>c.datasetIndex===t?s:void 0))}hide(t,i){this._updateVisibility(t,i,!1)}show(t,i){this._updateVisibility(t,i,!0)}_destroyDatasetMeta(t){let i=this._metasets[t];i&&i.controller&&i.controller._destroy(),delete this._metasets[t]}_stop(){let t,i;for(this.stop(),Fn.remove(this),t=0,i=this.data.datasets.length;t<i;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");let{canvas:t,ctx:i}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),nm(t,i),this.platform.releaseContext(i),this.canvas=null,this.ctx=null),delete eu[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){let t=this._listeners,i=this.platform,r=(o,a)=>{i.addEventListener(this,o,a),t[o]=a},s=(o,a,c)=>{o.offsetX=a,o.offsetY=c,this._eventHandler(o)};ae(this.options.events,o=>r(o,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});let t=this._responsiveListeners,i=this.platform,r=(l,u)=>{i.addEventListener(this,l,u),t[l]=u},s=(l,u)=>{t[l]&&(i.removeEventListener(this,l,u),delete t[l])},o=(l,u)=>{this.canvas&&this.resize(l,u)},a,c=()=>{s("attach",c),this.attached=!0,this.resize(),r("resize",o),r("detach",a)};a=()=>{this.attached=!1,s("resize",o),this._stop(),this._resize(0,0),r("attach",c)},i.isAttached(this.canvas)?c():a()}unbindEvents(){ae(this._listeners,(t,i)=>{this.platform.removeEventListener(this,i,t)}),this._listeners={},ae(this._responsiveListeners,(t,i)=>{this.platform.removeEventListener(this,i,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,i,r){let s=r?"set":"remove",o,a,c,l;for(i==="dataset"&&(o=this.getDatasetMeta(t[0].datasetIndex),o.controller["_"+s+"DatasetHoverStyle"]()),c=0,l=t.length;c<l;++c){a=t[c];let u=a&&this.getDatasetMeta(a.datasetIndex).controller;u&&u[s+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){let i=this._active||[],r=t.map(({datasetIndex:o,index:a})=>{let c=this.getDatasetMeta(o);if(!c)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:c.data[a],index:a}});!fa(r,i)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,i))}notifyPlugins(t,i,r){return this._plugins.notify(this,t,i,r)}isPluginEnabled(t){return this._plugins._cache.filter(i=>i.plugin.id===t).length===1}_updateHoverStyles(t,i,r){let s=this.options.hover,o=(l,u)=>l.filter(d=>!u.some(h=>d.datasetIndex===h.datasetIndex&&d.index===h.index)),a=o(i,t),c=r?t:o(t,i);a.length&&this.updateHoverStyle(a,s.mode,!1),c.length&&s.mode&&this.updateHoverStyle(c,s.mode,!0)}_eventHandler(t,i){let r={event:t,replay:i,cancelable:!0,inChartArea:this.isPointInArea(t)},s=a=>(a.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",r,s)===!1)return;let o=this._handleEvent(t,i,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,s),(o||r.changed)&&this.render(),this}_handleEvent(t,i,r){let{_active:s=[],options:o}=this,a=i,c=this._getActiveElements(t,s,r,a),l=Nb(t),u=vN(t,this._lastEvent,r,l);r&&(this._lastEvent=null,he(o.onHover,[t,c,this],this),l&&he(o.onClick,[t,c,this],this));let d=!fa(c,s);return(d||i)&&(this._active=c,this._updateHoverStyles(c,s,i)),this._lastEvent=u,d}_getActiveElements(t,i,r,s){if(t.type==="mouseout")return[];if(!r)return i;let o=this.options.hover;return this.getElementsAtEventForMode(t,o.mode,o,s)}}return n})();function Mx(){return ae(_s.instances,n=>n._plugins.invalidate())}function bN(n,e,t){let{startAngle:i,pixelMargin:r,x:s,y:o,outerRadius:a,innerRadius:c}=e,l=r/a;n.beginPath(),n.arc(s,o,a,i-l,t+l),c>r?(l=r/c,n.arc(s,o,c,t+l,i-l,!0)):n.arc(s,o,r,t+ke,i-ke),n.closePath(),n.clip()}function xN(n){return Bl(n,["outerStart","outerEnd","innerStart","innerEnd"])}function CN(n,e,t,i){let r=xN(n.options.borderRadius),s=(t-e)/2,o=Math.min(s,i*e/2),a=c=>{let l=(t-Math.min(s,c))*i/2;return Vt(c,0,Math.min(s,l))};return{outerStart:a(r.outerStart),outerEnd:a(r.outerEnd),innerStart:Vt(r.innerStart,0,o),innerEnd:Vt(r.innerEnd,0,o)}}function fs(n,e,t,i){return{x:t+n*Math.cos(e),y:i+n*Math.sin(e)}}function ru(n,e,t,i,r,s){let{x:o,y:a,startAngle:c,pixelMargin:l,innerRadius:u}=e,d=Math.max(e.outerRadius+i+t-l,0),h=u>0?u+i+t+l:0,f=0,p=r-c;if(i){let ue=u>0?u-i:0,ve=d>0?d-i:0,De=(ue+ve)/2,Yt=De!==0?p*De/(De+i):p;f=(p-Yt)/2}let _=Math.max(.001,p*d-t/Ae)/d,v=(p-_)/2,x=c+v+f,w=r-v-f,{outerStart:T,outerEnd:P,innerStart:A,innerEnd:D}=CN(e,h,d,w-x),L=d-T,F=d-P,V=x+T/L,X=w-P/F,Q=h+A,Z=h+D,qe=x+A/Q,Pt=w-D/Z;if(n.beginPath(),s){let ue=(V+X)/2;if(n.arc(o,a,d,V,ue),n.arc(o,a,d,ue,X),P>0){let Je=fs(F,X,o,a);n.arc(Je.x,Je.y,P,X,w+ke)}let ve=fs(Z,w,o,a);if(n.lineTo(ve.x,ve.y),D>0){let Je=fs(Z,Pt,o,a);n.arc(Je.x,Je.y,D,w+ke,Pt+Math.PI)}let De=(w-D/h+(x+A/h))/2;if(n.arc(o,a,h,w-D/h,De,!0),n.arc(o,a,h,De,x+A/h,!0),A>0){let Je=fs(Q,qe,o,a);n.arc(Je.x,Je.y,A,qe+Math.PI,x-ke)}let Yt=fs(L,x,o,a);if(n.lineTo(Yt.x,Yt.y),T>0){let Je=fs(L,V,o,a);n.arc(Je.x,Je.y,T,x-ke,V)}}else{n.moveTo(o,a);let ue=Math.cos(V)*d+o,ve=Math.sin(V)*d+a;n.lineTo(ue,ve);let De=Math.cos(X)*d+o,Yt=Math.sin(X)*d+a;n.lineTo(De,Yt)}n.closePath()}function wN(n,e,t,i,r){let{fullCircles:s,startAngle:o,circumference:a}=e,c=e.endAngle;if(s){ru(n,e,t,i,c,r);for(let l=0;l<s;++l)n.fill();isNaN(a)||(c=o+(a%Se||Se))}return ru(n,e,t,i,c,r),n.fill(),c}function SN(n,e,t,i,r){let{fullCircles:s,startAngle:o,circumference:a,options:c}=e,{borderWidth:l,borderJoinStyle:u,borderDash:d,borderDashOffset:h}=c,f=c.borderAlign==="inner";if(!l)return;n.setLineDash(d||[]),n.lineDashOffset=h,f?(n.lineWidth=l*2,n.lineJoin=u||"round"):(n.lineWidth=l,n.lineJoin=u||"bevel");let p=e.endAngle;if(s){ru(n,e,t,i,p,r);for(let _=0;_<s;++_)n.stroke();isNaN(a)||(p=o+(a%Se||Se))}f&&bN(n,e,p),s||(ru(n,e,t,i,p,r),n.stroke())}var su=class extends lr{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,i){let r=this.getProps(["x","y"],i),{angle:s,distance:o}=Xp(r,{x:e,y:t}),{startAngle:a,endAngle:c,innerRadius:l,outerRadius:u,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),h=(this.options.spacing+this.options.borderWidth)/2,p=re(d,c-a)>=Se||va(s,a,c),_=ds(o,l+h,u+h);return p&&_}getCenterPoint(e){let{x:t,y:i,startAngle:r,endAngle:s,innerRadius:o,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:c,spacing:l}=this.options,u=(r+s)/2,d=(o+a+l+c)/2;return{x:t+Math.cos(u)*d,y:i+Math.sin(u)*d}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){let{options:t,circumference:i}=this,r=(t.offset||0)/4,s=(t.spacing||0)/2,o=t.circular;if(this.pixelMargin=t.borderAlign==="inner"?.33:0,this.fullCircles=i>Se?Math.floor(i/Se):0,i===0||this.innerRadius<0||this.outerRadius<0)return;e.save();let a=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(a)*r,Math.sin(a)*r);let c=1-Math.sin(Math.min(Ae,i||0)),l=r*c;e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,wN(e,this,l,s,o),SN(e,this,l,s,o),e.restore()}};var Tm=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],Px=Tm.map(n=>n.replace("rgb(","rgba(").replace(")",", 0.5)"));function uC(n){return Tm[n%Tm.length]}function dC(n){return Px[n%Px.length]}function EN(n,e){return n.borderColor=uC(e),n.backgroundColor=dC(e),++e}function IN(n,e){return n.backgroundColor=n.data.map(()=>uC(e++)),e}function TN(n,e){return n.backgroundColor=n.data.map(()=>dC(e++)),e}function AN(n){let e=0;return(t,i)=>{let r=n.getDatasetMeta(i).controller;r instanceof eC?e=IN(t,e):r instanceof pR?e=TN(t,e):r&&(e=EN(t,e))}}function Ox(n){let e;for(e in n)if(n[e].borderColor||n[e].backgroundColor)return!0;return!1}function MN(n){return n&&(n.borderColor||n.backgroundColor)}var hC={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(n,e,t){if(!t.enabled)return;let{data:{datasets:i},options:r}=n.config,{elements:s}=r;if(!t.forceOverride&&(Ox(i)||MN(r)||s&&Ox(s)))return;let o=AN(n);i.forEach(o)}};var kx=(n,e)=>{let{boxHeight:t=e,boxWidth:i=e}=n;return n.usePointStyle&&(t=Math.min(t,e),i=n.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:t,itemHeight:Math.max(e,t)}},PN=(n,e)=>n!==null&&e!==null&&n.datasetIndex===e.datasetIndex&&n.index===e.index,ou=class extends lr{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,i){this.maxWidth=e,this.maxHeight=t,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){let e=this.options.labels||{},t=he(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(i=>e.filter(i,this.chart.data))),e.sort&&(t=t.sort((i,r)=>e.sort(i,r,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){let{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}let i=e.labels,r=Ge(i.font),s=r.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:c}=kx(i,s),l,u;t.font=r.string,this.isHorizontal()?(l=this.maxWidth,u=this._fitRows(o,s,a,c)+10):(u=this.maxHeight,l=this._fitCols(o,r,a,c)+10),this.width=Math.min(l,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,t,i,r){let{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,c=this.legendHitBoxes=[],l=this.lineWidths=[0],u=r+a,d=e;s.textAlign="left",s.textBaseline="middle";let h=-1,f=-u;return this.legendItems.forEach((p,_)=>{let v=i+t/2+s.measureText(p.text).width;(_===0||l[l.length-1]+v+2*a>o)&&(d+=u,l[l.length-(_>0?0:1)]=0,f+=u,h++),c[_]={left:0,top:f,row:h,width:v,height:r},l[l.length-1]+=v+a}),d}_fitCols(e,t,i,r){let{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,c=this.legendHitBoxes=[],l=this.columnSizes=[],u=o-e,d=a,h=0,f=0,p=0,_=0;return this.legendItems.forEach((v,x)=>{let{itemWidth:w,itemHeight:T}=ON(i,t,s,v,r);x>0&&f+T+2*a>u&&(d+=h+a,l.push({width:h,height:f}),p+=h+a,_++,h=f=0),c[x]={left:p,top:f,col:_,width:w,height:T},h=Math.max(h,w),f+=T+a}),d+=h,l.push({width:h,height:f}),d}adjustHitBoxes(){if(!this.options.display)return;let e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:i,labels:{padding:r},rtl:s}}=this,o=or(s,this.left,this.width);if(this.isHorizontal()){let a=0,c=It(i,this.left+r,this.right-this.lineWidths[a]);for(let l of t)a!==l.row&&(a=l.row,c=It(i,this.left+r,this.right-this.lineWidths[a])),l.top+=this.top+e+r,l.left=o.leftForLtr(o.x(c),l.width),c+=l.width+r}else{let a=0,c=It(i,this.top+e+r,this.bottom-this.columnSizes[a].height);for(let l of t)l.col!==a&&(a=l.col,c=It(i,this.top+e+r,this.bottom-this.columnSizes[a].height)),l.top=c,l.left+=this.left+r,l.left=o.leftForLtr(o.x(l.left),l.width),c+=l.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){let e=this.ctx;zl(e,this),this._draw(),jl(e)}}_draw(){let{options:e,columnSizes:t,lineWidths:i,ctx:r}=this,{align:s,labels:o}=e,a=ge.color,c=or(e.rtl,this.left,this.width),l=Ge(o.font),{padding:u}=o,d=l.size,h=d/2,f;this.drawTitle(),r.textAlign=c.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=l.string;let{boxWidth:p,boxHeight:_,itemHeight:v}=kx(o,d),x=function(D,L,F){if(isNaN(p)||p<=0||isNaN(_)||_<0)return;r.save();let V=re(F.lineWidth,1);if(r.fillStyle=re(F.fillStyle,a),r.lineCap=re(F.lineCap,"butt"),r.lineDashOffset=re(F.lineDashOffset,0),r.lineJoin=re(F.lineJoin,"miter"),r.lineWidth=V,r.strokeStyle=re(F.strokeStyle,a),r.setLineDash(re(F.lineDash,[])),o.usePointStyle){let X={radius:_*Math.SQRT2/2,pointStyle:F.pointStyle,rotation:F.rotation,borderWidth:V},Q=c.xPlus(D,p/2),Z=L+h;rm(r,X,Q,Z,o.pointStyleWidth&&p)}else{let X=L+Math.max((d-_)/2,0),Q=c.leftForLtr(D,p),Z=sr(F.borderRadius);r.beginPath(),Object.values(Z).some(qe=>qe!==0)?ba(r,{x:Q,y:X,w:p,h:_,radius:Z}):r.rect(Q,X,p,_),r.fill(),V!==0&&r.stroke()}r.restore()},w=function(D,L,F){rr(r,F.text,D,L+v/2,l,{strikethrough:F.hidden,textAlign:c.textAlign(F.textAlign)})},T=this.isHorizontal(),P=this._computeTitleHeight();T?f={x:It(s,this.left+u,this.right-i[0]),y:this.top+u+P,line:0}:f={x:this.left+u,y:It(s,this.top+P+u,this.bottom-t[0].height),line:0},um(this.ctx,e.textDirection);let A=v+u;this.legendItems.forEach((D,L)=>{r.strokeStyle=D.fontColor,r.fillStyle=D.fontColor;let F=r.measureText(D.text).width,V=c.textAlign(D.textAlign||(D.textAlign=o.textAlign)),X=p+h+F,Q=f.x,Z=f.y;c.setWidth(this.width),T?L>0&&Q+X+u>this.right&&(Z=f.y+=A,f.line++,Q=f.x=It(s,this.left+u,this.right-i[f.line])):L>0&&Z+A>this.bottom&&(Q=f.x=Q+t[f.line].width+u,f.line++,Z=f.y=It(s,this.top+P+u,this.bottom-t[f.line].height));let qe=c.x(Q);if(x(qe,Z,D),Q=Gb(V,Q+p+h,T?Q+X:this.right,e.rtl),w(c.x(Q),Z,D),T)f.x+=X+u;else if(typeof D.text!="string"){let Pt=l.lineHeight;f.y+=fC(D,Pt)+u}else f.y+=A}),dm(this.ctx,e.textDirection)}drawTitle(){let e=this.options,t=e.title,i=Ge(t.font),r=tt(t.padding);if(!t.display)return;let s=or(e.rtl,this.left,this.width),o=this.ctx,a=t.position,c=i.size/2,l=r.top+c,u,d=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),u=this.top+l,d=It(e.align,d,this.right-h);else{let p=this.columnSizes.reduce((_,v)=>Math.max(_,v.height),0);u=l+It(e.align,this.top,this.bottom-p-e.labels.padding-this._computeTitleHeight())}let f=It(a,d,d+h);o.textAlign=s.textAlign(em(a)),o.textBaseline="middle",o.strokeStyle=t.color,o.fillStyle=t.color,o.font=i.string,rr(o,t.text,f,u,i)}_computeTitleHeight(){let e=this.options.title,t=Ge(e.font),i=tt(e.padding);return e.display?t.lineHeight+i.height:0}_getLegendItemAt(e,t){let i,r,s;if(ds(e,this.left,this.right)&&ds(t,this.top,this.bottom)){for(s=this.legendHitBoxes,i=0;i<s.length;++i)if(r=s[i],ds(e,r.left,r.left+r.width)&&ds(t,r.top,r.top+r.height))return this.legendItems[i]}return null}handleEvent(e){let t=this.options;if(!RN(e.type,t))return;let i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){let r=this._hoveredItem,s=PN(r,i);r&&!s&&he(t.onLeave,[e,r,this],this),this._hoveredItem=i,i&&!s&&he(t.onHover,[e,i,this],this)}else i&&he(t.onClick,[e,i,this],this)}};function ON(n,e,t,i,r){let s=kN(i,n,e,t),o=DN(r,i,e.lineHeight);return{itemWidth:s,itemHeight:o}}function kN(n,e,t,i){let r=n.text;return r&&typeof r!="string"&&(r=r.reduce((s,o)=>s.length>o.length?s:o)),e+t.size/2+i.measureText(r).width}function DN(n,e,t){let i=n;return typeof e.text!="string"&&(i=fC(e,t)),i}function fC(n,e){let t=n.text?n.text.length:0;return e*t}function RN(n,e){return!!((n==="mousemove"||n==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(n==="click"||n==="mouseup"))}var pC={id:"legend",_element:ou,start(n,e,t){let i=n.legend=new ou({ctx:n.ctx,options:t,chart:n});hi.configure(n,i,t),hi.addBox(n,i)},stop(n){hi.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,e,t){let i=n.legend;hi.configure(n,i,t),i.options=t},afterUpdate(n){let e=n.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(n,e){e.replay||n.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,e,t){let i=e.datasetIndex,r=t.chart;r.isDatasetVisible(i)?(r.hide(i),e.hidden=!0):(r.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){let e=n.data.datasets,{labels:{usePointStyle:t,pointStyle:i,textAlign:r,color:s,useBorderRadius:o,borderRadius:a}}=n.legend.options;return n._getSortedDatasetMetas().map(c=>{let l=c.controller.getStyle(t?0:void 0),u=tt(l.borderWidth);return{text:e[c.index].label,fillStyle:l.backgroundColor,fontColor:s,hidden:!c.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:l.borderColor,pointStyle:i||l.pointStyle,rotation:l.rotation,textAlign:r||l.textAlign,borderRadius:o&&(a||l.borderRadius),datasetIndex:c.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};var Aa={average(n){if(!n.length)return!1;let e,t,i=new Set,r=0,s=0;for(e=0,t=n.length;e<t;++e){let a=n[e].element;if(a&&a.hasValue()){let c=a.tooltipPosition();i.add(c.x),r+=c.y,++s}}return{x:[...i].reduce((a,c)=>a+c)/i.size,y:r/s}},nearest(n,e){if(!n.length)return!1;let t=e.x,i=e.y,r=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=n.length;s<o;++s){let c=n[s].element;if(c&&c.hasValue()){let l=c.getCenterPoint(),u=Vb(e,l);u<r&&(r=u,a=c)}}if(a){let c=a.tooltipPosition();t=c.x,i=c.y}return{x:t,y:i}}};function gn(n,e){return e&&(Te(e)?Array.prototype.push.apply(n,e):n.push(e)),n}function Vn(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function NN(n,e){let{element:t,datasetIndex:i,index:r}=e,s=n.getDatasetMeta(i).controller,{label:o,value:a}=s.getLabelAndValue(r);return{chart:n,label:o,parsed:s.getParsed(r),raw:n.data.datasets[i].data[r],formattedValue:a,dataset:s.getDataset(),dataIndex:r,datasetIndex:i,element:t}}function Dx(n,e){let t=n.chart.ctx,{body:i,footer:r,title:s}=n,{boxWidth:o,boxHeight:a}=e,c=Ge(e.bodyFont),l=Ge(e.titleFont),u=Ge(e.footerFont),d=s.length,h=r.length,f=i.length,p=tt(e.padding),_=p.height,v=0,x=i.reduce((P,A)=>P+A.before.length+A.lines.length+A.after.length,0);if(x+=n.beforeBody.length+n.afterBody.length,d&&(_+=d*l.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),x){let P=e.displayColors?Math.max(a,c.lineHeight):c.lineHeight;_+=f*P+(x-f)*c.lineHeight+(x-1)*e.bodySpacing}h&&(_+=e.footerMarginTop+h*u.lineHeight+(h-1)*e.footerSpacing);let w=0,T=function(P){v=Math.max(v,t.measureText(P).width+w)};return t.save(),t.font=l.string,ae(n.title,T),t.font=c.string,ae(n.beforeBody.concat(n.afterBody),T),w=e.displayColors?o+2+e.boxPadding:0,ae(i,P=>{ae(P.before,T),ae(P.lines,T),ae(P.after,T)}),w=0,t.font=u.string,ae(n.footer,T),t.restore(),v+=p.width,{width:v,height:_}}function LN(n,e){let{y:t,height:i}=e;return t<i/2?"top":t>n.height-i/2?"bottom":"center"}function FN(n,e,t,i){let{x:r,width:s}=i,o=t.caretSize+t.caretPadding;if(n==="left"&&r+s+o>e.width||n==="right"&&r-s-o<0)return!0}function VN(n,e,t,i){let{x:r,width:s}=t,{width:o,chartArea:{left:a,right:c}}=n,l="center";return i==="center"?l=r<=(a+c)/2?"left":"right":r<=s/2?l="left":r>=o-s/2&&(l="right"),FN(l,n,e,t)&&(l="center"),l}function Rx(n,e,t){let i=t.yAlign||e.yAlign||LN(n,t);return{xAlign:t.xAlign||e.xAlign||VN(n,e,t,i),yAlign:i}}function UN(n,e){let{x:t,width:i}=n;return e==="right"?t-=i:e==="center"&&(t-=i/2),t}function zN(n,e,t){let{y:i,height:r}=n;return e==="top"?i+=t:e==="bottom"?i-=r+t:i-=r/2,i}function Nx(n,e,t,i){let{caretSize:r,caretPadding:s,cornerRadius:o}=n,{xAlign:a,yAlign:c}=t,l=r+s,{topLeft:u,topRight:d,bottomLeft:h,bottomRight:f}=sr(o),p=UN(e,a),_=zN(e,c,l);return c==="center"?a==="left"?p+=l:a==="right"&&(p-=l):a==="left"?p-=Math.max(u,h)+r:a==="right"&&(p+=Math.max(d,f)+r),{x:Vt(p,0,i.width-e.width),y:Vt(_,0,i.height-e.height)}}function Ql(n,e,t){let i=tt(t.padding);return e==="center"?n.x+n.width/2:e==="right"?n.x+n.width-i.right:n.x+i.left}function Lx(n){return gn([],Vn(n))}function jN(n,e,t){return ui(n,{tooltip:e,tooltipItems:t,type:"tooltip"})}function Fx(n,e){let t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?n.override(t):n}var mC={beforeTitle:mn,title(n){if(n.length>0){let e=n[0],t=e.chart.data.labels,i=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return t[e.dataIndex]}return""},afterTitle:mn,beforeBody:mn,beforeLabel:mn,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let e=n.dataset.label||"";e&&(e+=": ");let t=n.formattedValue;return Ee(t)||(e+=t),e},labelColor(n){let t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){let t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:mn,afterBody:mn,beforeFooter:mn,footer:mn,afterFooter:mn};function Tt(n,e,t,i){let r=n[e].call(t,i);return typeof r>"u"?mC[e].call(t,i):r}var Vx=(()=>{class n extends lr{static positioners=Aa;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){let t=this._cachedAnimations;if(t)return t;let i=this.chart,r=this.options.setContext(this.getContext()),s=r.enabled&&i.options.animation&&r.animations,o=new tu(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=jN(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,i){let{callbacks:r}=i,s=Tt(r,"beforeTitle",this,t),o=Tt(r,"title",this,t),a=Tt(r,"afterTitle",this,t),c=[];return c=gn(c,Vn(s)),c=gn(c,Vn(o)),c=gn(c,Vn(a)),c}getBeforeBody(t,i){return Lx(Tt(i.callbacks,"beforeBody",this,t))}getBody(t,i){let{callbacks:r}=i,s=[];return ae(t,o=>{let a={before:[],lines:[],after:[]},c=Fx(r,o);gn(a.before,Vn(Tt(c,"beforeLabel",this,o))),gn(a.lines,Tt(c,"label",this,o)),gn(a.after,Vn(Tt(c,"afterLabel",this,o))),s.push(a)}),s}getAfterBody(t,i){return Lx(Tt(i.callbacks,"afterBody",this,t))}getFooter(t,i){let{callbacks:r}=i,s=Tt(r,"beforeFooter",this,t),o=Tt(r,"footer",this,t),a=Tt(r,"afterFooter",this,t),c=[];return c=gn(c,Vn(s)),c=gn(c,Vn(o)),c=gn(c,Vn(a)),c}_createItems(t){let i=this._active,r=this.chart.data,s=[],o=[],a=[],c=[],l,u;for(l=0,u=i.length;l<u;++l)c.push(NN(this.chart,i[l]));return t.filter&&(c=c.filter((d,h,f)=>t.filter(d,h,f,r))),t.itemSort&&(c=c.sort((d,h)=>t.itemSort(d,h,r))),ae(c,d=>{let h=Fx(t.callbacks,d);s.push(Tt(h,"labelColor",this,d)),o.push(Tt(h,"labelPointStyle",this,d)),a.push(Tt(h,"labelTextColor",this,d))}),this.labelColors=s,this.labelPointStyles=o,this.labelTextColors=a,this.dataPoints=c,c}update(t,i){let r=this.options.setContext(this.getContext()),s=this._active,o,a=[];if(!s.length)this.opacity!==0&&(o={opacity:0});else{let c=Aa[r.position].call(this,s,this._eventPosition);a=this._createItems(r),this.title=this.getTitle(a,r),this.beforeBody=this.getBeforeBody(a,r),this.body=this.getBody(a,r),this.afterBody=this.getAfterBody(a,r),this.footer=this.getFooter(a,r);let l=this._size=Dx(this,r),u=Object.assign({},c,l),d=Rx(this.chart,r,u),h=Nx(r,u,d,this.chart);this.xAlign=d.xAlign,this.yAlign=d.yAlign,o={opacity:1,x:h.x,y:h.y,width:l.width,height:l.height,caretX:c.x,caretY:c.y}}this._tooltipItems=a,this.$context=void 0,o&&this._resolveAnimations().update(this,o),t&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:i})}drawCaret(t,i,r,s){let o=this.getCaretPosition(t,r,s);i.lineTo(o.x1,o.y1),i.lineTo(o.x2,o.y2),i.lineTo(o.x3,o.y3)}getCaretPosition(t,i,r){let{xAlign:s,yAlign:o}=this,{caretSize:a,cornerRadius:c}=r,{topLeft:l,topRight:u,bottomLeft:d,bottomRight:h}=sr(c),{x:f,y:p}=t,{width:_,height:v}=i,x,w,T,P,A,D;return o==="center"?(A=p+v/2,s==="left"?(x=f,w=x-a,P=A+a,D=A-a):(x=f+_,w=x+a,P=A-a,D=A+a),T=x):(s==="left"?w=f+Math.max(l,d)+a:s==="right"?w=f+_-Math.max(u,h)-a:w=this.caretX,o==="top"?(P=p,A=P-a,x=w-a,T=w+a):(P=p+v,A=P+a,x=w+a,T=w-a),D=P),{x1:x,x2:w,x3:T,y1:P,y2:A,y3:D}}drawTitle(t,i,r){let s=this.title,o=s.length,a,c,l;if(o){let u=or(r.rtl,this.x,this.width);for(t.x=Ql(this,r.titleAlign,r),i.textAlign=u.textAlign(r.titleAlign),i.textBaseline="middle",a=Ge(r.titleFont),c=r.titleSpacing,i.fillStyle=r.titleColor,i.font=a.string,l=0;l<o;++l)i.fillText(s[l],u.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+c,l+1===o&&(t.y+=r.titleMarginBottom-c)}}_drawColorBox(t,i,r,s,o){let a=this.labelColors[r],c=this.labelPointStyles[r],{boxHeight:l,boxWidth:u}=o,d=Ge(o.bodyFont),h=Ql(this,"left",o),f=s.x(h),p=l<d.lineHeight?(d.lineHeight-l)/2:0,_=i.y+p;if(o.usePointStyle){let v={radius:Math.min(u,l)/2,pointStyle:c.pointStyle,rotation:c.rotation,borderWidth:1},x=s.leftForLtr(f,u)+u/2,w=_+l/2;t.strokeStyle=o.multiKeyBackground,t.fillStyle=o.multiKeyBackground,im(t,v,x,w),t.strokeStyle=a.borderColor,t.fillStyle=a.backgroundColor,im(t,v,x,w)}else{t.lineWidth=te(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,t.strokeStyle=a.borderColor,t.setLineDash(a.borderDash||[]),t.lineDashOffset=a.borderDashOffset||0;let v=s.leftForLtr(f,u),x=s.leftForLtr(s.xPlus(f,1),u-2),w=sr(a.borderRadius);Object.values(w).some(T=>T!==0)?(t.beginPath(),t.fillStyle=o.multiKeyBackground,ba(t,{x:v,y:_,w:u,h:l,radius:w}),t.fill(),t.stroke(),t.fillStyle=a.backgroundColor,t.beginPath(),ba(t,{x,y:_+1,w:u-2,h:l-2,radius:w}),t.fill()):(t.fillStyle=o.multiKeyBackground,t.fillRect(v,_,u,l),t.strokeRect(v,_,u,l),t.fillStyle=a.backgroundColor,t.fillRect(x,_+1,u-2,l-2))}t.fillStyle=this.labelTextColors[r]}drawBody(t,i,r){let{body:s}=this,{bodySpacing:o,bodyAlign:a,displayColors:c,boxHeight:l,boxWidth:u,boxPadding:d}=r,h=Ge(r.bodyFont),f=h.lineHeight,p=0,_=or(r.rtl,this.x,this.width),v=function(V){i.fillText(V,_.x(t.x+p),t.y+f/2),t.y+=f+o},x=_.textAlign(a),w,T,P,A,D,L,F;for(i.textAlign=a,i.textBaseline="middle",i.font=h.string,t.x=Ql(this,x,r),i.fillStyle=r.bodyColor,ae(this.beforeBody,v),p=c&&x!=="right"?a==="center"?u/2+d:u+2+d:0,A=0,L=s.length;A<L;++A){for(w=s[A],T=this.labelTextColors[A],i.fillStyle=T,ae(w.before,v),P=w.lines,c&&P.length&&(this._drawColorBox(i,t,A,_,r),f=Math.max(h.lineHeight,l)),D=0,F=P.length;D<F;++D)v(P[D]),f=h.lineHeight;ae(w.after,v)}p=0,f=h.lineHeight,ae(this.afterBody,v),t.y-=o}drawFooter(t,i,r){let s=this.footer,o=s.length,a,c;if(o){let l=or(r.rtl,this.x,this.width);for(t.x=Ql(this,r.footerAlign,r),t.y+=r.footerMarginTop,i.textAlign=l.textAlign(r.footerAlign),i.textBaseline="middle",a=Ge(r.footerFont),i.fillStyle=r.footerColor,i.font=a.string,c=0;c<o;++c)i.fillText(s[c],l.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+r.footerSpacing}}drawBackground(t,i,r,s){let{xAlign:o,yAlign:a}=this,{x:c,y:l}=t,{width:u,height:d}=r,{topLeft:h,topRight:f,bottomLeft:p,bottomRight:_}=sr(s.cornerRadius);i.fillStyle=s.backgroundColor,i.strokeStyle=s.borderColor,i.lineWidth=s.borderWidth,i.beginPath(),i.moveTo(c+h,l),a==="top"&&this.drawCaret(t,i,r,s),i.lineTo(c+u-f,l),i.quadraticCurveTo(c+u,l,c+u,l+f),a==="center"&&o==="right"&&this.drawCaret(t,i,r,s),i.lineTo(c+u,l+d-_),i.quadraticCurveTo(c+u,l+d,c+u-_,l+d),a==="bottom"&&this.drawCaret(t,i,r,s),i.lineTo(c+p,l+d),i.quadraticCurveTo(c,l+d,c,l+d-p),a==="center"&&o==="left"&&this.drawCaret(t,i,r,s),i.lineTo(c,l+h),i.quadraticCurveTo(c,l,c+h,l),i.closePath(),i.fill(),s.borderWidth>0&&i.stroke()}_updateAnimationTarget(t){let i=this.chart,r=this.$animations,s=r&&r.x,o=r&&r.y;if(s||o){let a=Aa[t.position].call(this,this._active,this._eventPosition);if(!a)return;let c=this._size=Dx(this,t),l=Object.assign({},a,this._size),u=Rx(i,t,l),d=Nx(t,l,u,i);(s._to!==d.x||o._to!==d.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=c.width,this.height=c.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,d))}}_willRender(){return!!this.opacity}draw(t){let i=this.options.setContext(this.getContext()),r=this.opacity;if(!r)return;this._updateAnimationTarget(i);let s={width:this.width,height:this.height},o={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;let a=tt(i.padding),c=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;i.enabled&&c&&(t.save(),t.globalAlpha=r,this.drawBackground(o,t,s,i),um(t,i.textDirection),o.y+=a.top,this.drawTitle(o,t,i),this.drawBody(o,t,i),this.drawFooter(o,t,i),dm(t,i.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,i){let r=this._active,s=t.map(({datasetIndex:c,index:l})=>{let u=this.chart.getDatasetMeta(c);if(!u)throw new Error("Cannot find a dataset at index "+c);return{datasetIndex:c,element:u.data[l],index:l}}),o=!fa(r,s),a=this._positionChanged(s,i);(o||a)&&(this._active=s,this._eventPosition=i,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,i,r=!0){if(i&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;let s=this.options,o=this._active||[],a=this._getActiveElements(t,o,i,r),c=this._positionChanged(a,t),l=i||!fa(a,o)||c;return l&&(this._active=a,(s.enabled||s.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,i))),l}_getActiveElements(t,i,r,s){let o=this.options;if(t.type==="mouseout")return[];if(!s)return i.filter(c=>this.chart.data.datasets[c.datasetIndex]&&this.chart.getDatasetMeta(c.datasetIndex).controller.getParsed(c.index)!==void 0);let a=this.chart.getElementsAtEventForMode(t,o.mode,o,r);return o.reverse&&a.reverse(),a}_positionChanged(t,i){let{caretX:r,caretY:s,options:o}=this,a=Aa[o.position].call(this,t,i);return a!==!1&&(r!==a.x||s!==a.y)}}return n})(),gC={id:"tooltip",_element:Vx,positioners:Aa,afterInit(n,e,t){t&&(n.tooltip=new Vx({chart:n,options:t}))},beforeUpdate(n,e,t){n.tooltip&&n.tooltip.initialize(t)},reset(n,e,t){n.tooltip&&n.tooltip.initialize(t)},afterDraw(n){let e=n.tooltip;if(e&&e._willRender()){let t={tooltip:e};if(n.notifyPlugins("beforeTooltipDraw",ce(R({},t),{cancelable:!0}))===!1)return;e.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",t)}},afterEvent(n,e){if(n.tooltip){let t=e.replay;n.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,e)=>e.bodyFont.size,boxWidth:(n,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:mC},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function BN(n,e){let t=[],{bounds:r,step:s,min:o,max:a,precision:c,count:l,maxTicks:u,maxDigits:d,includeBounds:h}=n,f=s||1,p=u-1,{min:_,max:v}=e,x=!Ee(o),w=!Ee(a),T=!Ee(l),P=(v-_)/(d+1),A=qp((v-_)/p/f)*f,D,L,F,V;if(A<1e-14&&!x&&!w)return[{value:_},{value:v}];V=Math.ceil(v/A)-Math.floor(_/A),V>p&&(A=qp(V*A/p/f)*f),Ee(c)||(D=Math.pow(10,c),A=Math.ceil(A*D)/D),r==="ticks"?(L=Math.floor(_/A)*A,F=Math.ceil(v/A)*A):(L=_,F=v),x&&w&&s&&Fb((a-o)/s,A/1e3)?(V=Math.round(Math.min((a-o)/A,u)),A=(a-o)/V,L=o,F=a):T?(L=x?o:L,F=w?a:F,V=l-1,A=(F-L)/V):(V=(F-L)/A,ga(V,Math.round(V),A/1e3)?V=Math.round(V):V=Math.ceil(V));let X=Math.max(Kp(A),Kp(L));D=Math.pow(10,Ee(c)?X:c),L=Math.round(L*D)/D,F=Math.round(F*D)/D;let Q=0;for(x&&(h&&L!==o?(t.push({value:o}),L<o&&Q++,ga(Math.round((L+Q*A)*D)/D,o,Ux(o,P,n))&&Q++):L<o&&Q++);Q<V;++Q){let Z=Math.round((L+Q*A)*D)/D;if(w&&Z>a)break;t.push({value:Z})}return w&&h&&F!==a?t.length&&ga(t[t.length-1].value,a,Ux(a,P,n))?t[t.length-1].value=a:t.push({value:a}):(!w||F===a)&&t.push({value:F}),t}function Ux(n,e,{horizontal:t,minRotation:i}){let r=Gt(i),s=(t?Math.sin(r):Math.cos(r))||.001,o=.75*e*(""+n).length;return Math.min(e/s,o)}var gs=class extends ms{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return Ee(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){let{beginAtZero:e}=this.options,{minDefined:t,maxDefined:i}=this.getUserBounds(),{min:r,max:s}=this,o=c=>r=t?r:c,a=c=>s=i?s:c;if(e){let c=ma(r),l=ma(s);c<0&&l<0?a(0):c>0&&l>0&&o(0)}if(r===s){let c=s===0?1:Math.abs(s*.05);a(s+c),e||o(r-c)}this.min=r,this.max=s}getTickLimit(){let e=this.options.ticks,{maxTicksLimit:t,stepSize:i}=e,r;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),t=t||11),t&&(r=Math.min(t,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){let e=this.options,t=e.ticks,i=this.getTickLimit();i=Math.max(2,i);let r={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},s=this._range||this,o=BN(r,s);return e.bounds==="ticks"&&Yp(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){let e=this.ticks,t=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){let r=(i-t)/Math.max(e.length-1,1)/2;t-=r,i+=r}this._startValue=t,this._endValue=i,this._valueRange=i-t}getLabelForValue(e){return hs(e,this.chart.options.locale,this.options.ticks.format)}},zx=class extends gs{static id="linear";static defaults={ticks:{callback:ya.formatters.numeric}};determineDataLimits(){let{min:e,max:t}=this.getMinMax(!0);this.min=Ue(e)?e:0,this.max=Ue(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){let e=this.isHorizontal(),t=e?this.width:this.height,i=Gt(this.options.ticks.minRotation),r=(e?Math.sin(i):Math.cos(i))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,s.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}},Pa=n=>Math.floor(Ln(n)),cr=(n,e)=>Math.pow(10,Pa(n)+e);function jx(n){return n/Math.pow(10,Pa(n))===1}function Bx(n,e,t){let i=Math.pow(10,t),r=Math.floor(n/i);return Math.ceil(e/i)-r}function WN(n,e){let t=e-n,i=Pa(t);for(;Bx(n,e,i)>10;)i++;for(;Bx(n,e,i)<10;)i--;return Math.min(i,Pa(n))}function HN(n,{min:e,max:t}){e=Et(n.min,e);let i=[],r=Pa(e),s=WN(e,t),o=s<0?Math.pow(10,Math.abs(s)):1,a=Math.pow(10,s),c=r>s?Math.pow(10,r):0,l=Math.round((e-c)*o)/o,u=Math.floor((e-c)/a/10)*a*10,d=Math.floor((l-u)/Math.pow(10,s)),h=Et(n.min,Math.round((c+u+d*Math.pow(10,s))*o)/o);for(;h<t;)i.push({value:h,major:jx(h),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(s++,d=2,o=s>=0?1:o),h=Math.round((c+u+d*Math.pow(10,s))*o)/o;let f=Et(n.max,h);return i.push({value:f,major:jx(f),significand:d}),i}var Wx=class extends ms{static id="logarithmic";static defaults={ticks:{callback:ya.formatters.logarithmic,major:{enabled:!0}}};constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){let i=gs.prototype.parse.apply(this,[e,t]);if(i===0){this._zero=!0;return}return Ue(i)&&i>0?i:null}determineDataLimits(){let{min:e,max:t}=this.getMinMax(!0);this.min=Ue(e)?Math.max(0,e):null,this.max=Ue(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Ue(this._userMin)&&(this.min=e===cr(this.min,0)?cr(this.min,-1):cr(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){let{minDefined:e,maxDefined:t}=this.getUserBounds(),i=this.min,r=this.max,s=a=>i=e?i:a,o=a=>r=t?r:a;i===r&&(i<=0?(s(1),o(10)):(s(cr(i,-1)),o(cr(r,1)))),i<=0&&s(cr(r,-1)),r<=0&&o(cr(i,1)),this.min=i,this.max=r}buildTicks(){let e=this.options,t={min:this._userMin,max:this._userMax},i=HN(t,this);return e.bounds==="ticks"&&Yp(i,this,"value"),e.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(e){return e===void 0?"0":hs(e,this.chart.options.locale,this.options.ticks.format)}configure(){let e=this.min;super.configure(),this._startValue=Ln(e),this._valueRange=Ln(this.max)-Ln(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Ln(e)-this._startValue)/this._valueRange)}getValueForPixel(e){let t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}};function Am(n){let e=n.ticks;if(e.display&&n.display){let t=tt(e.backdropPadding);return re(e.font&&e.font.size,ge.font.size)+t.height}return 0}function $N(n,e,t){return t=Te(t)?t:[t],{w:Kb(n,e.string,t),h:t.length*e.lineHeight}}function Hx(n,e,t,i,r){return n===i||n===r?{start:e-t/2,end:e+t/2}:n<i||n>r?{start:e-t,end:e}:{start:e,end:e+t}}function GN(n){let e={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},t=Object.assign({},e),i=[],r=[],s=n._pointLabels.length,o=n.options.pointLabels,a=o.centerPointLabels?Ae/s:0;for(let c=0;c<s;c++){let l=o.setContext(n.getPointLabelContext(c));r[c]=l.padding;let u=n.getPointPosition(c,n.drawingArea+r[c],a),d=Ge(l.font),h=$N(n.ctx,d,n._pointLabels[c]);i[c]=h;let f=sn(n.getIndexAngle(c)+a),p=Math.round(Ll(f)),_=Hx(p,u.x,h.w,0,180),v=Hx(p,u.y,h.h,90,270);qN(t,e,f,_,v)}n.setCenterPoint(e.l-t.l,t.r-e.r,e.t-t.t,t.b-e.b),n._pointLabelItems=XN(n,i,r)}function qN(n,e,t,i,r){let s=Math.abs(Math.sin(t)),o=Math.abs(Math.cos(t)),a=0,c=0;i.start<e.l?(a=(e.l-i.start)/s,n.l=Math.min(n.l,e.l-a)):i.end>e.r&&(a=(i.end-e.r)/s,n.r=Math.max(n.r,e.r+a)),r.start<e.t?(c=(e.t-r.start)/o,n.t=Math.min(n.t,e.t-c)):r.end>e.b&&(c=(r.end-e.b)/o,n.b=Math.max(n.b,e.b+c))}function YN(n,e,t){let i=n.drawingArea,{extra:r,additionalAngle:s,padding:o,size:a}=t,c=n.getPointPosition(e,i+r+o,s),l=Math.round(Ll(sn(c.angle+ke))),u=ZN(c.y,a.h,l),d=QN(l),h=JN(c.x,a.w,d);return{visible:!0,x:c.x,y:u,textAlign:d,left:h,top:u,right:h+a.w,bottom:u+a.h}}function KN(n,e){if(!e)return!0;let{left:t,top:i,right:r,bottom:s}=n;return!(ir({x:t,y:i},e)||ir({x:t,y:s},e)||ir({x:r,y:i},e)||ir({x:r,y:s},e))}function XN(n,e,t){let i=[],r=n._pointLabels.length,s=n.options,{centerPointLabels:o,display:a}=s.pointLabels,c={extra:Am(s)/2,additionalAngle:o?Ae/r:0},l;for(let u=0;u<r;u++){c.padding=t[u],c.size=e[u];let d=YN(n,u,c);i.push(d),a==="auto"&&(d.visible=KN(d,l),d.visible&&(l=d))}return i}function QN(n){return n===0||n===180?"center":n<180?"left":"right"}function JN(n,e,t){return t==="right"?n-=e:t==="center"&&(n-=e/2),n}function ZN(n,e,t){return t===90||t===270?n-=e/2:(t>270||t<90)&&(n-=e),n}function eL(n,e,t){let{left:i,top:r,right:s,bottom:o}=t,{backdropColor:a}=e;if(!Ee(a)){let c=sr(e.borderRadius),l=tt(e.backdropPadding);n.fillStyle=a;let u=i-l.left,d=r-l.top,h=s-i+l.width,f=o-r+l.height;Object.values(c).some(p=>p!==0)?(n.beginPath(),ba(n,{x:u,y:d,w:h,h:f,radius:c}),n.fill()):n.fillRect(u,d,h,f)}}function tL(n,e){let{ctx:t,options:{pointLabels:i}}=n;for(let r=e-1;r>=0;r--){let s=n._pointLabelItems[r];if(!s.visible)continue;let o=i.setContext(n.getPointLabelContext(r));eL(t,o,s);let a=Ge(o.font),{x:c,y:l,textAlign:u}=s;rr(t,n._pointLabels[r],c,l+a.lineHeight/2,a,{color:o.color,textAlign:u,textBaseline:"middle"})}}function _C(n,e,t,i){let{ctx:r}=n;if(t)r.arc(n.xCenter,n.yCenter,e,0,Se);else{let s=n.getPointPosition(0,e);r.moveTo(s.x,s.y);for(let o=1;o<i;o++)s=n.getPointPosition(o,e),r.lineTo(s.x,s.y)}}function nL(n,e,t,i,r){let s=n.ctx,o=e.circular,{color:a,lineWidth:c}=e;!o&&!i||!a||!c||t<0||(s.save(),s.strokeStyle=a,s.lineWidth=c,s.setLineDash(r.dash),s.lineDashOffset=r.dashOffset,s.beginPath(),_C(n,t,o,i),s.closePath(),s.stroke(),s.restore())}function iL(n,e,t){return ui(n,{label:t,index:e,type:"pointLabel"})}var $x=class extends gs{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:ya.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){let e=this._padding=tt(Am(this.options)/2),t=this.width=this.maxWidth-e.width,i=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+i/2+e.top),this.drawingArea=Math.floor(Math.min(t,i)/2)}determineDataLimits(){let{min:e,max:t}=this.getMinMax(!1);this.min=Ue(e)&&!isNaN(e)?e:0,this.max=Ue(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Am(this.options))}generateTickLabels(e){gs.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((t,i)=>{let r=he(this.options.pointLabels.callback,[t,i],this);return r||r===0?r:""}).filter((t,i)=>this.chart.getDataVisibility(i))}fit(){let e=this.options;e.display&&e.pointLabels.display?GN(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,i,r){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((i-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,i,r))}getIndexAngle(e){let t=Se/(this._pointLabels.length||1),i=this.options.startAngle||0;return sn(e*t+Gt(i))}getDistanceFromCenterForValue(e){if(Ee(e))return NaN;let t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(Ee(e))return NaN;let t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){let t=this._pointLabels||[];if(e>=0&&e<t.length){let i=t[e];return iL(this.getContext(),e,i)}}getPointPosition(e,t,i=0){let r=this.getIndexAngle(e)-ke+i;return{x:Math.cos(r)*t+this.xCenter,y:Math.sin(r)*t+this.yCenter,angle:r}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){let{left:t,top:i,right:r,bottom:s}=this._pointLabelItems[e];return{left:t,top:i,right:r,bottom:s}}drawBackground(){let{backgroundColor:e,grid:{circular:t}}=this.options;if(e){let i=this.ctx;i.save(),i.beginPath(),_C(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),i.closePath(),i.fillStyle=e,i.fill(),i.restore()}}drawGrid(){let e=this.ctx,t=this.options,{angleLines:i,grid:r,border:s}=t,o=this._pointLabels.length,a,c,l;if(t.pointLabels.display&&tL(this,o),r.display&&this.ticks.forEach((u,d)=>{if(d!==0||d===0&&this.min<0){c=this.getDistanceFromCenterForValue(u.value);let h=this.getContext(d),f=r.setContext(h),p=s.setContext(h);nL(this,f,c,o,p)}}),i.display){for(e.save(),a=o-1;a>=0;a--){let u=i.setContext(this.getPointLabelContext(a)),{color:d,lineWidth:h}=u;!h||!d||(e.lineWidth=h,e.strokeStyle=d,e.setLineDash(u.borderDash),e.lineDashOffset=u.borderDashOffset,c=this.getDistanceFromCenterForValue(t.ticks.reverse?this.min:this.max),l=this.getPointPosition(a,c),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(l.x,l.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){let e=this.ctx,t=this.options,i=t.ticks;if(!i.display)return;let r=this.getIndexAngle(0),s,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(r),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,c)=>{if(c===0&&this.min>=0&&!t.reverse)return;let l=i.setContext(this.getContext(c)),u=Ge(l.font);if(s=this.getDistanceFromCenterForValue(this.ticks[c].value),l.showLabelBackdrop){e.font=u.string,o=e.measureText(a.label).width,e.fillStyle=l.backdropColor;let d=tt(l.backdropPadding);e.fillRect(-o/2-d.left,-s-u.size/2-d.top,o+d.width,u.size+d.height)}rr(e,a.label,0,-s,u,{color:l.color,strokeColor:l.textStrokeColor,strokeWidth:l.textStrokeWidth})}),e.restore()}drawTitle(){}},au={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},At=Object.keys(au);function Gx(n,e){return n-e}function qx(n,e){if(Ee(e))return null;let t=n._adapter,{parser:i,round:r,isoWeekday:s}=n._parseOpts,o=e;return typeof i=="function"&&(o=i(o)),Ue(o)||(o=typeof i=="string"?t.parse(o,i):t.parse(o)),o===null?null:(r&&(o=r==="week"&&(_a(s)||s===!0)?t.startOf(o,"isoWeek",s):t.startOf(o,r)),+o)}function Yx(n,e,t,i){let r=At.length;for(let s=At.indexOf(n);s<r-1;++s){let o=au[At[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((t-e)/(a*o.size))<=i)return At[s]}return At[r-1]}function rL(n,e,t,i,r){for(let s=At.length-1;s>=At.indexOf(t);s--){let o=At[s];if(au[o].common&&n._adapter.diff(r,i,o)>=e-1)return o}return At[t?At.indexOf(t):0]}function sL(n){for(let e=At.indexOf(n)+1,t=At.length;e<t;++e)if(au[At[e]].common)return At[e]}function Kx(n,e,t){if(!t)n[e]=!0;else if(t.length){let{lo:i,hi:r}=Fl(t,e),s=t[i]>=e?t[i]:t[r];n[s]=!0}}function oL(n,e,t,i){let r=n._adapter,s=+r.startOf(e[0].value,i),o=e[e.length-1].value,a,c;for(a=s;a<=o;a=+r.add(a,1,i))c=t[a],c>=0&&(e[c].major=!0);return e}function Xx(n,e,t){let i=[],r={},s=e.length,o,a;for(o=0;o<s;++o)a=e[o],r[a]=o,i.push({value:a,major:!1});return s===0||!t?i:oL(n,i,r,t)}var Qx=(()=>{class n extends ms{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,i={}){let r=t.time||(t.time={}),s=this._adapter=new mR._date(t.adapters.date);s.init(i),us(r.displayFormats,s.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(t),this._normalized=i.normalized}parse(t,i){return t===void 0?null:qx(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){let t=this.options,i=this._adapter,r=t.time.unit||"day",{min:s,max:o,minDefined:a,maxDefined:c}=this.getUserBounds();function l(u){!a&&!isNaN(u.min)&&(s=Math.min(s,u.min)),!c&&!isNaN(u.max)&&(o=Math.max(o,u.max))}(!a||!c)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=Ue(s)&&!isNaN(s)?s:+i.startOf(Date.now(),r),o=Ue(o)&&!isNaN(o)?o:+i.endOf(Date.now(),r)+1,this.min=Math.min(s,o-1),this.max=Math.max(s+1,o)}_getLabelBounds(){let t=this.getLabelTimestamps(),i=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return t.length&&(i=t[0],r=t[t.length-1]),{min:i,max:r}}buildTicks(){let t=this.options,i=t.time,r=t.ticks,s=r.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);let o=this.min,a=this.max,c=jb(s,o,a);return this._unit=i.unit||(r.autoSkip?Yx(i.minUnit,this.min,this.max,this._getLabelCapacity(o)):rL(this,c.length,i.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:sL(this._unit),this.initOffsets(s),t.reverse&&c.reverse(),Xx(this,c,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let i=0,r=0,s,o;this.options.offset&&t.length&&(s=this.getDecimalForValue(t[0]),t.length===1?i=1-s:i=(this.getDecimalForValue(t[1])-s)/2,o=this.getDecimalForValue(t[t.length-1]),t.length===1?r=o:r=(o-this.getDecimalForValue(t[t.length-2]))/2);let a=t.length<3?.5:.25;i=Vt(i,0,a),r=Vt(r,0,a),this._offsets={start:i,end:r,factor:1/(i+1+r)}}_generate(){let t=this._adapter,i=this.min,r=this.max,s=this.options,o=s.time,a=o.unit||Yx(o.minUnit,i,r,this._getLabelCapacity(i)),c=re(s.ticks.stepSize,1),l=a==="week"?o.isoWeekday:!1,u=_a(l)||l===!0,d={},h=i,f,p;if(u&&(h=+t.startOf(h,"isoWeek",l)),h=+t.startOf(h,u?"day":a),t.diff(r,i,a)>1e5*c)throw new Error(i+" and "+r+" are too far apart with stepSize of "+c+" "+a);let _=s.ticks.source==="data"&&this.getDataTimestamps();for(f=h,p=0;f<r;f=+t.add(f,c,a),p++)Kx(d,f,_);return(f===r||s.bounds==="ticks"||p===1)&&Kx(d,f,_),Object.keys(d).sort(Gx).map(v=>+v)}getLabelForValue(t){let i=this._adapter,r=this.options.time;return r.tooltipFormat?i.format(t,r.tooltipFormat):i.format(t,r.displayFormats.datetime)}format(t,i){let s=this.options.time.displayFormats,o=this._unit,a=i||s[o];return this._adapter.format(t,a)}_tickFormatFunction(t,i,r,s){let o=this.options,a=o.ticks.callback;if(a)return he(a,[t,i,r],this);let c=o.time.displayFormats,l=this._unit,u=this._majorUnit,d=l&&c[l],h=u&&c[u],f=r[i],p=u&&h&&f&&f.major;return this._adapter.format(t,s||(p?h:d))}generateTickLabels(t){let i,r,s;for(i=0,r=t.length;i<r;++i)s=t[i],s.label=this._tickFormatFunction(s.value,i,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){let i=this._offsets,r=this.getDecimalForValue(t);return this.getPixelForDecimal((i.start+r)*i.factor)}getValueForPixel(t){let i=this._offsets,r=this.getDecimalForPixel(t)/i.factor-i.end;return this.min+r*(this.max-this.min)}_getLabelSize(t){let i=this.options.ticks,r=this.ctx.measureText(t).width,s=Gt(this.isHorizontal()?i.maxRotation:i.minRotation),o=Math.cos(s),a=Math.sin(s),c=this._resolveTickFontOptions(0).size;return{w:r*o+c*a,h:r*a+c*o}}_getLabelCapacity(t){let i=this.options.time,r=i.displayFormats,s=r[i.unit]||r.millisecond,o=this._tickFormatFunction(t,0,Xx(this,[t],this._majorUnit),s),a=this._getLabelSize(o),c=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return c>0?c:1}getDataTimestamps(){let t=this._cache.data||[],i,r;if(t.length)return t;let s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(i=0,r=s.length;i<r;++i)t=t.concat(s[i].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){let t=this._cache.labels||[],i,r;if(t.length)return t;let s=this.getLabels();for(i=0,r=s.length;i<r;++i)t.push(qx(this,s[i]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return Hb(t.sort(Gx))}}return n})();function Jl(n,e,t){let i=0,r=n.length-1,s,o,a,c;t?(e>=n[i].pos&&e<=n[r].pos&&({lo:i,hi:r}=Vl(n,"pos",e)),{pos:s,time:a}=n[i],{pos:o,time:c}=n[r]):(e>=n[i].time&&e<=n[r].time&&({lo:i,hi:r}=Vl(n,"time",e)),{time:s,pos:a}=n[i],{time:o,pos:c}=n[r]);let l=o-s;return l?a+(c-a)*(e-s)/l:a}var Jx=class extends Qx{static id="timeseries";static defaults=Qx.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){let e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=Jl(t,this.min),this._tableRange=Jl(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){let{min:t,max:i}=this,r=[],s=[],o,a,c,l,u;for(o=0,a=e.length;o<a;++o)l=e[o],l>=t&&l<=i&&r.push(l);if(r.length<2)return[{time:t,pos:0},{time:i,pos:1}];for(o=0,a=r.length;o<a;++o)u=r[o+1],c=r[o-1],l=r[o],Math.round((u+c)/2)!==l&&s.push({time:l,pos:o/(a-1)});return s}_generate(){let e=this.min,t=this.max,i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(t)||i.length===1)&&i.push(t),i.sort((r,s)=>r-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;let t=this.getDataTimestamps(),i=this.getLabelTimestamps();return t.length&&i.length?e=this.normalize(t.concat(i)):e=t.length?t:i,e=this._cache.all=e,e}getDecimalForValue(e){return(Jl(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){let t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return Jl(this._table,i*this._tableRange+this._minPos,!0)}};var aL=typeof global=="object"&&global&&global.Object===Object&&global,cu=aL;var cL=typeof self=="object"&&self&&self.Object===Object&&self,lL=cu||cL||Function("return this")(),qt=lL;var uL=qt.Symbol,vs=uL;var vC=Object.prototype,dL=vC.hasOwnProperty,hL=vC.toString,ka=vs?vs.toStringTag:void 0;function fL(n){var e=dL.call(n,ka),t=n[ka];try{n[ka]=void 0;var i=!0}catch{}var r=hL.call(n);return i&&(e?n[ka]=t:delete n[ka]),r}var yC=fL;var pL=Object.prototype,mL=pL.toString;function gL(n){return mL.call(n)}var bC=gL;var _L="[object Null]",vL="[object Undefined]",xC=vs?vs.toStringTag:void 0;function yL(n){return n==null?n===void 0?vL:_L:xC&&xC in Object(n)?yC(n):bC(n)}var fi=yL;function bL(n){return n!=null&&typeof n=="object"}var vn=bL;var xL=Array.isArray,Da=xL;function CL(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var Mt=CL;function wL(n){return n}var lu=wL;var SL="[object AsyncFunction]",EL="[object Function]",IL="[object GeneratorFunction]",TL="[object Proxy]";function AL(n){if(!Mt(n))return!1;var e=fi(n);return e==EL||e==IL||e==SL||e==TL}var ys=AL;var ML=qt["__core-js_shared__"],uu=ML;var CC=function(){var n=/[^.]+$/.exec(uu&&uu.keys&&uu.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function PL(n){return!!CC&&CC in n}var wC=PL;var OL=Function.prototype,kL=OL.toString;function DL(n){if(n!=null){try{return kL.call(n)}catch{}try{return n+""}catch{}}return""}var SC=DL;var RL=/[\\^$.*+?()[\]{}|]/g,NL=/^\[object .+?Constructor\]$/,LL=Function.prototype,FL=Object.prototype,VL=LL.toString,UL=FL.hasOwnProperty,zL=RegExp("^"+VL.call(UL).replace(RL,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function jL(n){if(!Mt(n)||wC(n))return!1;var e=ys(n)?zL:NL;return e.test(SC(n))}var EC=jL;function BL(n,e){return n?.[e]}var IC=BL;function WL(n,e){var t=IC(n,e);return EC(t)?t:void 0}var bs=WL;var TC=Object.create,HL=function(){function n(){}return function(e){if(!Mt(e))return{};if(TC)return TC(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}}(),AC=HL;function $L(n,e,t){switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2])}return n.apply(e,t)}var MC=$L;function GL(n,e){var t=-1,i=n.length;for(e||(e=Array(i));++t<i;)e[t]=n[t];return e}var PC=GL;var qL=800,YL=16,KL=Date.now;function XL(n){var e=0,t=0;return function(){var i=KL(),r=YL-(i-t);if(t=i,r>0){if(++e>=qL)return arguments[0]}else e=0;return n.apply(void 0,arguments)}}var OC=XL;function QL(n){return function(){return n}}var kC=QL;var JL=function(){try{var n=bs(Object,"defineProperty");return n({},"",{}),n}catch{}}(),xs=JL;var ZL=xs?function(n,e){return xs(n,"toString",{configurable:!0,enumerable:!1,value:kC(e),writable:!0})}:lu,DC=ZL;var eF=OC(DC),RC=eF;var tF=9007199254740991,nF=/^(?:0|[1-9]\d*)$/;function iF(n,e){var t=typeof n;return e=e??tF,!!e&&(t=="number"||t!="symbol"&&nF.test(n))&&n>-1&&n%1==0&&n<e}var du=iF;function rF(n,e,t){e=="__proto__"&&xs?xs(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t}var Cs=rF;function sF(n,e){return n===e||n!==n&&e!==e}var pi=sF;var oF=Object.prototype,aF=oF.hasOwnProperty;function cF(n,e,t){var i=n[e];(!(aF.call(n,e)&&pi(i,t))||t===void 0&&!(e in n))&&Cs(n,e,t)}var NC=cF;function lF(n,e,t,i){var r=!t;t||(t={});for(var s=-1,o=e.length;++s<o;){var a=e[s],c=i?i(t[a],n[a],a,t,n):void 0;c===void 0&&(c=n[a]),r?Cs(t,a,c):NC(t,a,c)}return t}var LC=lF;var FC=Math.max;function uF(n,e,t){return e=FC(e===void 0?n.length-1:e,0),function(){for(var i=arguments,r=-1,s=FC(i.length-e,0),o=Array(s);++r<s;)o[r]=i[e+r];r=-1;for(var a=Array(e+1);++r<e;)a[r]=i[r];return a[e]=t(o),MC(n,this,a)}}var VC=uF;function dF(n,e){return RC(VC(n,e,lu),n+"")}var UC=dF;var hF=9007199254740991;function fF(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=hF}var hu=fF;function pF(n){return n!=null&&hu(n.length)&&!ys(n)}var ws=pF;function mF(n,e,t){if(!Mt(t))return!1;var i=typeof e;return(i=="number"?ws(t)&&du(e,t.length):i=="string"&&e in t)?pi(t[e],n):!1}var zC=mF;function gF(n){return UC(function(e,t){var i=-1,r=t.length,s=r>1?t[r-1]:void 0,o=r>2?t[2]:void 0;for(s=n.length>3&&typeof s=="function"?(r--,s):void 0,o&&zC(t[0],t[1],o)&&(s=r<3?void 0:s,r=1),e=Object(e);++i<r;){var a=t[i];a&&n(e,a,i,s)}return e})}var jC=gF;var _F=Object.prototype;function vF(n){var e=n&&n.constructor,t=typeof e=="function"&&e.prototype||_F;return n===t}var fu=vF;function yF(n,e){for(var t=-1,i=Array(n);++t<n;)i[t]=e(t);return i}var BC=yF;var bF="[object Arguments]";function xF(n){return vn(n)&&fi(n)==bF}var Pm=xF;var WC=Object.prototype,CF=WC.hasOwnProperty,wF=WC.propertyIsEnumerable,SF=Pm(function(){return arguments}())?Pm:function(n){return vn(n)&&CF.call(n,"callee")&&!wF.call(n,"callee")},Ra=SF;function EF(){return!1}var HC=EF;var qC=typeof exports=="object"&&exports&&!exports.nodeType&&exports,$C=qC&&typeof module=="object"&&module&&!module.nodeType&&module,IF=$C&&$C.exports===qC,GC=IF?qt.Buffer:void 0,TF=GC?GC.isBuffer:void 0,AF=TF||HC,pu=AF;var MF="[object Arguments]",PF="[object Array]",OF="[object Boolean]",kF="[object Date]",DF="[object Error]",RF="[object Function]",NF="[object Map]",LF="[object Number]",FF="[object Object]",VF="[object RegExp]",UF="[object Set]",zF="[object String]",jF="[object WeakMap]",BF="[object ArrayBuffer]",WF="[object DataView]",HF="[object Float32Array]",$F="[object Float64Array]",GF="[object Int8Array]",qF="[object Int16Array]",YF="[object Int32Array]",KF="[object Uint8Array]",XF="[object Uint8ClampedArray]",QF="[object Uint16Array]",JF="[object Uint32Array]",_e={};_e[HF]=_e[$F]=_e[GF]=_e[qF]=_e[YF]=_e[KF]=_e[XF]=_e[QF]=_e[JF]=!0;_e[MF]=_e[PF]=_e[BF]=_e[OF]=_e[WF]=_e[kF]=_e[DF]=_e[RF]=_e[NF]=_e[LF]=_e[FF]=_e[VF]=_e[UF]=_e[zF]=_e[jF]=!1;function ZF(n){return vn(n)&&hu(n.length)&&!!_e[fi(n)]}var YC=ZF;function eV(n){return function(e){return n(e)}}var KC=eV;var XC=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Na=XC&&typeof module=="object"&&module&&!module.nodeType&&module,tV=Na&&Na.exports===XC,Om=tV&&cu.process,nV=function(){try{var n=Na&&Na.require&&Na.require("util").types;return n||Om&&Om.binding&&Om.binding("util")}catch{}}(),km=nV;var QC=km&&km.isTypedArray,iV=QC?KC(QC):YC,mu=iV;var rV=Object.prototype,sV=rV.hasOwnProperty;function oV(n,e){var t=Da(n),i=!t&&Ra(n),r=!t&&!i&&pu(n),s=!t&&!i&&!r&&mu(n),o=t||i||r||s,a=o?BC(n.length,String):[],c=a.length;for(var l in n)(e||sV.call(n,l))&&!(o&&(l=="length"||r&&(l=="offset"||l=="parent")||s&&(l=="buffer"||l=="byteLength"||l=="byteOffset")||du(l,c)))&&a.push(l);return a}var JC=oV;function aV(n,e){return function(t){return n(e(t))}}var ZC=aV;function cV(n){var e=[];if(n!=null)for(var t in Object(n))e.push(t);return e}var ew=cV;var lV=Object.prototype,uV=lV.hasOwnProperty;function dV(n){if(!Mt(n))return ew(n);var e=fu(n),t=[];for(var i in n)i=="constructor"&&(e||!uV.call(n,i))||t.push(i);return t}var tw=dV;function hV(n){return ws(n)?JC(n,!0):tw(n)}var gu=hV;var fV=bs(Object,"create"),Un=fV;function pV(){this.__data__=Un?Un(null):{},this.size=0}var nw=pV;function mV(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}var iw=mV;var gV="__lodash_hash_undefined__",_V=Object.prototype,vV=_V.hasOwnProperty;function yV(n){var e=this.__data__;if(Un){var t=e[n];return t===gV?void 0:t}return vV.call(e,n)?e[n]:void 0}var rw=yV;var bV=Object.prototype,xV=bV.hasOwnProperty;function CV(n){var e=this.__data__;return Un?e[n]!==void 0:xV.call(e,n)}var sw=CV;var wV="__lodash_hash_undefined__";function SV(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=Un&&e===void 0?wV:e,this}var ow=SV;function Ss(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}Ss.prototype.clear=nw;Ss.prototype.delete=iw;Ss.prototype.get=rw;Ss.prototype.has=sw;Ss.prototype.set=ow;var Dm=Ss;function EV(){this.__data__=[],this.size=0}var aw=EV;function IV(n,e){for(var t=n.length;t--;)if(pi(n[t][0],e))return t;return-1}var mi=IV;var TV=Array.prototype,AV=TV.splice;function MV(n){var e=this.__data__,t=mi(e,n);if(t<0)return!1;var i=e.length-1;return t==i?e.pop():AV.call(e,t,1),--this.size,!0}var cw=MV;function PV(n){var e=this.__data__,t=mi(e,n);return t<0?void 0:e[t][1]}var lw=PV;function OV(n){return mi(this.__data__,n)>-1}var uw=OV;function kV(n,e){var t=this.__data__,i=mi(t,n);return i<0?(++this.size,t.push([n,e])):t[i][1]=e,this}var dw=kV;function Es(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}Es.prototype.clear=aw;Es.prototype.delete=cw;Es.prototype.get=lw;Es.prototype.has=uw;Es.prototype.set=dw;var gi=Es;var DV=bs(qt,"Map"),_u=DV;function RV(){this.size=0,this.__data__={hash:new Dm,map:new(_u||gi),string:new Dm}}var hw=RV;function NV(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}var fw=NV;function LV(n,e){var t=n.__data__;return fw(e)?t[typeof e=="string"?"string":"hash"]:t.map}var _i=LV;function FV(n){var e=_i(this,n).delete(n);return this.size-=e?1:0,e}var pw=FV;function VV(n){return _i(this,n).get(n)}var mw=VV;function UV(n){return _i(this,n).has(n)}var gw=UV;function zV(n,e){var t=_i(this,n),i=t.size;return t.set(n,e),this.size+=t.size==i?0:1,this}var _w=zV;function Is(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}Is.prototype.clear=hw;Is.prototype.delete=pw;Is.prototype.get=mw;Is.prototype.has=gw;Is.prototype.set=_w;var vw=Is;var jV=ZC(Object.getPrototypeOf,Object),vu=jV;var BV="[object Object]",WV=Function.prototype,HV=Object.prototype,yw=WV.toString,$V=HV.hasOwnProperty,GV=yw.call(Object);function qV(n){if(!vn(n)||fi(n)!=BV)return!1;var e=vu(n);if(e===null)return!0;var t=$V.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&yw.call(t)==GV}var bw=qV;function YV(){this.__data__=new gi,this.size=0}var xw=YV;function KV(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}var Cw=KV;function XV(n){return this.__data__.get(n)}var ww=XV;function QV(n){return this.__data__.has(n)}var Sw=QV;var JV=200;function ZV(n,e){var t=this.__data__;if(t instanceof gi){var i=t.__data__;if(!_u||i.length<JV-1)return i.push([n,e]),this.size=++t.size,this;t=this.__data__=new vw(i)}return t.set(n,e),this.size=t.size,this}var Ew=ZV;function Ts(n){var e=this.__data__=new gi(n);this.size=e.size}Ts.prototype.clear=xw;Ts.prototype.delete=Cw;Ts.prototype.get=ww;Ts.prototype.has=Sw;Ts.prototype.set=Ew;var Iw=Ts;var Pw=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Tw=Pw&&typeof module=="object"&&module&&!module.nodeType&&module,e2=Tw&&Tw.exports===Pw,Aw=e2?qt.Buffer:void 0,Mw=Aw?Aw.allocUnsafe:void 0;function t2(n,e){if(e)return n.slice();var t=n.length,i=Mw?Mw(t):new n.constructor(t);return n.copy(i),i}var Ow=t2;var n2=qt.Uint8Array,Rm=n2;function i2(n){var e=new n.constructor(n.byteLength);return new Rm(e).set(new Rm(n)),e}var kw=i2;function r2(n,e){var t=e?kw(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)}var Dw=r2;function s2(n){return typeof n.constructor=="function"&&!fu(n)?AC(vu(n)):{}}var Rw=s2;function o2(n){return function(e,t,i){for(var r=-1,s=Object(e),o=i(e),a=o.length;a--;){var c=o[n?a:++r];if(t(s[c],c,s)===!1)break}return e}}var Nw=o2;var a2=Nw(),Lw=a2;function c2(n,e,t){(t!==void 0&&!pi(n[e],t)||t===void 0&&!(e in n))&&Cs(n,e,t)}var La=c2;function l2(n){return vn(n)&&ws(n)}var Fw=l2;function u2(n,e){if(!(e==="constructor"&&typeof n[e]=="function")&&e!="__proto__")return n[e]}var Fa=u2;function d2(n){return LC(n,gu(n))}var Vw=d2;function h2(n,e,t,i,r,s,o){var a=Fa(n,t),c=Fa(e,t),l=o.get(c);if(l){La(n,t,l);return}var u=s?s(a,c,t+"",n,e,o):void 0,d=u===void 0;if(d){var h=Da(c),f=!h&&pu(c),p=!h&&!f&&mu(c);u=c,h||f||p?Da(a)?u=a:Fw(a)?u=PC(a):f?(d=!1,u=Ow(c,!0)):p?(d=!1,u=Dw(c,!0)):u=[]:bw(c)||Ra(c)?(u=a,Ra(a)?u=Vw(a):(!Mt(a)||ys(a))&&(u=Rw(c))):d=!1}d&&(o.set(c,u),r(u,c,i,s,o),o.delete(c)),La(n,t,u)}var Uw=h2;function zw(n,e,t,i,r){n!==e&&Lw(e,function(s,o){if(r||(r=new Iw),Mt(s))Uw(n,e,o,t,zw,i,r);else{var a=i?i(Fa(n,o),s,o+"",n,e,r):void 0;a===void 0&&(a=s),La(n,o,a)}},gu)}var jw=zw;var f2=jC(function(n,e,t){jw(n,e,t)}),Nm=f2;var p2=new de("Configuration for ngCharts");var m2=(()=>{let e=class e{constructor(){this.colorschemesOptions=new ze(void 0)}setColorschemesOptions(i){this.pColorschemesOptions=i,this.colorschemesOptions.next(i)}getColorschemesOptions(){return this.pColorschemesOptions}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Bw=(()=>{let e=class e{constructor(i,r,s,o){this.zone=r,this.themeService=s,this.type="bar",this.plugins=[],this.chartClick=new _t,this.chartHover=new _t,this.subs=[],this.themeOverrides={},o?.registerables&&_s.register(...o.registerables),o?.defaults&&ge.set(o.defaults),this.ctx=i.nativeElement.getContext("2d"),this.subs.push(this.themeService.colorschemesOptions.pipe(Gm()).subscribe(a=>this.themeChanged(a)))}ngOnChanges(i){let r=["type"],s=Object.getOwnPropertyNames(i);if(s.some(o=>r.includes(o))||s.every(o=>i[o].isFirstChange()))this.render();else{let o=this.getChartConfiguration();this.chart&&(Object.assign(this.chart.config.data,o.data),this.chart.config.plugins&&Object.assign(this.chart.config.plugins,o.plugins),this.chart.config.options&&Object.assign(this.chart.config.options,o.options)),this.update()}}ngOnDestroy(){this.chart&&(this.chart.destroy(),this.chart=void 0),this.subs.forEach(i=>i.unsubscribe())}render(){return this.chart&&this.chart.destroy(),this.zone.runOutsideAngular(()=>this.chart=new _s(this.ctx,this.getChartConfiguration()))}update(i){this.chart&&this.zone.runOutsideAngular(()=>this.chart?.update(i))}hideDataset(i,r){this.chart&&(this.chart.getDatasetMeta(i).hidden=r,this.update())}isDatasetHidden(i){return this.chart?.getDatasetMeta(i)?.hidden}toBase64Image(){return this.chart?.toBase64Image()}themeChanged(i){this.themeOverrides=i,this.chart&&(this.chart.config.options&&Object.assign(this.chart.config.options,this.getChartOptions()),this.update())}getChartOptions(){return Nm({onHover:(i,r)=>{!this.chartHover.observed&&!this.chartHover.observers?.length||this.zone.run(()=>this.chartHover.emit({event:i,active:r}))},onClick:(i,r)=>{!this.chartClick.observed&&!this.chartClick.observers?.length||this.zone.run(()=>this.chartClick.emit({event:i,active:r}))}},this.themeOverrides,this.options,{plugins:{legend:{display:this.legend}}})}getChartConfiguration(){return{type:this.type,data:this.getChartData(),options:this.getChartOptions(),plugins:this.plugins}}getChartData(){return this.data?this.data:{labels:this.labels||[],datasets:this.datasets||[]}}};e.\u0275fac=function(r){return new(r||e)(G(cn),G(Be),G(m2),G(p2,8))},e.\u0275dir=fe({type:e,selectors:[["canvas","baseChart",""]],inputs:{type:"type",legend:"legend",data:"data",options:"options",plugins:"plugins",labels:"labels",datasets:"datasets"},outputs:{chartClick:"chartClick",chartHover:"chartHover"},exportAs:["base-chart"],standalone:!0,features:[bn]});let n=e;return n})();function g2(n,e){n&1&&(g(0,"p",7),y(1,"To visualize the chart you must create a transaction!"),m())}function _2(n,e){if(n&1&&N(0,"canvas",8),n&2){let t=E();me("data",t.income)("type","pie")}}function v2(n,e){n&1&&(g(0,"p",7),y(1,"To visualize the chart you must create a transaction!"),m())}function y2(n,e){if(n&1&&N(0,"canvas",8),n&2){let t=E();me("data",t.expense)("type","pie")}}_s.register(tC,pC,hC,su,gC);var Ww=(()=>{class n{data;savings=NaN;budget=NaN;percentage=NaN;incomeLabels=[];incomeData=[];expenseLabels=[];expenseData=[];income;expense;dataService=I($e);subscription;destroyRef=I(gt);ngOnInit(){this.subscription=this.dataService.getData().subscribe(t=>{this.data=t;let i=this.data.accounts.main,r=this.data.accounts.income,s=this.data.accounts.expense;this.savings=i[0].balance,this.budget=i[1].balance,this.percentage=this.calcPercentage(i[2].balance,i[2].target),this.incomeLabels=r.map(o=>o.name),this.incomeData=r.map(o=>o.balance),this.expenseLabels=s.map(o=>o.name),this.expenseData=s.map(o=>o.balance),this.income={labels:this.incomeLabels,datasets:[{label:"Income",data:this.incomeData,hoverOffset:10}]},this.expense={labels:this.expenseLabels,datasets:[{label:"Expense",data:this.expenseData,hoverOffset:10}]}}),this.destroyRef.onDestroy(()=>this.subscription.unsubscribe())}calcPercentage(t,i){let r=Math.floor(100*t/i);return r>100?100:r}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=Ce({type:n,selectors:[["app-dashboard"]],standalone:!0,features:[vt([]),we],decls:35,vars:11,consts:[[1,"component-container"],[1,"dashboard-container"],[1,"info-container"],[1,"numbers-container"],[1,"nunito-sans-bold"],[1,"nunito-sans-regular"],[1,"charts-container"],[1,"nunito-sans-bold","chart-placeholder"],["baseChart","",3,"data","type"],[1,"target-container"],[1,"percentage-container"],[1,"percentage"]],template:function(i,r){i&1&&(g(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"h1",4),y(6,"SAVINGS"),m(),g(7,"h2",5),y(8),Ne(9,"number"),m()(),g(10,"div")(11,"h1",4),y(12,"BUDGET"),m(),g(13,"h2",5),y(14),Ne(15,"number"),m()()(),g(16,"div",6)(17,"div")(18,"h1",4),y(19,"INCOME"),m(),ne(20,g2,2,0,"p",7)(21,_2,1,2,"canvas",8),m(),g(22,"div")(23,"h1",4),y(24,"EXPENSE"),m(),ne(25,v2,2,0,"p",7)(26,y2,1,2,"canvas",8),m()()(),g(27,"div",9)(28,"h1",4),y(29,"TARGET"),m(),g(30,"div")(31,"h2",5),y(32),m(),g(33,"div",10),N(34,"div",11),m()()()()()),i&2&&(C(8),ee(We(9,7,r.savings)),C(6),ee(We(15,9,r.budget)),C(6),H(r.incomeLabels.length===0?20:21),C(5),H(r.expenseLabels.length===0?25:26),C(7),ee(r.percentage+"%"),C(2),fg("height",r.percentage+"%"))},dependencies:[Bw,yt],styles:[".component-container[_ngcontent-%COMP%]{width:100%;height:100vh;display:flex;align-items:center;justify-content:center}.dashboard-container[_ngcontent-%COMP%]{width:1420px;height:810px}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%]{font-size:50px;color:var(--secondary)}.dashboard-container[_ngcontent-%COMP%], .info-container[_ngcontent-%COMP%], .numbers-container[_ngcontent-%COMP%], .charts-container[_ngcontent-%COMP%]{display:flex;gap:60px}.info-container[_ngcontent-%COMP%]{flex-direction:column}.numbers-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:500px;height:200px;padding:10px 25px;border:3px solid var(--main);border-radius:15px;box-shadow:0 0 5px #00000040;position:relative}.numbers-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{position:absolute;bottom:5px;right:25px}.charts-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:500px;height:550px;padding:10px 25px;border:3px solid var(--main);border-radius:15px;box-shadow:0 0 5px #00000040}.charts-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center;padding-bottom:10px}.chart-placeholder[_ngcontent-%COMP%]{font-size:30px;margin-top:120px;text-align:center;color:var(--secondary)}.target-container[_ngcontent-%COMP%]{width:300px;height:100%;padding:10px 20px;border:3px solid var(--main);border-radius:15px;box-shadow:0 0 5px #00000040;display:flex;flex-direction:column;justify-content:space-between}.target-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%]{text-align:center}.percentage-container[_ngcontent-%COMP%]{width:100%;height:650px;background-color:#00000026;border-radius:5px;position:relative;overflow:hidden}.percentage[_ngcontent-%COMP%]{background-color:var(--main);width:100%;position:absolute;bottom:0}@media (width <= 1729px){.dashboard-container[_ngcontent-%COMP%]{width:1320px;height:710px}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%]{font-size:40px}.numbers-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:450px;height:150px}.charts-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:450px;height:500px;padding:10px 15px}.percentage-container[_ngcontent-%COMP%]{height:580px}}@media (width <= 1629px){.dashboard-container[_ngcontent-%COMP%]{width:1179px;height:660px}.numbers-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:400px}.charts-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:400px;height:450px}.chart-placeholder[_ngcontent-%COMP%]{margin-top:100px}.percentage-container[_ngcontent-%COMP%]{height:530px}}@media (width <= 1479px){.dashboard-container[_ngcontent-%COMP%]{width:1010px;height:590px}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%]{font-size:35px}.numbers-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:350px;height:130px}.charts-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:350px;height:400px;padding:10px}.chart-placeholder[_ngcontent-%COMP%]{font-size:25px;margin-top:80px}.percentage-container[_ngcontent-%COMP%]{height:470px}.target-container[_ngcontent-%COMP%]{width:250px}}@media (width <= 1279px){.component-container[_ngcontent-%COMP%]{align-items:baseline}.dashboard-container[_ngcontent-%COMP%], .info-container[_ngcontent-%COMP%], .numbers-container[_ngcontent-%COMP%], .charts-container[_ngcontent-%COMP%]{gap:30px}.dashboard-container[_ngcontent-%COMP%]{height:560px;margin-top:60px}.percentage-container[_ngcontent-%COMP%]{height:440px}}@media (width <= 1069px){.dashboard-container[_ngcontent-%COMP%]{width:860px;height:490px}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%]{font-size:30px}.numbers-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:300px;height:110px;padding-left:10px;padding-top:5px}.charts-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:300px;height:350px;padding:10px 8px}.chart-placeholder[_ngcontent-%COMP%]{font-size:20px}.percentage-container[_ngcontent-%COMP%]{height:380px}.target-container[_ngcontent-%COMP%]{width:200px}}@media (width <= 919px){.dashboard-container[_ngcontent-%COMP%], .info-container[_ngcontent-%COMP%], .numbers-container[_ngcontent-%COMP%], .charts-container[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center}.dashboard-container[_ngcontent-%COMP%]{height:fit-content;padding-bottom:60px}}"]})}return n})();function b2(n,e){if(n&1){let t=$();g(0,"div",3)(1,"div",14)(2,"p",15),M("click",function(){O(t);let r=E();return k(r.onOpenForm("savings"))}),y(3,"savings"),m(),N(4,"hr",16),g(5,"p",15),M("click",function(){O(t);let r=E();return k(r.onOpenForm("budget"))}),y(6,"budget"),m(),N(7,"hr",16),g(8,"p",15),M("click",function(){O(t);let r=E();return k(r.onOpenForm("goal"))}),y(9,"goal"),m()()()}}function x2(n,e){if(n&1){let t=$();g(0,"div",10)(1,"div",14)(2,"p",15),M("click",function(){O(t);let r=E();return k(r.onShowTransactions("savings","transfer"))}),y(3,"transfer"),m(),N(4,"hr",16),g(5,"p",15),M("click",function(){O(t);let r=E();return k(r.onShowTransactions("savings","income"))}),y(6,"income"),m(),N(7,"hr",16),g(8,"p",15),M("click",function(){O(t);let r=E();return k(r.onShowTransactions("savings","expense"))}),y(9,"expense"),m()()()}}function C2(n,e){if(n&1){let t=$();g(0,"div",10)(1,"div",14)(2,"p",15),M("click",function(){O(t);let r=E();return k(r.onShowTransactions("budget","transfer"))}),y(3,"transfer"),m(),N(4,"hr",16),g(5,"p",15),M("click",function(){O(t);let r=E();return k(r.onShowTransactions("budget","income"))}),y(6,"income"),m(),N(7,"hr",16),g(8,"p",15),M("click",function(){O(t);let r=E();return k(r.onShowTransactions("budget","expense"))}),y(9,"expense"),m()()()}}function w2(n,e){if(n&1){let t=$();g(0,"div",10)(1,"div",14)(2,"p",15),M("click",function(){O(t);let r=E();return k(r.onShowTransactions("goal","transfer"))}),y(3,"transfer"),m(),N(4,"hr",16),g(5,"p",15),M("click",function(){O(t);let r=E();return k(r.onShowTransactions("goal","income"))}),y(6,"income"),m(),N(7,"hr",16),g(8,"p",15),M("click",function(){O(t);let r=E();return k(r.onShowTransactions("goal","expense"))}),y(9,"expense"),m()()()}}function S2(n,e){if(n&1){let t=$();g(0,"label",23),y(1,"Target balance"),m(),g(2,"input",24),ct("ngModelChange",function(r){O(t);let s=E(2);return at(s.targetBalance,r)||(s.targetBalance=r),k(r)}),m()}if(n&2){let t=E(2);C(2),ot("ngModel",t.targetBalance)}}function E2(n,e){if(n&1){let t=$();g(0,"div",13)(1,"form",17,0),M("ngSubmit",function(){O(t);let r=Re(2),s=E();return k(s.onSubmit(r))}),g(3,"i",18),M("click",function(){O(t);let r=E();return k(r.onCloseForm())}),m(),g(4,"div",19)(5,"label",20),y(6,"Balance"),m(),g(7,"input",21),ct("ngModelChange",function(r){O(t);let s=E();return at(s.balance,r)||(s.balance=r),k(r)}),m(),ne(8,S2,3,1),m(),g(9,"button",22),y(10,"Save changes"),m()()()}if(n&2){let t=Re(2),i=E();C(7),ot("ngModel",i.balance),C(),H(i.formType==="goal"?8:-1),C(),me("disabled",!t.valid)}}var Hw=(()=>{class n{popup=0;formType="";savings=NaN;budget=NaN;goal=NaN;goalTarget=NaN;balance=NaN;targetBalance=NaN;router=I(Me);dataService=I($e);accounts;subscription;destroyRef=I(gt);ngOnInit(){this.subscription=this.dataService.getData().pipe(j(t=>t.accounts.main)).subscribe(t=>{this.accounts=t,this.savings=this.accounts[0].balance,this.budget=this.accounts[1].balance,this.goal=this.accounts[2].balance,this.goalTarget=this.accounts[2].target}),this.destroyRef.onDestroy(()=>this.subscription.unsubscribe())}onShowPopup(t){this.popup===t?this.popup=0:this.popup=t}onOpenForm(t){this.formType=t,t==="savings"?this.balance=this.savings:t==="budget"?this.balance=this.budget:(this.balance=this.goal,this.targetBalance=this.goalTarget)}onCloseForm(){this.formType="",this.popup=0}onShowTransactions(t,i){let r="";i==="transfer"?r="/transfer-transactions":i==="income"?r="/income-transactions":r="/expense-transactions";let s={state:{data:t}};this.router.navigate([r],s)}onSubmit(t){let i=t.value.balance,r=t.value.targetBalance,s=this.formType[0].toUpperCase()+this.formType.slice(1),o=this.accounts.findIndex(c=>c.name===s),a={name:s,balance:i};this.formType==="goal"&&(a.target=r),this.dataService.onEditAccount("main",o,a),this.onCloseForm()}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=Ce({type:n,selectors:[["app-main-accounts"]],standalone:!0,features:[we],decls:41,vars:17,consts:[["form","ngForm"],[1,"section-button-container"],[1,"nunito-sans-bold","manage-btn",3,"click"],[1,"popup","section-popup"],[1,"cards-container"],[1,"card"],[1,"nunito-sans-bold"],[1,"nunito-sans-regular","text"],[1,"card-button-container"],[1,"nunito-sans-bold","show-btn",3,"click"],[1,"popup","card-popup"],[1,"goal"],[1,"card-hr"],[1,"form-container"],[1,"popup-content"],[1,"nunito-sans-bold","popup-text",3,"click"],[1,"popup-hr"],[3,"ngSubmit"],[1,"fa-solid","fa-xmark",3,"click"],[1,"form-inputs"],["for","balance",1,"nunito-sans-semibold"],["type","number","id","balance","min","0","max","999999999","name","balance","required","",1,"nunito-sans-regular",3,"ngModelChange","ngModel"],["type","submit",1,"form-btn","nunito-sans-bold",3,"disabled"],["for","target-balance",1,"nunito-sans-semibold"],["type","number","id","target-balance","min","0","max","999999999","name","targetBalance","required","",1,"nunito-sans-regular",3,"ngModelChange","ngModel"]],template:function(i,r){i&1&&(g(0,"div",1)(1,"button",2),M("click",function(){return r.onShowPopup(1)}),y(2,"Manage accounts"),m(),ne(3,b2,10,0,"div",3),m(),g(4,"div",4)(5,"div",5)(6,"h1",6),y(7,"SAVINGS"),m(),g(8,"p",7),y(9),Ne(10,"number"),m(),g(11,"div",8)(12,"button",9),M("click",function(){return r.onShowPopup(2)}),y(13,"Show transactions"),m(),ne(14,x2,10,0,"div",10),m()(),g(15,"div",5)(16,"h1",6),y(17,"BUDGET"),m(),g(18,"p",7),y(19),Ne(20,"number"),m(),g(21,"div",8)(22,"button",9),M("click",function(){return r.onShowPopup(3)}),y(23,"Show transactions"),m(),ne(24,C2,10,0,"div",10),m()(),g(25,"div",5)(26,"h1",6),y(27,"GOAL"),m(),g(28,"div",11)(29,"p",7),y(30),Ne(31,"number"),m(),N(32,"hr",12),g(33,"p",7),y(34),Ne(35,"number"),m()(),g(36,"div",8)(37,"button",9),M("click",function(){return r.onShowPopup(4)}),y(38,"Show transactions"),m(),ne(39,w2,10,0,"div",10),m()()(),ne(40,E2,11,3,"div",13)),i&2&&(C(3),H(r.popup===1?3:-1),C(6),ee(We(10,9,r.savings)),C(5),H(r.popup===2?14:-1),C(5),ee(We(20,11,r.budget)),C(5),H(r.popup===3?24:-1),C(6),ee(We(31,13,r.goal)),C(4),ee(We(35,15,r.goalTarget)),C(5),H(r.popup===4?39:-1),C(),H(r.formType==="savings"||r.formType==="budget"||r.formType==="goal"?40:-1))},dependencies:[wt,Ct,Ze,Nt,bt,xt,dt,Ft,Lt,ut,lt,yt],styles:['.section-button-container[_ngcontent-%COMP%]{margin:60px auto 120px;position:relative;width:max-content}.manage-btn[_ngcontent-%COMP%]{display:flex;align-items:center;height:80px;padding:10px 20px;font-size:45px;color:#f7f9fc;background-color:var(--main);border:none;border-radius:10px;box-shadow:0 0 5px #00000040;cursor:pointer}.cards-container[_ngcontent-%COMP%]{display:flex;margin:auto;justify-content:space-between;max-width:1470px;padding:0 30px}.card[_ngcontent-%COMP%]{width:450px;height:500px;padding:25px;display:flex;flex-direction:column;justify-content:space-between;text-align:center;border:3px solid var(--main);border-radius:15px;box-shadow:0 0 5px #00000040}h1[_ngcontent-%COMP%]{font-size:50px;color:var(--secondary)}.text[_ngcontent-%COMP%]{font-size:60px;color:var(--secondary)}.goal[_ngcontent-%COMP%]{width:fit-content;margin:auto}.card-hr[_ngcontent-%COMP%]{border:2px solid var(--secondary);border-radius:50px}.show-btn[_ngcontent-%COMP%]{height:80px;padding:10px 20px;font-size:35px;color:#f7f9fc;background-color:var(--main);border:none;border-radius:10px;box-shadow:0 0 5px #00000040;cursor:pointer}.popup[_ngcontent-%COMP%]{width:200px;height:fit-content;display:flex;flex-direction:column;text-align:center;background-color:var(--secondary);color:var(--primary);border-radius:5px;box-shadow:0 0 5px #00000040;position:absolute;top:125%}.popup-content[_ngcontent-%COMP%]{border-radius:5px;overflow:hidden}.popup[_ngcontent-%COMP%]:after{content:"";position:absolute;top:-30px;left:50%;margin-left:-15px;border-width:15px;border-style:solid;border-color:transparent transparent var(--secondary)}.popup-hr[_ngcontent-%COMP%]{border:1px solid var(--primary)}.popup-text[_ngcontent-%COMP%]{padding:10px;font-size:20px;cursor:pointer}.popup-text[_ngcontent-%COMP%]:hover{background-color:var(--main);color:#f7f9fc}.section-popup[_ngcontent-%COMP%]{left:25%}.card-button-container[_ngcontent-%COMP%]{position:relative}.card-popup[_ngcontent-%COMP%]{left:25%}.form-container[_ngcontent-%COMP%]{position:fixed;inset:0;padding-left:250px;display:flex;justify-content:center;align-items:center;background-color:#0000007f;z-index:10}form[_ngcontent-%COMP%]{width:700px;height:fit-content;display:flex;flex-direction:column;padding:60px;background-color:var(--primary);border:3px solid var(--main);border-radius:15px;box-shadow:0 0 5px #00000040;position:relative}i[_ngcontent-%COMP%]{position:absolute;top:15px;right:15px;font-size:50px;color:var(--secondary);cursor:pointer}.form-inputs[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:30px}label[_ngcontent-%COMP%]{margin-bottom:10px;font-size:35px;color:var(--secondary)}input[_ngcontent-%COMP%]{height:70px;margin-bottom:30px;padding:10px 20px;font-size:30px;color:var(--primary);background-color:var(--secondary);border:none;border-radius:5px;box-shadow:0 0 5px #00000040}.form-btn[_ngcontent-%COMP%]{height:80px;padding:10px 20px;font-size:35px;color:#f7f9fc;background-color:var(--main);border:none;border-radius:10px;box-shadow:0 0 5px #00000040;cursor:pointer}.form-btn[_ngcontent-%COMP%]:disabled{opacity:50%}@media (width <= 1729px){.cards-container[_ngcontent-%COMP%]{max-width:1320px}.card[_ngcontent-%COMP%]{width:400px}.card-popup[_ngcontent-%COMP%]{left:21%}}@media (width <= 1629px){.manage-btn[_ngcontent-%COMP%]{height:70px;font-size:40px}.cards-container[_ngcontent-%COMP%]{max-width:1170px;padding:0 5px}.card[_ngcontent-%COMP%]{width:350px}h1[_ngcontent-%COMP%]{font-size:40px}.text[_ngcontent-%COMP%]{font-size:50px}.show-btn[_ngcontent-%COMP%]{height:70px;font-size:25px}.section-popup[_ngcontent-%COMP%]{left:22%}.card-popup[_ngcontent-%COMP%]{left:16%}}@media (width <= 1479px){.form-container[_ngcontent-%COMP%]{padding-left:200px}}@media (width <= 1279px){.form-container[_ngcontent-%COMP%]{padding:30px}form[_ngcontent-%COMP%]{width:500px;padding:30px}label[_ngcontent-%COMP%]{font-size:30px}input[_ngcontent-%COMP%]{height:60px;font-size:25px}.form-btn[_ngcontent-%COMP%]{height:70px;font-size:30px}}@media (width <= 1069px){.section-button-container[_ngcontent-%COMP%]{margin:60px auto}.manage-btn[_ngcontent-%COMP%]{height:60px;font-size:30px}.cards-container[_ngcontent-%COMP%]{max-width:950px}.card[_ngcontent-%COMP%]{width:300px;height:400px}h1[_ngcontent-%COMP%]{font-size:35px}.text[_ngcontent-%COMP%]{font-size:40px}.show-btn[_ngcontent-%COMP%]{height:60px;font-size:20px}.popup[_ngcontent-%COMP%]{top:130%}.section-popup[_ngcontent-%COMP%]{left:14%}.card-popup[_ngcontent-%COMP%]{left:9%}}@media (width <= 919px){.cards-container[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center;gap:5px}.card[_ngcontent-%COMP%]{margin-bottom:60px}}']})}return n})();var I2=(n,e)=>e.name;function T2(n,e){if(n&1){let t=$();g(0,"div",10)(1,"div",11)(2,"p",12),M("click",function(){O(t);let r=E(2);return k(r.onShowTransactions())}),y(3,"show transactions"),m(),N(4,"hr"),g(5,"p",12),M("click",function(){O(t);let r=E(2);return k(r.onOpenForm("edit"))}),y(6,"edit account"),m(),N(7,"hr"),g(8,"p",12),M("click",function(){O(t);let r=E(2);return k(r.onOpenAlert())}),y(9,"delete account"),m()()()}}function A2(n,e){if(n&1){let t=$();g(0,"tr",6)(1,"td",4),y(2),m(),g(3,"td"),y(4),Ne(5,"number"),m(),g(6,"td")(7,"i",9),M("click",function(){let r=O(t).$index,s=E();return k(s.onShowActions(r))}),m(),ne(8,T2,10,0,"div",10),m()()}if(n&2){let t=e.$implicit,i=e.$index,r=E();C(2),ee(t.name),C(2),ee(We(5,3,t.balance)),C(4),H(i===r.accountIdx?8:-1)}}function M2(n,e){if(n&1){let t=$();g(0,"div",7)(1,"form",13,0),M("ngSubmit",function(){O(t);let r=Re(2),s=E();return k(s.onSubmit(r))}),g(3,"i",14),M("click",function(){O(t);let r=E();return k(r.onOpenForm(""))}),m(),g(4,"div",15)(5,"label",16),y(6,"Name"),m(),g(7,"input",17),ct("ngModelChange",function(r){O(t);let s=E();return at(s.accountName,r)||(s.accountName=r),k(r)}),m(),g(8,"label",18),y(9,"Balance"),m(),g(10,"input",19),ct("ngModelChange",function(r){O(t);let s=E();return at(s.accountBalance,r)||(s.accountBalance=r),k(r)}),m()(),g(11,"button",20),y(12),m()()()}if(n&2){let t=Re(2),i=E();C(7),ot("ngModel",i.accountName),C(3),ot("ngModel",i.accountBalance),C(),me("disabled",!t.valid),C(),st(" ",i.formType==="create"?"Create account":"Save changes"," ")}}function P2(n,e){if(n&1){let t=$();g(0,"i",14),M("click",function(){O(t);let r=E(2);return k(r.onCloseAlert())}),m()}}function O2(n,e){if(n&1){let t=$();g(0,"div",25)(1,"button",26),M("click",function(){O(t);let r=E(2);return k(r.onCloseAlert())}),y(2,"Close"),m(),g(3,"button",26),M("click",function(){O(t);let r=E(2);return k(r.onDeleteAccount())}),y(4,"Delete"),m()()}}function k2(n,e){if(n&1&&(g(0,"div",8)(1,"div",21),ne(2,P2,1,0,"i",22),g(3,"p",23),y(4),m(),g(5,"p",24),y(6),m(),ne(7,O2,5,0,"div",25),m()()),n&2){let t=E();C(2),H(t.alertType==="existing"?2:-1),C(2),ee(t.alertType==="existing"?"Existing account":"Account deletion"),C(2),st(" ",t.alertType==="existing"?"An account with the chosen name already exists. Please select a different name to proceed.":"All data regarding this account, including old transactions and graph data will also be deleted!"," "),C(),H(t.alertType==="deletion"?7:-1)}}var $w=(()=>{class n{formType="";alertType="";accountName="";accountBalance;accountIdx=NaN;router=I(Me);accounts=[];data=[];dataService=I($e);subscription;destroyRef=I(gt);ngOnInit(){this.subscription=this.dataService.getData().pipe(j(t=>t.accounts.income)).subscribe(t=>{this.data=t,this.accounts=this.data.map(i=>({name:i.name,balance:i.balance}))}),this.destroyRef.onDestroy(()=>this.subscription.unsubscribe())}onShowActions(t){this.accountIdx===t?this.accountIdx=NaN:this.accountIdx=t}onCloseAlert(){this.alertType="",this.onShowActions(NaN)}onOpenAlert(){this.alertType="deletion"}onDeleteAccount(){this.dataService.onDeleteAccount("income",this.accountIdx),this.onCloseAlert(),this.onShowActions(NaN)}onShowTransactions(){let t={state:{data:this.accounts[this.accountIdx].name}};this.router.navigate(["/income-transactions"],t)}onOpenForm(t){t==="create"&&(this.onShowActions(NaN),this.accountName="",this.accountBalance=NaN),this.formType=t,this.accountName=this.accounts[this.accountIdx].name,this.accountBalance=this.accounts[this.accountIdx].balance}onSubmit(t){let i=t.value.name,r=t.value.balance,s={name:i,balance:r};this.formType==="create"?this.dataService.onCreateAccount("income",s):this.dataService.onEditAccount("income",this.accountIdx,s),this.onShowActions(NaN),this.onOpenForm("")}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=Ce({type:n,selectors:[["app-income-accounts"]],standalone:!0,features:[we],decls:15,vars:2,consts:[["form","ngForm"],[1,"nunito-sans-bold","section-btn",3,"click"],[1,"table-container"],[1,"nunito-sans-bold","header"],[1,"account"],[1,"actions"],[1,"nunito-sans-semibold","row"],[1,"form-container"],[1,"alert-container"],[1,"fa-solid","fa-ellipsis",3,"click"],[1,"popup"],[1,"popup-content"],[1,"nunito-sans-bold","popup-text",3,"click"],[3,"ngSubmit"],[1,"fa-solid","fa-xmark",3,"click"],[1,"inputs-container"],["for","name",1,"nunito-sans-semibold"],["type","text","id","name","name","name","required","",1,"nunito-sans-regular",3,"ngModelChange","ngModel"],["for","balance",1,"nunito-sans-semibold"],["type","number","min","0","max","999999999","id","balance","name","balance","required","",1,"nunito-sans-regular",3,"ngModelChange","ngModel"],[1,"nunito-sans-bold","normal-btn","form-btn",3,"disabled"],[1,"alert"],[1,"fa-solid","fa-xmark"],[1,"nunito-sans-bold","alert-name"],[1,"nunito-sans-regular","alert-msg"],[1,"btns-container"],[1,"nunito-sans-bold","normal-btn",3,"click"]],template:function(i,r){i&1&&(g(0,"button",1),M("click",function(){return r.onOpenForm("create")}),y(1,"Create account"),m(),g(2,"div",2)(3,"table")(4,"tr",3)(5,"th",4),y(6,"Acount"),m(),g(7,"th"),y(8,"Balance"),m(),g(9,"th",5),y(10,"Actions"),m()(),it(11,A2,9,5,"tr",6,I2),m()(),ne(13,M2,13,4,"div",7)(14,k2,8,4,"div",8)),i&2&&(C(11),rt(r.accounts),C(2),H(r.formType==="edit"||r.formType==="create"?13:-1),C(),H(r.alertType==="existing"||r.alertType==="deletion"?14:-1))},dependencies:[yt,wt,Ct,Ze,Nt,bt,xt,dt,Ft,Lt,ut,lt],styles:['.section-btn[_ngcontent-%COMP%]{display:flex;align-items:center;margin:60px auto 120px;height:80px;padding:10px 20px;font-size:45px;color:#f7f9fc;background-color:var(--main);border:none;border-radius:10px;box-shadow:0 0 5px #00000040;cursor:pointer}table[_ngcontent-%COMP%]{width:1420px;margin:auto auto 60px;border-collapse:collapse;text-align:right;box-shadow:0 0 5px #00000040}.header[_ngcontent-%COMP%]{font-size:40px;color:var(--primary);background-color:var(--secondary);border:3px solid var(--secondary)}.account[_ngcontent-%COMP%]{text-align:left}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:10px 60px;position:relative;width:30%}.row[_ngcontent-%COMP%]{font-size:30px;color:var(--secondary);border:3px solid var(--secondary);position:relative}.fa-ellipsis[_ngcontent-%COMP%]{font-size:100px;position:absolute;top:50%;right:85px;cursor:pointer;line-height:0px}.popup[_ngcontent-%COMP%]{width:200px;text-align:center;border-radius:5px;box-shadow:0 0 5px #00000040;position:absolute;top:80%;left:51.4%;z-index:1}.popup[_ngcontent-%COMP%]:after{content:"";position:absolute;top:-20%;left:50%;margin-left:-15px;border-width:15px;border-style:solid;border-color:transparent transparent var(--secondary)}.popup-content[_ngcontent-%COMP%]{border-radius:5px;overflow:hidden}.popup-text[_ngcontent-%COMP%]{padding:10px;font-size:20px;color:var(--primary);background-color:var(--secondary);cursor:pointer}.popup-text[_ngcontent-%COMP%]:hover{background-color:var(--main);color:#f7f9fc}hr[_ngcontent-%COMP%]{border:1px solid var(--primary)}.form-container[_ngcontent-%COMP%]{position:fixed;inset:0;padding-left:250px;display:flex;align-items:center;justify-content:center;background-color:#0000007f;z-index:10}form[_ngcontent-%COMP%]{width:700px;padding:60px;display:flex;flex-direction:column;background-color:var(--primary);border:3px solid var(--main);border-radius:15px;box-shadow:0 0 5px #00000040;position:relative}.fa-xmark[_ngcontent-%COMP%]{position:absolute;top:15px;right:15px;font-size:50px;color:var(--secondary);cursor:pointer}.inputs-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:30px}label[_ngcontent-%COMP%]{margin-bottom:10px;font-size:35px;color:var(--secondary)}input[_ngcontent-%COMP%]{margin-bottom:30px;height:70px;padding:10px 20px;font-size:30px;color:var(--primary);background-color:var(--secondary);border:none;border-radius:5px;box-shadow:0 0 5px #00000040}.normal-btn[_ngcontent-%COMP%]{width:100%;height:80px;padding:10px 20px;font-size:35px;color:#f7f9fc;background-color:var(--main);border:none;border-radius:10px;box-shadow:0 0 5px #00000040;cursor:pointer}.form-btn[_ngcontent-%COMP%]:disabled{opacity:50%}.alert-container[_ngcontent-%COMP%]{position:fixed;inset:0;padding-left:250px;display:flex;align-items:center;justify-content:center;background-color:#0000007f;z-index:10}.alert[_ngcontent-%COMP%]{width:700px;display:flex;flex-direction:column;padding:60px;background-color:var(--primary);border:3px solid var(--main);border-radius:15px;box-shadow:0 0 5px #00000040;position:relative}.alert-name[_ngcontent-%COMP%]{margin-bottom:10px;font-size:35px;color:var(--secondary)}.alert-msg[_ngcontent-%COMP%]{font-size:30px;color:var(--secondary)}.btns-container[_ngcontent-%COMP%]{margin-top:30px;display:flex;justify-content:space-between;gap:10%}@media (width <= 1729px){table[_ngcontent-%COMP%]{width:1320px}.popup[_ngcontent-%COMP%]{left:47.6%}}@media (width <= 1629px){.section-btn[_ngcontent-%COMP%]{height:70px;font-size:40px}table[_ngcontent-%COMP%]{width:1170px}.header[_ngcontent-%COMP%]{font-size:35px}.row[_ngcontent-%COMP%]{font-size:25px}.fa-ellipsis[_ngcontent-%COMP%]{font-size:90px}.popup[_ngcontent-%COMP%]{left:42%}}@media (width <= 1479px){table[_ngcontent-%COMP%]{width:1020px}.popup[_ngcontent-%COMP%]{left:33.5%}.form-container[_ngcontent-%COMP%], .alert-container[_ngcontent-%COMP%]{padding-left:200px}}@media (width <= 1279px){table[_ngcontent-%COMP%]{width:1010px}.popup[_ngcontent-%COMP%]{left:32.95%}.form-container[_ngcontent-%COMP%], .alert-container[_ngcontent-%COMP%]{padding:30px}form[_ngcontent-%COMP%]{width:500px;padding:30px}label[_ngcontent-%COMP%]{font-size:30px}input[_ngcontent-%COMP%]{height:60px;font-size:25px}.normal-btn[_ngcontent-%COMP%]{height:70px;font-size:30px}.alert[_ngcontent-%COMP%]{width:500px;padding:30px}.alert-name[_ngcontent-%COMP%]{font-size:30px}.alert-msg[_ngcontent-%COMP%]{font-size:25px}}@media (width <= 1069px){.section-btn[_ngcontent-%COMP%]{margin-bottom:60px;height:60px;font-size:30px}table[_ngcontent-%COMP%]{width:860px}.header[_ngcontent-%COMP%]{font-size:30px}.row[_ngcontent-%COMP%]{font-size:20px}.fa-ellipsis[_ngcontent-%COMP%]{font-size:70px}.popup[_ngcontent-%COMP%]{left:24%}}@media (width <= 919px){.table-container[_ngcontent-%COMP%]{margin:30px}table[_ngcontent-%COMP%]{width:100%;text-align:center;word-break:break-all}.header[_ngcontent-%COMP%]{font-size:25px}tr[_ngcontent-%COMP%], th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{max-width:100px;padding-left:5px;padding-right:5px}.fa-ellipsis[_ngcontent-%COMP%]{right:calc(50% - 30px)}.popup[_ngcontent-%COMP%]{left:auto;right:5%}.popup[_ngcontent-%COMP%]:after{right:10vw;left:auto}}']})}return n})();var D2=(n,e)=>e.name;function R2(n,e){if(n&1){let t=$();g(0,"div",10)(1,"div",11)(2,"p",12),M("click",function(){O(t);let r=E(2);return k(r.onShowTransactions())}),y(3,"show transactions"),m(),N(4,"hr"),g(5,"p",12),M("click",function(){O(t);let r=E(2);return k(r.onOpenForm("edit"))}),y(6,"edit account"),m(),N(7,"hr"),g(8,"p",12),M("click",function(){O(t);let r=E(2);return k(r.onOpenAlert())}),y(9,"delete account"),m()()()}}function N2(n,e){if(n&1){let t=$();g(0,"tr",6)(1,"td",4),y(2),m(),g(3,"td"),y(4),Ne(5,"number"),m(),g(6,"td")(7,"i",9),M("click",function(){let r=O(t).$index,s=E();return k(s.onShowActions(r))}),m(),ne(8,R2,10,0,"div",10),m()()}if(n&2){let t=e.$implicit,i=e.$index,r=E();C(2),ee(t.name),C(2),ee(We(5,3,t.balance)),C(4),H(i===r.accountIdx?8:-1)}}function L2(n,e){if(n&1){let t=$();g(0,"div",7)(1,"form",13,0),M("ngSubmit",function(){O(t);let r=Re(2),s=E();return k(s.onSubmit(r))}),g(3,"i",14),M("click",function(){O(t);let r=E();return k(r.onOpenForm(""))}),m(),g(4,"div",15)(5,"label",16),y(6,"Name"),m(),g(7,"input",17),ct("ngModelChange",function(r){O(t);let s=E();return at(s.accountName,r)||(s.accountName=r),k(r)}),m(),g(8,"label",18),y(9,"Balance"),m(),g(10,"input",19),ct("ngModelChange",function(r){O(t);let s=E();return at(s.accountBalance,r)||(s.accountBalance=r),k(r)}),m()(),g(11,"button",20),y(12),m()()()}if(n&2){let t=Re(2),i=E();C(7),ot("ngModel",i.accountName),C(3),ot("ngModel",i.accountBalance),C(),me("disabled",!t.valid),C(),st(" ",i.formType==="create"?"Create account":"Save changes"," ")}}function F2(n,e){if(n&1){let t=$();g(0,"i",14),M("click",function(){O(t);let r=E(2);return k(r.onCloseAlert())}),m()}}function V2(n,e){if(n&1){let t=$();g(0,"div",25)(1,"button",26),M("click",function(){O(t);let r=E(2);return k(r.onCloseAlert())}),y(2,"Close"),m(),g(3,"button",26),M("click",function(){O(t);let r=E(2);return k(r.onDeleteAccount())}),y(4,"Delete"),m()()}}function U2(n,e){if(n&1&&(g(0,"div",8)(1,"div",21),ne(2,F2,1,0,"i",22),g(3,"p",23),y(4),m(),g(5,"p",24),y(6),m(),ne(7,V2,5,0,"div",25),m()()),n&2){let t=E();C(2),H(t.alertType==="existing"?2:-1),C(2),ee(t.alertType==="existing"?"Existing account":"Account deletion"),C(2),st(" ",t.alertType==="existing"?"An account with the chosen name already exists. Please select a different name to proceed.":"All data regarding this account, including old transactions and graph data will also be deleted!"," "),C(),H(t.alertType==="deletion"?7:-1)}}var Gw=(()=>{class n{formType="";alertType="";accountName="";accountBalance;accountIdx=NaN;router=I(Me);dataService=I($e);accounts=[];data=[];subscription;destroyRef=I(gt);ngOnInit(){this.subscription=this.dataService.getData().pipe(j(t=>t.accounts.expense)).subscribe(t=>{this.data=t,this.accounts=this.data.map(i=>({name:i.name,balance:i.balance}))}),this.destroyRef.onDestroy(()=>this.subscription.unsubscribe())}onShowActions(t){this.accountIdx===t?this.accountIdx=NaN:this.accountIdx=t}onCloseAlert(){this.alertType="",this.onShowActions(NaN)}onOpenAlert(){this.alertType="deletion"}onDeleteAccount(){this.dataService.onDeleteAccount("expense",this.accountIdx),this.onCloseAlert(),this.onShowActions(NaN)}onShowTransactions(){let t={state:{data:this.accounts[this.accountIdx].name}};this.router.navigate(["/expense-transactions"],t)}onOpenForm(t){t==="create"&&(this.onShowActions(NaN),this.accountName="",this.accountBalance=NaN),this.formType=t,this.accountName=this.accounts[this.accountIdx].name,this.accountBalance=this.accounts[this.accountIdx].balance}onSubmit(t){let i=t.value.name,r=t.value.balance,s={name:i,balance:r};this.formType==="create"?this.dataService.onCreateAccount("expense",s):this.dataService.onEditAccount("expense",this.accountIdx,s),this.onShowActions(NaN),this.onOpenForm("")}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=Ce({type:n,selectors:[["app-expense-accounts"]],standalone:!0,features:[we],decls:15,vars:2,consts:[["form","ngForm"],[1,"nunito-sans-bold","section-btn",3,"click"],[1,"table-container"],[1,"nunito-sans-bold","header"],[1,"account"],[1,"actions"],[1,"nunito-sans-semibold","row"],[1,"form-container"],[1,"alert-container"],[1,"fa-solid","fa-ellipsis",3,"click"],[1,"popup"],[1,"popup-content"],[1,"nunito-sans-bold","popup-text",3,"click"],[3,"ngSubmit"],[1,"fa-solid","fa-xmark",3,"click"],[1,"inputs-container"],["for","name",1,"nunito-sans-semibold"],["type","text","id","name","name","name","required","",1,"nunito-sans-regular",3,"ngModelChange","ngModel"],["for","balance",1,"nunito-sans-semibold"],["type","number","min","0","max","999999999","id","balance","name","balance","required","",1,"nunito-sans-regular",3,"ngModelChange","ngModel"],[1,"nunito-sans-bold","normal-btn","form-btn",3,"disabled"],[1,"alert"],[1,"fa-solid","fa-xmark"],[1,"nunito-sans-bold","alert-name"],[1,"nunito-sans-regular","alert-msg"],[1,"btns-container"],[1,"nunito-sans-bold","normal-btn",3,"click"]],template:function(i,r){i&1&&(g(0,"button",1),M("click",function(){return r.onOpenForm("create")}),y(1,"Create account"),m(),g(2,"div",2)(3,"table")(4,"tr",3)(5,"th",4),y(6,"Acount"),m(),g(7,"th"),y(8,"Balance"),m(),g(9,"th",5),y(10,"Actions"),m()(),it(11,N2,9,5,"tr",6,D2),m()(),ne(13,L2,13,4,"div",7)(14,U2,8,4,"div",8)),i&2&&(C(11),rt(r.accounts),C(2),H(r.formType==="edit"||r.formType==="create"?13:-1),C(),H(r.alertType==="existing"||r.alertType==="deletion"?14:-1))},dependencies:[yt,wt,Ct,Ze,Nt,bt,xt,dt,Ft,Lt,ut,lt],styles:['.section-btn[_ngcontent-%COMP%]{display:flex;align-items:center;margin:60px auto 120px;height:80px;padding:10px 20px;font-size:45px;color:#f7f9fc;background-color:var(--main);border:none;border-radius:10px;box-shadow:0 0 5px #00000040;cursor:pointer}table[_ngcontent-%COMP%]{width:1420px;margin:auto auto 60px;border-collapse:collapse;text-align:right;box-shadow:0 0 5px #00000040}.header[_ngcontent-%COMP%]{font-size:40px;color:var(--primary);background-color:var(--secondary);border:3px solid var(--secondary)}.account[_ngcontent-%COMP%]{text-align:left}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:10px 60px;position:relative;width:30%}.row[_ngcontent-%COMP%]{font-size:30px;color:var(--secondary);border:3px solid var(--secondary);position:relative}.fa-ellipsis[_ngcontent-%COMP%]{font-size:100px;position:absolute;top:50%;right:85px;cursor:pointer;line-height:0px}.popup[_ngcontent-%COMP%]{width:200px;text-align:center;border-radius:5px;box-shadow:0 0 5px #00000040;position:absolute;top:80%;left:51.4%;z-index:1}.popup[_ngcontent-%COMP%]:after{content:"";position:absolute;top:-20%;left:50%;margin-left:-15px;border-width:15px;border-style:solid;border-color:transparent transparent var(--secondary)}.popup-content[_ngcontent-%COMP%]{border-radius:5px;overflow:hidden}.popup-text[_ngcontent-%COMP%]{padding:10px;font-size:20px;color:var(--primary);background-color:var(--secondary);cursor:pointer}.popup-text[_ngcontent-%COMP%]:hover{background-color:var(--main);color:#f7f9fc}hr[_ngcontent-%COMP%]{border:1px solid var(--primary)}.form-container[_ngcontent-%COMP%]{position:fixed;inset:0;padding-left:250px;display:flex;align-items:center;justify-content:center;background-color:#0000007f;z-index:10}form[_ngcontent-%COMP%]{width:700px;padding:60px;display:flex;flex-direction:column;background-color:var(--primary);border:3px solid var(--main);border-radius:15px;box-shadow:0 0 5px #00000040;position:relative}.fa-xmark[_ngcontent-%COMP%]{position:absolute;top:15px;right:15px;font-size:50px;color:var(--secondary);cursor:pointer}.inputs-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:30px}label[_ngcontent-%COMP%]{margin-bottom:10px;font-size:35px;color:var(--secondary)}input[_ngcontent-%COMP%]{margin-bottom:30px;height:70px;padding:10px 20px;font-size:30px;color:var(--primary);background-color:var(--secondary);border:none;border-radius:5px;box-shadow:0 0 5px #00000040}.normal-btn[_ngcontent-%COMP%]{width:100%;height:80px;padding:10px 20px;font-size:35px;color:#f7f9fc;background-color:var(--main);border:none;border-radius:10px;box-shadow:0 0 5px #00000040;cursor:pointer}.form-btn[_ngcontent-%COMP%]:disabled{opacity:50%}.alert-container[_ngcontent-%COMP%]{position:fixed;inset:0;padding-left:250px;display:flex;align-items:center;justify-content:center;background-color:#0000007f;z-index:10}.alert[_ngcontent-%COMP%]{width:700px;display:flex;flex-direction:column;padding:60px;background-color:var(--primary);border:3px solid var(--main);border-radius:15px;box-shadow:0 0 5px #00000040;position:relative}.alert-name[_ngcontent-%COMP%]{margin-bottom:10px;font-size:35px;color:var(--secondary)}.alert-msg[_ngcontent-%COMP%]{font-size:30px;color:var(--secondary)}.btns-container[_ngcontent-%COMP%]{margin-top:30px;display:flex;justify-content:space-between;gap:100px}@media (width <= 1729px){table[_ngcontent-%COMP%]{width:1320px}.popup[_ngcontent-%COMP%]{left:47.6%}}@media (width <= 1629px){.section-btn[_ngcontent-%COMP%]{height:70px;font-size:40px}table[_ngcontent-%COMP%]{width:1170px}.header[_ngcontent-%COMP%]{font-size:35px}.row[_ngcontent-%COMP%]{font-size:25px}.fa-ellipsis[_ngcontent-%COMP%]{font-size:90px}.popup[_ngcontent-%COMP%]{left:42%}}@media (width <= 1479px){table[_ngcontent-%COMP%]{width:1020px}.popup[_ngcontent-%COMP%]{left:33.5%}.form-container[_ngcontent-%COMP%], .alert-container[_ngcontent-%COMP%]{padding-left:200px}}@media (width <= 1279px){table[_ngcontent-%COMP%]{width:1010px}.popup[_ngcontent-%COMP%]{left:32.95%}.form-container[_ngcontent-%COMP%], .alert-container[_ngcontent-%COMP%]{padding:30px}form[_ngcontent-%COMP%]{width:500px;padding:30px}label[_ngcontent-%COMP%]{font-size:30px}input[_ngcontent-%COMP%]{height:60px;font-size:25px}.normal-btn[_ngcontent-%COMP%]{height:70px;font-size:30px}.alert[_ngcontent-%COMP%]{width:500px;padding:30px}.alert-name[_ngcontent-%COMP%]{font-size:30px}.alert-msg[_ngcontent-%COMP%]{font-size:25px}}@media (width <= 1069px){.section-btn[_ngcontent-%COMP%]{margin-bottom:60px;height:60px;font-size:30px}table[_ngcontent-%COMP%]{width:860px}.header[_ngcontent-%COMP%]{font-size:30px}.row[_ngcontent-%COMP%]{font-size:20px}.fa-ellipsis[_ngcontent-%COMP%]{font-size:70px}.popup[_ngcontent-%COMP%]{left:24%}}@media (width <= 919px){.table-container[_ngcontent-%COMP%]{margin:30px}table[_ngcontent-%COMP%]{width:100%;text-align:center;word-break:break-all}.header[_ngcontent-%COMP%]{font-size:25px}tr[_ngcontent-%COMP%], th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{max-width:100px;padding-left:5px;padding-right:5px}.fa-ellipsis[_ngcontent-%COMP%]{right:calc(50% - 30px)}.popup[_ngcontent-%COMP%]{left:auto;right:5%}.popup[_ngcontent-%COMP%]:after{right:10vw;left:auto}}']})}return n})();var As=(()=>{class n{transform(t,i){return i?(i=i.toLowerCase(),t.filter(r=>r.source.toLowerCase().includes(i)||r.receiver.toLowerCase().includes(i))):t}static \u0275fac=function(i){return new(i||n)};static \u0275pipe=Jm({name:"filter",type:n,pure:!0,standalone:!0})}return n})();var z2=(n,e)=>e.name;function j2(n,e){if(n&1){let t=$();g(0,"tr",10),M("click",function(){let r=O(t).$index,s=E();return k(s.onOpenAlert(r))}),g(1,"td"),y(2),m(),g(3,"td"),y(4),Ne(5,"number"),m(),g(6,"td"),y(7),m()()}if(n&2){let t=e.$implicit;C(2),ee(t.source),C(2),ee(We(5,3,t.amount)),C(3),ee(t.receiver)}}function B2(n,e){if(n&1&&N(0,"option",17),n&2){let t=e.$implicit;Hn("value",t.name)}}function W2(n,e){if(n&1){let t=$();g(0,"div",7)(1,"form",11,0),M("ngSubmit",function(){O(t);let r=Re(2),s=E();return k(s.onSubmit(r))}),g(3,"i",12),M("click",function(){O(t);let r=E();return k(r.onOpenForm())}),m(),g(4,"div",13)(5,"label",14),y(6,"Source"),m(),N(7,"input",15),g(8,"datalist",16),it(9,B2,1,1,"option",17,z2),m(),g(11,"label",18),y(12,"Amount"),m(),N(13,"input",19),g(14,"label",20),y(15,"Receiver"),m(),N(16,"input",21),m(),g(17,"button",22),y(18," Create transaction "),m()()()}if(n&2){let t=Re(2),i=E();C(9),rt(i.accounts),C(8),me("disabled",!t.valid)}}function H2(n,e){if(n&1){let t=$();g(0,"div",8)(1,"div",23)(2,"i",12),M("click",function(){O(t);let r=E();return k(r.onCloseAlert())}),m(),g(3,"p",24),y(4),m(),g(5,"p",25),y(6),m()()()}if(n&2){let t=E();C(4),st(" ",t.alertType==="funds"?"Insufficient funds":"Receiver account"," "),C(2),st(" ",t.alertType==="funds"?"The amount exceeds the available balance. Please enter a lower amount or check the account balance to proceed.":"The source and receiver accounts are the same. Please choose a different receiver account to proceed."," ")}}function $2(n,e){if(n&1){let t=$();g(0,"div",9)(1,"div",23)(2,"p",24),y(3,"Transaction deletion"),m(),g(4,"p",25),y(5," Deleting this transaction will reverse it. The amount will be returned to the original account. "),m(),g(6,"div",26)(7,"button",27),M("click",function(){O(t);let r=E();return k(r.onOpenAlert(r.NaN))}),y(8,"Close"),m(),g(9,"button",27),M("click",function(){O(t);let r=E();return k(r.onDelete())}),y(10,"Delete"),m()()()()}}var qw=(()=>{class n{search="";router=I(Me);alertType="";deleteAlert=!1;transactionIdx=NaN;NaN=NaN;isOpen=!1;dataService=I($e);transfers;transactions;accounts;accountsData;subscription;destroyRef=I(gt);constructor(){this.search=this.router.getCurrentNavigation()?.extras.state?.data}ngOnInit(){this.subscription=this.dataService.getData().pipe(ye(t=>{this.accountsData=JSON.parse(JSON.stringify(t.accounts.main)),this.accounts=JSON.parse(JSON.stringify(this.accountsData))}),j(t=>t.transactions.transfer)).subscribe(t=>{this.transfers=t,this.transactions=this.transfers.map(i=>({source:i.source,amount:i.amount,receiver:i.receiver}))}),this.destroyRef.onDestroy(()=>this.subscription.unsubscribe())}onOpenAlert(t){this.deleteAlert=!this.deleteAlert,this.transactionIdx=t}onDelete(){let t=this.transactions[this.transactionIdx],i=t.source,r=t.amount,s=t.receiver,o=this.accounts.findIndex(u=>u.name===i),a=this.accounts.findIndex(u=>u.name===s),c=this.accounts[o].balance+r,l=this.accounts[a].balance-r;if(l<0){this.alertType="funds";return}this.dataService.onEditBalance("main",o,c),this.dataService.onEditBalance("main",a,l),this.dataService.onDeleteTransaction("transfer",this.transactionIdx),this.onOpenAlert(NaN)}onCloseAlert(){this.alertType=""}onOpenForm(){this.isOpen=!this.isOpen}onSubmit(t){let i=t.value.source,r=t.value.amount,s=t.value.receiver,o=this.accounts.findIndex(d=>d.name===i),a=this.accounts.findIndex(d=>d.name===s),c=this.accounts[o].balance-r,l=this.accounts[a].balance+r,u={source:i,amount:r,receiver:s};if(i===s){this.alertType="account";return}else if(c<0){this.alertType="funds";return}this.dataService.onCreateTransaction("transfer",u),this.dataService.onEditBalance("main",o,c),this.dataService.onEditBalance("main",a,l),this.onOpenForm()}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=Ce({type:n,selectors:[["app-transfer-transactions"]],standalone:!0,features:[we],decls:19,vars:7,consts:[["form","ngForm"],[1,"actions-container"],[1,"nunito-sans-bold","section-btn",3,"click"],["type","text","placeholder","Search...",1,"nunito-sans-semibold","search-input",3,"ngModelChange","ngModel"],[1,"table-container"],[1,"nunito-sans-bold","header"],["title","Click to delete transaction",1,"nunito-sans-semibold","row"],[1,"form-container"],[1,"alert-container","index"],[1,"alert-container"],["title","Click to delete transaction",1,"nunito-sans-semibold","row",3,"click"],[3,"ngSubmit"],[1,"fa-solid","fa-xmark",3,"click"],[1,"inputs-container"],["for","source",1,"nunito-sans-semibold"],["type","text","id","source","list","accounts","ngModel","","name","source","required","",1,"nunito-sans-regular","form-input"],["id","accounts"],[3,"value"],["for","amount",1,"nunito-sans-semibold"],["type","number","min","1","max","999999999","id","amount","ngModel","","name","amount","required","",1,"nunito-sans-regular","form-input"],["for","receiver",1,"nunito-sans-semibold"],["type","text","id","receiver","list","accounts","ngModel","","name","receiver","required","",1,"nunito-sans-regular","form-input"],[1,"nunito-sans-bold","normal-btn","form-btn",3,"disabled"],[1,"alert"],[1,"nunito-sans-bold","alert-name"],[1,"nunito-sans-regular","alert-msg"],[1,"btns-container"],[1,"nunito-sans-bold","normal-btn",3,"click"]],template:function(i,r){i&1&&(g(0,"div",1)(1,"button",2),M("click",function(){return r.onOpenForm()}),y(2,"Create transaction"),m(),g(3,"input",3),ct("ngModelChange",function(o){return at(r.search,o)||(r.search=o),o}),m()(),g(4,"div",4)(5,"table")(6,"tr",5)(7,"th"),y(8,"Source"),m(),g(9,"th"),y(10,"Amount"),m(),g(11,"th"),y(12,"Receiver"),m()(),it(13,j2,8,5,"tr",6,mr),Ne(15,"filter"),m()(),ne(16,W2,19,1,"div",7)(17,H2,7,2,"div",8)(18,$2,11,0,"div",9)),i&2&&(C(3),ot("ngModel",r.search),C(10),rt(gr(15,4,r.transactions,r.search)),C(3),H(r.isOpen===!0?16:-1),C(),H(r.alertType==="funds"||r.alertType==="account"?17:-1),C(),H(r.deleteAlert===!0?18:-1))},dependencies:[yt,wt,Ct,Dr,Rr,Ze,Nt,bt,xt,dt,Ft,Lt,ut,lt,As],styles:[".actions-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:60px auto 44px;padding:0 30px;width:fit-content;gap:15px}.section-btn[_ngcontent-%COMP%], .search-input[_ngcontent-%COMP%]{width:100%}.section-btn[_ngcontent-%COMP%]{height:80px;padding:10px 20px;font-size:45px;color:#f7f9fc;background-color:var(--main);border:none;border-radius:10px;box-shadow:0 0 5px #00000040;cursor:pointer}.search-input[_ngcontent-%COMP%]{padding:10px 20px;font-size:30px;color:var(--primary);background-color:var(--secondary);border:none;border-radius:50px;box-shadow:0 0 5px #00000040}.search-input[_ngcontent-%COMP%]::placeholder{color:var(--primary)}table[_ngcontent-%COMP%]{width:1420px;margin:auto auto 60px;border-collapse:collapse;text-align:left;box-shadow:0 0 5px #00000040}.header[_ngcontent-%COMP%]{font-size:40px;color:var(--primary);background-color:var(--secondary);border:3px solid var(--secondary)}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:10px 60px;position:relative;width:30%}.row[_ngcontent-%COMP%]{font-size:30px;color:var(--secondary);border:3px solid var(--secondary);position:relative;cursor:pointer}.row[_ngcontent-%COMP%]:hover{background-color:var(--main);color:#f7f9fc}.test[_ngcontent-%COMP%]{position:absolute;bottom:50%}.form-container[_ngcontent-%COMP%]{position:fixed;inset:0;padding-left:250px;display:flex;align-items:center;justify-content:center;background-color:#0000007f;z-index:10}.index[_ngcontent-%COMP%]{z-index:100!important}form[_ngcontent-%COMP%]{width:700px;padding:60px;display:flex;flex-direction:column;background-color:var(--primary);border:3px solid var(--main);border-radius:15px;box-shadow:0 0 5px #00000040;position:relative}.fa-xmark[_ngcontent-%COMP%]{position:absolute;top:15px;right:15px;font-size:50px;color:var(--secondary);cursor:pointer}.inputs-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:30px}label[_ngcontent-%COMP%]{margin-bottom:10px;font-size:35px;color:var(--secondary)}.form-input[_ngcontent-%COMP%]{margin-bottom:30px;height:70px;padding:10px 20px;font-size:30px;color:var(--primary);background-color:var(--secondary);border:none;border-radius:5px;box-shadow:0 0 5px #00000040}.normal-btn[_ngcontent-%COMP%]{width:100%;height:80px;padding:10px 20px;font-size:35px;color:#f7f9fc;background-color:var(--main);border:none;border-radius:10px;box-shadow:0 0 5px #00000040;cursor:pointer}.form-btn[_ngcontent-%COMP%]:disabled{opacity:50%}.alert-container[_ngcontent-%COMP%]{position:fixed;inset:0;padding-left:250px;display:flex;align-items:center;justify-content:center;background-color:#0000007f;z-index:10}.alert[_ngcontent-%COMP%]{width:700px;display:flex;flex-direction:column;padding:60px;background-color:var(--primary);border:3px solid var(--main);border-radius:15px;box-shadow:0 0 5px #00000040;position:relative}.alert-name[_ngcontent-%COMP%]{margin-bottom:10px;font-size:35px;color:var(--secondary)}.alert-msg[_ngcontent-%COMP%]{font-size:30px;color:var(--secondary)}.btns-container[_ngcontent-%COMP%]{margin-top:30px;display:flex;justify-content:space-between;gap:10%}@media (width <= 1729px){table[_ngcontent-%COMP%]{width:1320px}}@media (width <= 1629px){.actions-container[_ngcontent-%COMP%]{margin-bottom:51px}.section-btn[_ngcontent-%COMP%]{height:70px;font-size:40px}.search-input[_ngcontent-%COMP%]{font-size:25px}table[_ngcontent-%COMP%]{width:1170px}.header[_ngcontent-%COMP%]{font-size:35px}.row[_ngcontent-%COMP%]{font-size:25px}}@media (width <= 1479px){table[_ngcontent-%COMP%]{width:1020px}.form-container[_ngcontent-%COMP%], .alert-container[_ngcontent-%COMP%]{padding-left:200px}}@media (width <= 1279px){table[_ngcontent-%COMP%]{width:1010px}.form-container[_ngcontent-%COMP%], .alert-container[_ngcontent-%COMP%]{padding:30px}form[_ngcontent-%COMP%]{width:500px;padding:30px}label[_ngcontent-%COMP%]{font-size:30px}.form-input[_ngcontent-%COMP%]{height:60px;font-size:25px}.normal-btn[_ngcontent-%COMP%]{height:70px;font-size:30px}.alert[_ngcontent-%COMP%]{width:500px;padding:30px}.alert-name[_ngcontent-%COMP%]{font-size:30px}.alert-msg[_ngcontent-%COMP%]{font-size:25px}}@media (width <= 1069px){.section-btn[_ngcontent-%COMP%]{height:60px;height:auto;font-size:30px}.search-input[_ngcontent-%COMP%]{font-size:20px}table[_ngcontent-%COMP%]{width:860px}.header[_ngcontent-%COMP%]{font-size:30px}.row[_ngcontent-%COMP%]{font-size:20px}}@media (width <= 919px){.table-container[_ngcontent-%COMP%]{margin:30px}table[_ngcontent-%COMP%]{width:100%;text-align:center;word-break:break-all}.header[_ngcontent-%COMP%]{font-size:25px}tr[_ngcontent-%COMP%], th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{max-width:100px;padding-left:5px;padding-right:5px}}"]})}return n})();var Yw=(n,e)=>e.name;function G2(n,e){if(n&1){let t=$();g(0,"tr",10),M("click",function(){let r=O(t).$index,s=E();return k(s.onOpenAlert(r))}),g(1,"td"),y(2),m(),g(3,"td"),y(4),Ne(5,"number"),m(),g(6,"td"),y(7),m()()}if(n&2){let t=e.$implicit;C(2),ee(t.source),C(2),ee(We(5,3,t.amount)),C(3),ee(t.receiver)}}function q2(n,e){if(n&1&&N(0,"option",17),n&2){let t=e.$implicit;Hn("value",t.name)}}function Y2(n,e){if(n&1&&N(0,"option",17),n&2){let t=e.$implicit;Hn("value",t.name)}}function K2(n,e){if(n&1){let t=$();g(0,"div",7)(1,"form",11,0),M("ngSubmit",function(){O(t);let r=Re(2),s=E();return k(s.onSubmit(r))}),g(3,"i",12),M("click",function(){O(t);let r=E();return k(r.onOpenForm())}),m(),g(4,"div",13)(5,"label",14),y(6,"Source"),m(),N(7,"input",15),g(8,"datalist",16),it(9,q2,1,1,"option",17,Yw),m(),g(11,"label",18),y(12,"Amount"),m(),N(13,"input",19),g(14,"label",20),y(15,"Receiver"),m(),N(16,"input",21),g(17,"datalist",22),it(18,Y2,1,1,"option",17,Yw),m()(),g(20,"button",23),y(21," Create transaction "),m()()()}if(n&2){let t=Re(2),i=E();C(9),rt(i.incomeAccounts),C(9),rt(i.mainAccounts),C(2),me("disabled",!t.valid)}}function X2(n,e){if(n&1){let t=$();g(0,"div",8)(1,"div",24)(2,"i",12),M("click",function(){O(t);let r=E();return k(r.onCloseAlert())}),m(),g(3,"p",25),y(4," Insufficient funds "),m(),g(5,"p",26),y(6," The amount exceeds the available balance. Please enter a lower amount or check the account balance to proceed. "),m()()()}}function Q2(n,e){if(n&1){let t=$();g(0,"div",9)(1,"div",24)(2,"p",25),y(3,"Transaction deletion"),m(),g(4,"p",26),y(5," Deleting this transaction will reverse it. The amount will be returned to the original account. "),m(),g(6,"div",27)(7,"button",28),M("click",function(){O(t);let r=E();return k(r.onOpenAlert(r.NaN))}),y(8,"Close"),m(),g(9,"button",28),M("click",function(){O(t);let r=E();return k(r.onDelete())}),y(10,"Delete"),m()()()()}}var Kw=(()=>{class n{search="";router=I(Me);alertType=!1;deleteAlert=!1;transactionIdx=NaN;NaN=NaN;isOpen=!1;dataService=I($e);incomes;transactions;mainAccounts;incomeAccounts;subscription;destroyRef=I(gt);constructor(){this.search=this.router.getCurrentNavigation()?.extras.state?.data}ngOnInit(){this.subscription=this.dataService.getData().pipe(ye(t=>{this.mainAccounts=JSON.parse(JSON.stringify(t.accounts.main)),this.incomeAccounts=JSON.parse(JSON.stringify(t.accounts.income))}),j(t=>t.transactions.income)).subscribe(t=>{this.incomes=t,this.transactions=this.incomes.map(i=>({source:i.source,amount:i.amount,receiver:i.receiver}))}),this.destroyRef.onDestroy(()=>this.subscription.unsubscribe())}onOpenAlert(t){this.deleteAlert=!this.deleteAlert,this.transactionIdx=t}onDelete(){let t=this.transactions[this.transactionIdx],i=t.source,r=t.amount,s=t.receiver,o=this.incomeAccounts.findIndex(u=>u.name===i),a=this.mainAccounts.findIndex(u=>u.name===s),c=this.incomeAccounts[o].balance-r,l=this.mainAccounts[a].balance-r;if(c<0||l<0){this.alertType=!0;return}this.dataService.onEditBalance("income",o,c),this.dataService.onEditBalance("main",a,l),this.dataService.onDeleteTransaction("income",this.transactionIdx),this.onOpenAlert(NaN)}onCloseAlert(){this.alertType=!1}onOpenForm(){this.isOpen=!this.isOpen}onSubmit(t){let i=t.value.source,r=t.value.amount,s=t.value.receiver,o=this.incomeAccounts.findIndex(d=>d.name===i),a=this.mainAccounts.findIndex(d=>d.name===s),c=this.incomeAccounts[o].balance+r,l=this.mainAccounts[a].balance+r,u={source:i,amount:r,receiver:s};this.dataService.onEditBalance("income",o,c),this.dataService.onEditBalance("main",a,l),this.dataService.onCreateTransaction("income",u),this.onOpenForm()}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=Ce({type:n,selectors:[["app-income-transactions"]],standalone:!0,features:[we],decls:19,vars:7,consts:[["form","ngForm"],[1,"actions-container"],[1,"nunito-sans-bold","section-btn",3,"click"],["type","text","placeholder","Search...",1,"nunito-sans-semibold","search-input",3,"ngModelChange","ngModel"],[1,"table-container"],[1,"nunito-sans-bold","header"],["title","Click to delete transaction",1,"nunito-sans-semibold","row"],[1,"form-container"],[1,"alert-container","index"],[1,"alert-container"],["title","Click to delete transaction",1,"nunito-sans-semibold","row",3,"click"],[3,"ngSubmit"],[1,"fa-solid","fa-xmark",3,"click"],[1,"inputs-container"],["for","source",1,"nunito-sans-semibold"],["type","text","id","source","list","incomes","ngModel","","name","source","required","",1,"nunito-sans-regular","form-input"],["id","incomes"],[3,"value"],["for","amount",1,"nunito-sans-semibold"],["type","number","min","1","max","999999999","id","amount","ngModel","","name","amount","required","",1,"nunito-sans-regular","form-input"],["for","receiver",1,"nunito-sans-semibold"],["type","text","id","receiver","list","mains","ngModel","","name","receiver","required","",1,"nunito-sans-regular","form-input"],["id","mains"],[1,"nunito-sans-bold","normal-btn","form-btn",3,"disabled"],[1,"alert"],[1,"nunito-sans-bold","alert-name"],[1,"nunito-sans-regular","alert-msg"],[1,"btns-container"],[1,"nunito-sans-bold","normal-btn",3,"click"]],template:function(i,r){i&1&&(g(0,"div",1)(1,"button",2),M("click",function(){return r.onOpenForm()}),y(2,"Create transaction"),m(),g(3,"input",3),ct("ngModelChange",function(o){return at(r.search,o)||(r.search=o),o}),m()(),g(4,"div",4)(5,"table")(6,"tr",5)(7,"th"),y(8,"Source"),m(),g(9,"th"),y(10,"Amount"),m(),g(11,"th"),y(12,"Receiver"),m()(),it(13,G2,8,5,"tr",6,mr),Ne(15,"filter"),m()(),ne(16,K2,22,1,"div",7)(17,X2,7,0,"div",8)(18,Q2,11,0,"div",9)),i&2&&(C(3),ot("ngModel",r.search),C(10),rt(gr(15,4,r.transactions,r.search)),C(3),H(r.isOpen===!0?16:-1),C(),H(r.alertType===!0?17:-1),C(),H(r.deleteAlert===!0?18:-1))},dependencies:[yt,wt,Ct,Dr,Rr,Ze,Nt,bt,xt,dt,Ft,Lt,ut,lt,As],styles:[".actions-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:60px auto 44px;padding:0 30px;width:fit-content;gap:15px}.section-btn[_ngcontent-%COMP%], .search-input[_ngcontent-%COMP%]{width:100%}.section-btn[_ngcontent-%COMP%]{height:80px;padding:10px 20px;font-size:45px;color:#f7f9fc;background-color:var(--main);border:none;border-radius:10px;box-shadow:0 0 5px #00000040;cursor:pointer}.search-input[_ngcontent-%COMP%]{padding:10px 20px;font-size:30px;color:var(--primary);background-color:var(--secondary);border:none;border-radius:50px;box-shadow:0 0 5px #00000040}.search-input[_ngcontent-%COMP%]::placeholder{color:var(--primary)}table[_ngcontent-%COMP%]{width:1420px;margin:auto auto 60px;border-collapse:collapse;text-align:left;box-shadow:0 0 5px #00000040}.header[_ngcontent-%COMP%]{font-size:40px;color:var(--primary);background-color:var(--secondary);border:3px solid var(--secondary)}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:10px 60px;position:relative;width:30%}.row[_ngcontent-%COMP%]{font-size:30px;color:var(--secondary);border:3px solid var(--secondary);position:relative;cursor:pointer}.row[_ngcontent-%COMP%]:hover{background-color:var(--main);color:#f7f9fc}.test[_ngcontent-%COMP%]{position:absolute;bottom:50%}.form-container[_ngcontent-%COMP%]{position:fixed;inset:0;padding-left:250px;display:flex;align-items:center;justify-content:center;background-color:#0000007f;z-index:10}.index[_ngcontent-%COMP%]{z-index:100!important}form[_ngcontent-%COMP%]{width:700px;padding:60px;display:flex;flex-direction:column;background-color:var(--primary);border:3px solid var(--main);border-radius:15px;box-shadow:0 0 5px #00000040;position:relative}.fa-xmark[_ngcontent-%COMP%]{position:absolute;top:15px;right:15px;font-size:50px;color:var(--secondary);cursor:pointer}.inputs-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:30px}label[_ngcontent-%COMP%]{margin-bottom:10px;font-size:35px;color:var(--secondary)}.form-input[_ngcontent-%COMP%]{margin-bottom:30px;height:70px;padding:10px 20px;font-size:30px;color:var(--primary);background-color:var(--secondary);border:none;border-radius:5px;box-shadow:0 0 5px #00000040}.normal-btn[_ngcontent-%COMP%]{width:100%;height:80px;padding:10px 20px;font-size:35px;color:#f7f9fc;background-color:var(--main);border:none;border-radius:10px;box-shadow:0 0 5px #00000040;cursor:pointer}.form-btn[_ngcontent-%COMP%]:disabled{opacity:50%}.alert-container[_ngcontent-%COMP%]{position:fixed;inset:0;padding-left:250px;display:flex;align-items:center;justify-content:center;background-color:#0000007f;z-index:10}.alert[_ngcontent-%COMP%]{width:700px;display:flex;flex-direction:column;padding:60px;background-color:var(--primary);border:3px solid var(--main);border-radius:15px;box-shadow:0 0 5px #00000040;position:relative}.alert-name[_ngcontent-%COMP%]{margin-bottom:10px;font-size:35px;color:var(--secondary)}.alert-msg[_ngcontent-%COMP%]{font-size:30px;color:var(--secondary)}.btns-container[_ngcontent-%COMP%]{margin-top:30px;display:flex;justify-content:space-between;gap:10%}@media (width <= 1729px){table[_ngcontent-%COMP%]{width:1320px}}@media (width <= 1629px){.actions-container[_ngcontent-%COMP%]{margin-bottom:51px}.section-btn[_ngcontent-%COMP%]{height:70px;font-size:40px}.search-input[_ngcontent-%COMP%]{font-size:25px}table[_ngcontent-%COMP%]{width:1170px}.header[_ngcontent-%COMP%]{font-size:35px}.row[_ngcontent-%COMP%]{font-size:25px}}@media (width <= 1479px){table[_ngcontent-%COMP%]{width:1020px}.form-container[_ngcontent-%COMP%], .alert-container[_ngcontent-%COMP%]{padding-left:200px}}@media (width <= 1279px){table[_ngcontent-%COMP%]{width:1010px}.form-container[_ngcontent-%COMP%], .alert-container[_ngcontent-%COMP%]{padding:30px}form[_ngcontent-%COMP%]{width:500px;padding:30px}label[_ngcontent-%COMP%]{font-size:30px}.form-input[_ngcontent-%COMP%]{height:60px;font-size:25px}.normal-btn[_ngcontent-%COMP%]{height:70px;font-size:30px}.alert[_ngcontent-%COMP%]{width:500px;padding:30px}.alert-name[_ngcontent-%COMP%]{font-size:30px}.alert-msg[_ngcontent-%COMP%]{font-size:25px}}@media (width <= 1069px){.section-btn[_ngcontent-%COMP%]{height:60px;height:auto;font-size:30px}.search-input[_ngcontent-%COMP%]{font-size:20px}table[_ngcontent-%COMP%]{width:860px}.header[_ngcontent-%COMP%]{font-size:30px}.row[_ngcontent-%COMP%]{font-size:20px}}@media (width <= 919px){.table-container[_ngcontent-%COMP%]{margin:30px}table[_ngcontent-%COMP%]{width:100%;text-align:center;word-break:break-all}.header[_ngcontent-%COMP%]{font-size:25px}tr[_ngcontent-%COMP%], th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{max-width:100px;padding-left:5px;padding-right:5px}}"]})}return n})();var Xw=(n,e)=>e.name;function J2(n,e){if(n&1){let t=$();g(0,"tr",10),M("click",function(){let r=O(t).$index,s=E();return k(s.onOpenAlert(r))}),g(1,"td"),y(2),m(),g(3,"td"),y(4),Ne(5,"number"),m(),g(6,"td"),y(7),m()()}if(n&2){let t=e.$implicit;C(2),ee(t.source),C(2),ee(We(5,3,t.amount)),C(3),ee(t.receiver)}}function Z2(n,e){if(n&1&&N(0,"option",17),n&2){let t=e.$implicit;Hn("value",t.name)}}function eU(n,e){if(n&1&&N(0,"option",17),n&2){let t=e.$implicit;Hn("value",t.name)}}function tU(n,e){if(n&1){let t=$();g(0,"div",7)(1,"form",11,0),M("ngSubmit",function(){O(t);let r=Re(2),s=E();return k(s.onSubmit(r))}),g(3,"i",12),M("click",function(){O(t);let r=E();return k(r.onOpenForm())}),m(),g(4,"div",13)(5,"label",14),y(6,"Source"),m(),N(7,"input",15),g(8,"datalist",16),it(9,Z2,1,1,"option",17,Xw),m(),g(11,"label",18),y(12,"Amount"),m(),N(13,"input",19),g(14,"label",20),y(15,"Receiver"),m(),N(16,"input",21),g(17,"datalist",22),it(18,eU,1,1,"option",17,Xw),m()(),g(20,"button",23),y(21," Create transaction "),m()()()}if(n&2){let t=Re(2),i=E();C(9),rt(i.mainAccounts),C(9),rt(i.expenseAccounts),C(2),me("disabled",!t.valid)}}function nU(n,e){if(n&1){let t=$();g(0,"div",8)(1,"div",24)(2,"i",12),M("click",function(){O(t);let r=E();return k(r.onCloseAlert())}),m(),g(3,"p",25),y(4," Insufficient funds "),m(),g(5,"p",26),y(6," The amount exceeds the available balance. Please enter a lower amount or check the account balance to proceed. "),m()()()}}function iU(n,e){if(n&1){let t=$();g(0,"div",9)(1,"div",24)(2,"p",25),y(3,"Transaction deletion"),m(),g(4,"p",26),y(5," Deleting this transaction will reverse it. The amount will be returned to the original account. "),m(),g(6,"div",27)(7,"button",28),M("click",function(){O(t);let r=E();return k(r.onOpenAlert(r.NaN))}),y(8,"Close"),m(),g(9,"button",28),M("click",function(){O(t);let r=E();return k(r.onDelete())}),y(10,"Delete"),m()()()()}}var Qw=(()=>{class n{search="";router=I(Me);alertType=!1;deleteAlert=!1;transactionIdx=NaN;NaN=NaN;isOpen=!1;dataService=I($e);expense;transactions;mainAccounts;expenseAccounts;subscription;destroyRef=I(gt);constructor(){this.search=this.router.getCurrentNavigation()?.extras.state?.data}ngOnInit(){this.subscription=this.dataService.getData().pipe(ye(t=>{this.mainAccounts=JSON.parse(JSON.stringify(t.accounts.main)),this.expenseAccounts=JSON.parse(JSON.stringify(t.accounts.expense))}),j(t=>t.transactions.expense)).subscribe(t=>{this.expense=t,this.transactions=this.expense.map(i=>({source:i.source,amount:i.amount,receiver:i.receiver}))}),this.destroyRef.onDestroy(()=>this.subscription.unsubscribe())}onOpenAlert(t){this.deleteAlert=!this.deleteAlert,this.transactionIdx=t}onDelete(){let t=this.transactions[this.transactionIdx],i=t.source,r=t.amount,s=t.receiver,o=this.mainAccounts.findIndex(u=>u.name===i),a=this.expenseAccounts.findIndex(u=>u.name===s),c=this.mainAccounts[o].balance+r,l=this.expenseAccounts[a].balance-r;if(l<0){this.alertType=!0;return}this.dataService.onEditBalance("main",o,c),this.dataService.onEditBalance("expense",a,l),this.dataService.onDeleteTransaction("expense",this.transactionIdx),this.onOpenAlert(NaN)}onCloseAlert(){this.alertType=!1}onOpenForm(){this.isOpen=!this.isOpen}onSubmit(t){let i=t.value.source,r=t.value.amount,s=t.value.receiver,o=this.mainAccounts.findIndex(d=>d.name===i),a=this.expenseAccounts.findIndex(d=>d.name===s),c=this.mainAccounts[o].balance-r,l=this.expenseAccounts[a].balance+r;if(c<0){this.alertType=!0;return}let u={source:i,amount:r,receiver:s};this.dataService.onEditBalance("main",o,c),this.dataService.onEditBalance("expense",a,l),this.dataService.onCreateTransaction("expense",u),this.onOpenForm()}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=Ce({type:n,selectors:[["app-expense-transactions"]],standalone:!0,features:[we],decls:19,vars:7,consts:[["form","ngForm"],[1,"actions-container"],[1,"nunito-sans-bold","section-btn",3,"click"],["type","text","placeholder","Search...",1,"nunito-sans-semibold","search-input",3,"ngModelChange","ngModel"],[1,"table-container"],[1,"nunito-sans-bold","header"],["title","Click to delete transaction",1,"nunito-sans-semibold","row"],[1,"form-container"],[1,"alert-container","index"],[1,"alert-container"],["title","Click to delete transaction",1,"nunito-sans-semibold","row",3,"click"],[3,"ngSubmit"],[1,"fa-solid","fa-xmark",3,"click"],[1,"inputs-container"],["for","source",1,"nunito-sans-semibold"],["type","text","id","source","list","mains","ngModel","","name","source","required","",1,"nunito-sans-regular","form-input"],["id","mains"],[3,"value"],["for","amount",1,"nunito-sans-semibold"],["type","number","min","1","max","999999999","id","amount","ngModel","","name","amount","required","",1,"nunito-sans-regular","form-input"],["for","receiver",1,"nunito-sans-semibold"],["type","text","id","receiver","list","expenses","ngModel","","name","receiver","required","",1,"nunito-sans-regular","form-input"],["id","expenses"],[1,"nunito-sans-bold","normal-btn","form-btn",3,"disabled"],[1,"alert"],[1,"nunito-sans-bold","alert-name"],[1,"nunito-sans-regular","alert-msg"],[1,"btns-container"],[1,"nunito-sans-bold","normal-btn",3,"click"]],template:function(i,r){i&1&&(g(0,"div",1)(1,"button",2),M("click",function(){return r.onOpenForm()}),y(2,"Create transaction"),m(),g(3,"input",3),ct("ngModelChange",function(o){return at(r.search,o)||(r.search=o),o}),m()(),g(4,"div",4)(5,"table")(6,"tr",5)(7,"th"),y(8,"Source"),m(),g(9,"th"),y(10,"Amount"),m(),g(11,"th"),y(12,"Receiver"),m()(),it(13,J2,8,5,"tr",6,mr),Ne(15,"filter"),m()(),ne(16,tU,22,1,"div",7)(17,nU,7,0,"div",8)(18,iU,11,0,"div",9)),i&2&&(C(3),ot("ngModel",r.search),C(10),rt(gr(15,4,r.transactions,r.search)),C(3),H(r.isOpen===!0?16:-1),C(),H(r.alertType===!0?17:-1),C(),H(r.deleteAlert===!0?18:-1))},dependencies:[yt,wt,Ct,Dr,Rr,Ze,Nt,bt,xt,dt,Ft,Lt,ut,lt,As],styles:[".actions-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:60px auto 44px;padding:0 30px;width:fit-content;gap:15px}.section-btn[_ngcontent-%COMP%], .search-input[_ngcontent-%COMP%]{width:100%}.section-btn[_ngcontent-%COMP%]{height:80px;padding:10px 20px;font-size:45px;color:#f7f9fc;background-color:var(--main);border:none;border-radius:10px;box-shadow:0 0 5px #00000040;cursor:pointer}.search-input[_ngcontent-%COMP%]{padding:10px 20px;font-size:30px;color:var(--primary);background-color:var(--secondary);border:none;border-radius:50px;box-shadow:0 0 5px #00000040}.search-input[_ngcontent-%COMP%]::placeholder{color:var(--primary)}table[_ngcontent-%COMP%]{width:1420px;margin:auto auto 60px;border-collapse:collapse;text-align:left;box-shadow:0 0 5px #00000040}.header[_ngcontent-%COMP%]{font-size:40px;color:var(--primary);background-color:var(--secondary);border:3px solid var(--secondary)}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:10px 60px;position:relative;width:30%}.row[_ngcontent-%COMP%]{font-size:30px;color:var(--secondary);border:3px solid var(--secondary);position:relative;cursor:pointer}.row[_ngcontent-%COMP%]:hover{background-color:var(--main);color:#f7f9fc}.test[_ngcontent-%COMP%]{position:absolute;bottom:50%}.form-container[_ngcontent-%COMP%]{position:fixed;inset:0;padding-left:250px;display:flex;align-items:center;justify-content:center;background-color:#0000007f;z-index:10}.index[_ngcontent-%COMP%]{z-index:100!important}form[_ngcontent-%COMP%]{width:700px;padding:60px;display:flex;flex-direction:column;background-color:var(--primary);border:3px solid var(--main);border-radius:15px;box-shadow:0 0 5px #00000040;position:relative}.fa-xmark[_ngcontent-%COMP%]{position:absolute;top:15px;right:15px;font-size:50px;color:var(--secondary);cursor:pointer}.inputs-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:30px}label[_ngcontent-%COMP%]{margin-bottom:10px;font-size:35px;color:var(--secondary)}.form-input[_ngcontent-%COMP%]{margin-bottom:30px;height:70px;padding:10px 20px;font-size:30px;color:var(--primary);background-color:var(--secondary);border:none;border-radius:5px;box-shadow:0 0 5px #00000040}.normal-btn[_ngcontent-%COMP%]{width:100%;height:80px;padding:10px 20px;font-size:35px;color:#f7f9fc;background-color:var(--main);border:none;border-radius:10px;box-shadow:0 0 5px #00000040;cursor:pointer}.form-btn[_ngcontent-%COMP%]:disabled{opacity:50%}.alert-container[_ngcontent-%COMP%]{position:fixed;inset:0;padding-left:250px;display:flex;align-items:center;justify-content:center;background-color:#0000007f;z-index:10}.alert[_ngcontent-%COMP%]{width:700px;display:flex;flex-direction:column;padding:60px;background-color:var(--primary);border:3px solid var(--main);border-radius:15px;box-shadow:0 0 5px #00000040;position:relative}.alert-name[_ngcontent-%COMP%]{margin-bottom:10px;font-size:35px;color:var(--secondary)}.alert-msg[_ngcontent-%COMP%]{font-size:30px;color:var(--secondary)}.btns-container[_ngcontent-%COMP%]{margin-top:30px;display:flex;justify-content:space-between;gap:10%}@media (width <= 1729px){table[_ngcontent-%COMP%]{width:1320px}}@media (width <= 1629px){.actions-container[_ngcontent-%COMP%]{margin-bottom:51px}.section-btn[_ngcontent-%COMP%]{height:70px;font-size:40px}.search-input[_ngcontent-%COMP%]{font-size:25px}table[_ngcontent-%COMP%]{width:1170px}.header[_ngcontent-%COMP%]{font-size:35px}.row[_ngcontent-%COMP%]{font-size:25px}}@media (width <= 1479px){table[_ngcontent-%COMP%]{width:1020px}.form-container[_ngcontent-%COMP%], .alert-container[_ngcontent-%COMP%]{padding-left:200px}}@media (width <= 1279px){table[_ngcontent-%COMP%]{width:1010px}.form-container[_ngcontent-%COMP%], .alert-container[_ngcontent-%COMP%]{padding:30px}form[_ngcontent-%COMP%]{width:500px;padding:30px}label[_ngcontent-%COMP%]{font-size:30px}.form-input[_ngcontent-%COMP%]{height:60px;font-size:25px}.normal-btn[_ngcontent-%COMP%]{height:70px;font-size:30px}.alert[_ngcontent-%COMP%]{width:500px;padding:30px}.alert-name[_ngcontent-%COMP%]{font-size:30px}.alert-msg[_ngcontent-%COMP%]{font-size:25px}}@media (width <= 1069px){.section-btn[_ngcontent-%COMP%]{height:60px;height:auto;font-size:30px}.search-input[_ngcontent-%COMP%]{font-size:20px}table[_ngcontent-%COMP%]{width:860px}.header[_ngcontent-%COMP%]{font-size:30px}.row[_ngcontent-%COMP%]{font-size:20px}}@media (width <= 919px){.table-container[_ngcontent-%COMP%]{margin:30px}table[_ngcontent-%COMP%]{width:100%;text-align:center;word-break:break-all}.header[_ngcontent-%COMP%]{font-size:25px}tr[_ngcontent-%COMP%], th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{max-width:100px;padding-left:5px;padding-right:5px}}"]})}return n})();var Jw=(n,e)=>{let t=I(Me);return localStorage.getItem("uid")?(t.navigate(["/dashboard"]),!1):!0};var Zw=[{path:"",pathMatch:"full",redirectTo:"welcome"},{path:"welcome",component:v_,data:{title:"Welcome"},canActivate:[Jw]},{path:"auth-form",component:_b,data:{title:"Authentication"}},{path:"dashboard",component:Ww,data:{title:"Dashboard"}},{path:"main-accounts",component:Hw,data:{title:"Main"}},{path:"income-accounts",component:$w,data:{title:"Income"}},{path:"expense-accounts",component:Gw,data:{title:"Expense"}},{path:"transfer-transactions",component:qw,data:{title:"Transfer"}},{path:"income-transactions",component:Kw,data:{title:"Income"}},{path:"expense-transactions",component:Qw,data:{title:"Expense"}}];var rU="@",sU=(()=>{let e=class e{constructor(i,r,s,o,a){this.doc=i,this.delegate=r,this.zone=s,this.animationType=o,this.moduleImpl=a,this._rendererFactoryPromise=null,this.scheduler=I(ag,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){return(this.moduleImpl??import("./chunk-LKAEUI2X.js").then(r=>r)).catch(r=>{throw new be(5300,!1)}).then(({\u0275createEngine:r,\u0275AnimationRendererFactory:s})=>{this._engine=r(this.animationType,this.doc);let o=new s(this.delegate,this._engine,this.zone);return this.delegate=o,o})}createRenderer(i,r){let s=this.delegate.createRenderer(i,r);if(s.\u0275type===0)return s;typeof s.throwOnSyntheticProps=="boolean"&&(s.throwOnSyntheticProps=!1);let o=new Lm(s);return r?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(a=>{let c=a.createRenderer(i,r);o.use(c),this.scheduler?.notify(9)}).catch(a=>{o.use(s)}),o}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}};e.\u0275fac=function(r){Ru()},e.\u0275prov=q({token:e,factory:e.\u0275fac});let n=e;return n})(),Lm=class{constructor(e){this.delegate=e,this.replay=[],this.\u0275type=1}use(e){if(this.delegate=e,this.replay!==null){for(let t of this.replay)t(e);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}get destroyNode(){return this.delegate.destroyNode}appendChild(e,t){this.delegate.appendChild(e,t)}insertBefore(e,t,i,r){this.delegate.insertBefore(e,t,i,r)}removeChild(e,t,i){this.delegate.removeChild(e,t,i)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){this.shouldReplay(t)&&this.replay.push(r=>r.setProperty(e,t,i)),this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.shouldReplay(t)&&this.replay.push(r=>r.listen(e,t,i)),this.delegate.listen(e,t,i)}shouldReplay(e){return this.replay!==null&&e.startsWith(rU)}};function eS(n="animations"){return cg("NgAsyncAnimations"),Kt([{provide:ja,useFactory:(e,t,i)=>new sU(e,t,i,n),deps:[kt,Ga,Be]},{provide:rg,useValue:n==="noop"?"NoopAnimations":"BrowserAnimations"}])}var tS={providers:[yg({eventCoalescing:!0}),__(Zw),eS(),y0(()=>b0({projectId:"finance-dashboard-46505",appId:"1:959168120206:web:9b388a3ef16198026b90df",databaseURL:"https://finance-dashboard-46505-default-rtdb.europe-west1.firebasedatabase.app",storageBucket:"finance-dashboard-46505.appspot.com",apiKey:"AIzaSyC5YfGpP6XexjqN5q_9GVlTsNTNX-HxL-Y",authDomain:"finance-dashboard-46505.firebaseapp.com",messagingSenderId:"959168120206",measurementId:"G-GX0K1LWQ77"})),mv(()=>_v()),fb(()=>pb())]};var oU=["btn"],aU=["icon"],cU=n=>({dark:n}),lU=(n,e)=>({icon:!0,"fa-solid":!0,"fa-moon":n,"fa-sun":e});function uU(n,e){n&1&&(g(0,"a",6),y(1,"Welcome"),m())}function dU(n,e){if(n&1){let t=$();g(0,"button",33),M("click",function(){O(t);let r=E(2);return k(r.onLogOut())}),y(1,"Log Out"),m()}}function hU(n,e){if(n&1){let t=$();g(0,"header")(1,"i",5),M("keydown",function(r){O(t);let s=E();return k(s.handleToggleNav(r))})("click",function(){O(t);let r=E();return k(r.onToggleNav())}),m(),g(2,"nav"),ne(3,uU,2,0,"a",6),g(4,"a",7),y(5,"Dashboard"),m(),g(6,"a",8),y(7," Accounts "),m(),g(8,"a",9),N(9,"input",10),g(10,"label",11),y(11,"Main"),m()(),g(12,"a",12),N(13,"input",13),g(14,"label",14),y(15,"Income"),m()(),g(16,"a",15),N(17,"input",16),g(18,"label",17),y(19,"Expense"),m()(),g(20,"a",18),y(21," Transactions "),m(),g(22,"a",19),N(23,"input",20),g(24,"label",21),y(25,"Transfer"),m()(),g(26,"a",22),N(27,"input",23),g(28,"label",24),y(29,"Income"),m()(),g(30,"a",25),N(31,"input",26),g(32,"label",27),y(33,"Expense"),m()()(),g(34,"div",28)(35,"div",29),M("click",function(){O(t);let r=E();return k(r.onToggleTheme())})("keydown",function(r){O(t);let s=E();return k(s.handleToggleTheme(r))}),g(36,"div",30,0)(38,"div",31),N(39,"i",null,1),m()()(),ne(41,dU,2,0,"button",32),m()()}if(n&2){let t=E();me("@drawer",void 0),C(3),H(t.isUser?-1:3),C(3),pr("on",t.location==="/main-accounts"||t.location==="/income-accounts"||t.location==="/expense-accounts"),C(3),me("checked",t.location==="/main-accounts"),C(4),me("checked",t.location==="/income-accounts"),C(4),me("checked",t.location==="/expense-accounts"),C(3),pr("on",t.location==="/transfer-transactions"||t.location==="/income-transactions"||t.location==="/expense-transactions"),C(3),me("checked",t.location==="/transfer-transactions"),C(4),me("checked",t.location==="/income-transactions"),C(4),me("checked",t.location==="/expense-transactions"),C(5),Nu(mg(17,cU,t.isDarkMode===!0)),C(3),Nu(gg(19,lU,t.isDarkMode===!0,t.isDarkMode===!1)),C(2),H(t.isUser?41:-1)}}var nS=(()=>{class n{btn;icon;isDarkMode=!1;isOpen=!0;title="";location="";dataService=I($e);auth=I(qc);theme="";isUser=!1;router=I(Me);activatedRoute=I(Sn);ngOnInit(){this.dataService.onGetTheme().then(()=>{this.dataService.getData().pipe(jn(i=>!!i&&!!i.theme),j(i=>i.theme)).subscribe(i=>{this.theme=i,document.documentElement.setAttribute("data-theme",this.theme),this.isDarkMode=this.theme==="dark",this.isUser=!!i})}),document.documentElement.getAttribute("data-theme")==="dark"?this.isDarkMode=!0:this.isDarkMode=!1,this.router.events.subscribe(i=>{this.activatedRoute.firstChild?.data.subscribe(r=>{this.title=r.title}),this.isOpen=!1,this.updateNav(),i instanceof Qt&&(this.location=i.url)}),this.updateNav()}updateNav(){window.innerWidth<=1279?this.isOpen=!1:this.isOpen=!0}onToggleNav(){this.isOpen=!this.isOpen}handleToggleNav(t){t.key==="Enter"&&this.onToggleNav()}onToggleTheme(){document.documentElement.setAttribute("data-theme",this.isDarkMode?"light":"dark"),this.isDarkMode=!this.isDarkMode;let t=this.isDarkMode?"move-right":"move-left",i=this.isDarkMode?"spin-right":"spin-left";if(this.btn.nativeElement.classList.remove("move-right","move-left"),this.btn.nativeElement.classList.add(t),this.icon.nativeElement.classList.remove("spin-right","spin-left"),this.icon.nativeElement.classList.add(i),localStorage.getItem("uid")!==null){let s=this.isDarkMode?"dark":"light";this.dataService.onSetTheme(s)}}handleToggleTheme(t){t.key==="Enter"&&this.onToggleTheme()}onLogOut(){this.auth.signOut().subscribe(()=>{localStorage.removeItem("uid"),this.dataService.onSetMode(),document.documentElement.setAttribute("data-theme","light"),this.isDarkMode=!1,this.isUser=!1,this.router.navigate(["/welcome"])})}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=Ce({type:n,selectors:[["app-navigation"]],viewQuery:function(i,r){if(i&1&&(Lu(oU,5),Lu(aU,5)),i&2){let s;Vs(s=Us())&&(r.btn=s.first),Vs(s=Us())&&(r.icon=s.first)}},hostBindings:function(i,r){i&1&&M("resize",function(){return r.updateNav()},!1,og)},standalone:!0,features:[we],decls:5,vars:2,consts:[["btn",""],["icon",""],[1,"small-header"],["tabindex","0",1,"fa-solid","fa-bars-staggered",3,"keydown","click"],[1,"nunito-sans-bold","title"],["tabindex","0",1,"fa-solid","fa-xmark",3,"keydown","click"],["routerLink","welcome","routerLinkActive","active",1,"nunito-sans-bold","link"],["routerLink","dashboard","routerLinkActive","active",1,"nunito-sans-bold","link"],["routerLink","main-accounts","routerLinkActive","active",1,"nunito-sans-bold","link"],["routerLink","main-accounts",1,"sub-link"],["type","radio","id","main-accounts","name","accounts",3,"checked"],["for","main-accounts",1,"nunito-sans-bold"],["routerLink","income-accounts",1,"sub-link"],["type","radio","id","income-accounts","name","accounts",3,"checked"],["for","income-accounts",1,"nunito-sans-bold"],["routerLink","expense-accounts",1,"sub-link"],["type","radio","id","expense-accounts","name","accounts",3,"checked"],["for","expense-accounts",1,"nunito-sans-bold"],["routerLink","transfer-transactions","routerLinkActive","active",1,"nunito-sans-bold","link"],["routerLink","transfer-transactions",1,"sub-link"],["type","radio","id","transfer-transactions","name","transactions",3,"checked"],["for","transfer-transactions",1,"nunito-sans-bold"],["routerLink","income-transactions",1,"sub-link"],["type","radio","id","income-transactions","name","transactions",3,"checked"],["for","income-transactions",1,"nunito-sans-bold"],["routerLink","expense-transactions",1,"sub-link"],["type","radio","id","expense-transactions","name","transactions",3,"checked"],["for","expense-transactions",1,"nunito-sans-bold"],[1,"btn-container"],["tabindex","0",1,"btn",3,"click","keydown"],[1,"indicator"],[1,"icon-container"],[1,"nunito-sans-bold","log-out"],[1,"nunito-sans-bold","log-out",3,"click"]],template:function(i,r){i&1&&(g(0,"div",2)(1,"i",3),M("keydown",function(o){return r.handleToggleNav(o)})("click",function(){return r.onToggleNav()}),m(),g(2,"p",4),y(3),m()(),ne(4,hU,42,22,"header")),i&2&&(C(3),ee(r.title),C(),H(r.isOpen?4:-1))},dependencies:[Tr,g_],styles:['.fa-bars-staggered[_ngcontent-%COMP%]{position:absolute;left:10px;font-size:40px;color:var(--secondary);cursor:pointer}.small-header[_ngcontent-%COMP%]{position:relative;width:100%;height:60px;display:flex;justify-content:center;align-items:center;border-bottom:3px solid var(--main);display:none}.title[_ngcontent-%COMP%]{font-size:30px;color:var(--secondary)}header[_ngcontent-%COMP%]{position:fixed;top:0;height:100%;width:250px;border-right:3px solid var(--main);padding:30px 25px;display:flex;flex-direction:column;justify-content:space-between;background-color:var(--primary);transform-origin:left;z-index:10}nav[_ngcontent-%COMP%], nav[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;flex-direction:column}a[_ngcontent-%COMP%]{text-decoration:none}.link[_ngcontent-%COMP%], .log-out[_ngcontent-%COMP%]{width:100%;height:50px;margin-top:30px;padding:10px;background-color:var(--secondary);color:var(--primary);font-size:25px;border:none;border-radius:5px;box-shadow:0 0 5px #00000040;transition:all .3s}.link[_ngcontent-%COMP%]:hover, .log-out[_ngcontent-%COMP%]:hover, .active[_ngcontent-%COMP%], .on[_ngcontent-%COMP%]{background-color:var(--main);color:#f7f9fc;cursor:pointer}.sub-link[_ngcontent-%COMP%]{margin-top:15px;font-size:25px;display:flex;align-items:center;color:var(--secondary);cursor:pointer}label[_ngcontent-%COMP%]{cursor:pointer}input[type=radio][_ngcontent-%COMP%]{appearance:none;width:20px;height:20px;margin-right:10px;margin-left:20px;border:2px solid var(--main);border-radius:50px;background-color:var(--primary);display:flex;justify-content:center;align-items:center;cursor:pointer}input[type=radio][_ngcontent-%COMP%]:before{content:"";width:70%;height:70%;border-radius:50px}input[type=radio][_ngcontent-%COMP%]:checked:before{background-color:var(--main)}.fa-xmark[_ngcontent-%COMP%]{position:absolute;font-size:50px;color:var(--secondary);top:5px;right:5px;cursor:pointer;display:none}.btn[_ngcontent-%COMP%]{width:100%;height:50px;padding:5px;display:flex;align-items:center;position:relative;border-radius:50px;background-color:var(--secondary);box-shadow:0 0 5px #00000040;cursor:pointer;transition:all .3s}.indicator[_ngcontent-%COMP%]{position:absolute;width:50%;height:80%;border-radius:50px;box-shadow:0 0 5px #00000040}.indicator.move-right[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_move-right .5s!important}.indicator.move-left[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_move-left .5s;transform:translate(0)}.indicator.dark[_ngcontent-%COMP%]{animation:transform 0s;transform:translate(calc(100% - 10px))}.icon-container[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;justify-content:center;align-items:center;background-color:var(--primary);border-radius:50px}.icon[_ngcontent-%COMP%]{color:var(--secondary);font-size:35px}.icon.spin-right[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin-right .5s}.icon.spin-left[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin-left .5s}@keyframes _ngcontent-%COMP%_move-right{0%{transform:translate(0)}to{transform:translate(calc(100% - 10px))}}@keyframes _ngcontent-%COMP%_move-left{0%{transform:translate(calc(100% - 10px))}to{transform:translate(0)}}@keyframes _ngcontent-%COMP%_spin-right{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_spin-left{0%{transform:rotate(360deg)}to{transform:rotate(0)}}@media (width <= 1479px){header[_ngcontent-%COMP%]{width:200px}.link[_ngcontent-%COMP%], .log-out[_ngcontent-%COMP%]{height:45px;font-size:20px}.sub-link[_ngcontent-%COMP%]{font-size:20px}input[type=radio][_ngcontent-%COMP%]{width:18px;height:18px}input[type=radio][_ngcontent-%COMP%]:before{margin-top:1px}.btn[_ngcontent-%COMP%]{height:45px}.icon[_ngcontent-%COMP%]{color:var(--secondary);font-size:30px}}@media (width <= 1279px){.fa-xmark[_ngcontent-%COMP%]{display:block}.small-header[_ngcontent-%COMP%]{display:flex}}'],data:{animation:[Tg("drawer",[Bu(":enter",[Bs({transform:"scaleX(0)"}),ju("0.3s ease",Bs({transform:"scaleX(1)"}))]),Bu(":leave",[Bs({transform:"scaleX(1)"}),ju("0.3s ease",Bs({transform:"scaleX(0)"}))])])]}})}return n})();var iS=(()=>{class n{title="finance-dashboard";static \u0275fac=function(i){return new(i||n)};static \u0275cmp=Ce({type:n,selectors:[["app-root"]],standalone:!0,features:[we],decls:3,vars:0,consts:[[1,"outlet"]],template:function(i,r){i&1&&(N(0,"app-navigation"),g(1,"div",0),N(2,"router-outlet"),m())},dependencies:[Ad,nS],styles:[".outlet[_ngcontent-%COMP%]{margin-left:250px}@media (width <= 1479px){.outlet[_ngcontent-%COMP%]{margin-left:200px}}@media (width <= 1279px){.outlet[_ngcontent-%COMP%]{margin-left:0}}"]})}return n})();Rg(iS,tS).catch(n=>console.error(n));
